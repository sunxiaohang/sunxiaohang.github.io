
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Android | KnowledgeBase</title>
<meta name="description" content="KnowledgeBase">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://sunxiaohang.github.io/favicon.ico?v=1586179020342">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://sunxiaohang.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://sunxiaohang.github.io">
        <img class="avatar" src="https://sunxiaohang.github.io/images/avatar.png?v=1586179020342" alt="" width="32px" height="32px">
      </a>
      <a href="https://sunxiaohang.github.io">
        <h1 class="site-title">KnowledgeBase</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">Android</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-04-06</span>
            
          </div>
          <div class="post-content">
            <p>初学Android时的一些基础知识汇总，作为理解Android基本原理的实验性代码，不具有参考价值，主要参考书目为第一行代码</p>
<!-- more -->
<h4 id="activity">Activity</h4>
<pre><code>    protected void onCreate(Bundle savedInstanceState) {
        Log.i(&quot;target&quot;,&quot;Activity onCreate&quot;);
    }
    protected void onStart() {
        Log.i(&quot;target&quot;,&quot;Activity onStart&quot;);
    }
    protected void onRestart() {
        Log.i(&quot;target&quot;,&quot;Activity onRestart&quot;);
    }
    protected void onResume() {
        Log.i(&quot;target&quot;,&quot;Activity onResume&quot;);
    }
    protected void onPause() {
        Log.i(&quot;target&quot;,&quot;Activity onPause&quot;);
    }
    protected void onStop() {
        Log.i(&quot;target&quot;,&quot;Activity onStop&quot;);
    }
    protected void onDestroy() {
        Log.i(&quot;target&quot;,&quot;Activity onDestroy&quot;);
    }
</code></pre>
<h5 id="不同情境下生命周期方法执行顺序">不同情境下生命周期方法执行顺序</h5>
<p><em>正常情况下生命周期</em><br>
<code>从进入activity到按下回退键退出activity</code></p>
<pre><code>com.example.root.activitylifecycle I/target: Activity onCreate
com.example.root.activitylifecycle I/target: Activity onStart
com.example.root.activitylifecycle I/target: Activity onResume
com.example.root.activitylifecycle I/target: Activity onPause
com.example.root.activitylifecycle I/target: Activity onStop
com.example.root.activitylifecycle I/target: Activity onDestroy
</code></pre>
<p><em>屏幕灭掉</em></p>
<pre><code>com.example.root.activitylifecycle I/target: Activity onCreate
com.example.root.activitylifecycle I/target: Activity onStart
com.example.root.activitylifecycle I/target: Activity onResume
com.example.root.activitylifecycle I/target: Activity onPause
com.example.root.activitylifecycle I/target: Activity onStop
</code></pre>
<p><code>可以看到并没有执行onDestroy方法，接下来点亮屏幕</code></p>
<pre><code>com.example.root.activitylifecycle I/target: Activity onRestart
com.example.root.activitylifecycle I/target: Activity onStart
com.example.root.activitylifecycle I/target: Activity onResume
</code></pre>
<p><em>跳转到其他activity</em></p>
<pre><code>com.example.root.activitylifecycle I/target: Activity onCreate
com.example.root.activitylifecycle I/target: Activity onStart
com.example.root.activitylifecycle I/target: Activity onResume
com.example.root.activitylifecycle I/target: Activity onPause
com.example.root.activitylifecycle I/target: SecondActivity onCreate
com.example.root.activitylifecycle I/target: SecondActivity onStart
com.example.root.activitylifecycle I/target: SecondActivity onResume
com.example.root.activitylifecycle I/target: Activity onStop
</code></pre>
<p>注意：当第二个activity执行到<code>onResume</code>方法后第一个activity才执行<code>onStop</code>方法,即当第二个activity就绪之后第一个activity才执行onStop方法，但第一个activity并没有执行onDestroy方法，它被放入后退栈中。<br>
<code>接下来按下退格键返回第一个activity</code></p>
<pre><code>com.example.root.activitylifecycle I/target: SecondActivity onPause
com.example.root.activitylifecycle I/target: Activity onRestart
com.example.root.activitylifecycle I/target: Activity onStart
com.example.root.activitylifecycle I/target: Activity onResume
com.example.root.activitylifecycle I/target: SecondActivity onStop
com.example.root.activitylifecycle I/target: SecondActivity onDestroy
</code></pre>
<p>第二个activity的生命周期执行完成，第一个activity执行<code>onRestart</code>到<code>onResume</code>重新就绪,再次按下退格键</p>
<pre><code>com.example.root.activitylifecycle I/target: Activity onPause
com.example.root.activitylifecycle I/target: SecondActivity onStop
com.example.root.activitylifecycle I/target: SecondActivity onDestroy
</code></pre>
<p>第一个activity生命周期执行结束</p>
<h5 id="activity异常时数据保存于数据恢复">Activity异常时数据保存于数据恢复</h5>
<p>当屏幕旋转的时候activity就会重新执行onCreate,我们可以用屏幕旋转模拟activity异常销毁</p>
<pre><code>    protected void onSaveInstanceState(Bundle outState) {
        Log.i(&quot;target&quot;,&quot;Activity onSaveInstanceState&quot;);
        outState.putString(&quot;target&quot;,&quot;this is onSaveInstanceState saved bundle data&quot;);
    }
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        Log.i(&quot;target&quot;,&quot;Activity onRestoreInstanceState&quot;);
        Log.i(&quot;target&quot;,savedInstanceState.getString(&quot;target&quot;));
    }
</code></pre>
<p><code>日志信息</code></p>
<pre><code>com.example.root.activitylifecycle I/target: Activity onSaveInstanceState
com.example.root.activitylifecycle I/target: Activity onRestoreInstanceState
com.example.root.activitylifecycle I/target: this is onSaveInstanceState saved bundle data
</code></pre>
<h5 id="activity的launchmode">Activity的LaunchMode</h5>
<ul>
<li><code>standard模式</code>：这是默认模式，每次激活Activity时都会创建Activity实例，并放入任务栈中，使用场景（大多数Activity）</li>
<li><code>singleTop模式</code>：如果任务栈的栈顶正好存在该Activity的实例，就重用该实例（会调用实例的onNewIntent()），否则就会创建新的实例并放入栈顶，计时栈中已经存在该Activity的实例，只要不在栈顶，都会创建新的实例，使用场景（新闻类或者阅读类App的内容页面）</li>
<li><code>singleTask模式</code>：如果栈中已经有该Activity的实例，就重写该实例（会调用实例的onNewIntent()）。重用时，会让该实例回到栈顶，因此在他上面的实例将会被移出栈，如果栈中不存在该实例，将创建新的实例放入栈中，使用场景如浏览器的主界面，不管从多少个应用启动浏览器，只会启动主界面一次，其余都会走onNewIntent，并清空主界面上的其他页面</li>
<li><code>singleInstance模式</code>：在一个新栈中创建该Activity的实例，并让多个应用共享该栈中的该activity实例，一旦该模式的activity实例已经存在于某个栈中，任何英语再激活该activity时都会重用该栈中的实例，会调用（onNewIntent（）），其效果相当于多个应用共享一个应用，不管谁激活该activity都会进入同一个应用中，使用场景（闹铃提示，将闹钟提醒与闹钟设置分离），singleinstance不要勇于中间页面，如果用于中间页面，跳转会有问题（A-&gt;B-&gt;(singleinstance)-&gt;C）完全退出后再次启动首先打开的是B</li>
</ul>
<h5 id="activity的flags">Activity的Flags</h5>
<p><code>intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</code>;//指定Activity为&quot;singleTask&quot;启动模式<br>
<code>intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP)</code>;//指定Activity为&quot;singleTop&quot;启动模式<br>
<code>intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)</code>;//位于其上的Activity都要出栈，类似&quot;singleTask&quot;<br>
<code>intent.setFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)</code>;//不会出现在Activity的历史列表中，等同于<code>android:excludeFromRecents=&quot;true&quot;</code></p>
<h5 id="intentfilter的匹配规则">IntentFilter的匹配规则</h5>
<p>为了匹配过滤列表，需要同时匹配过滤列表中的action，category，data信息。一个Activity可以有多个intentFilter，一个Intent只要能匹配任何一组intentFilter即可成功启动对应Activity</p>
<h6 id="action的匹配规则">action的匹配规则</h6>
<p>action区分大小写，必须存在，只需匹配一个<br>
category的匹配规则可以没有，若是有，必须全部匹配（可以比过滤规则中少）<br>
示例：</p>
<pre><code>&lt;intent-filter&gt;
    &lt;action android:name=&quot;com.example.root.saveinstancelearn.secondactivity&quot;/&gt;
    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;
    &lt;category android:name=&quot;com.example.root.saveinstancelearn.secondactivity&quot;/&gt;
&lt;/intent-filter&gt;
</code></pre>
<pre><code>Intent intent=new Intent(&quot;com.example.root.saveinstancelearn.secondactivity&quot;);               
intent.addCategory(Intent.CATEGORY_DEFAULT);
startActivity(intent);
</code></pre>
<h5 id="data的匹配规则">data的匹配规则</h5>
<p>data与action类似(data语法如下)</p>
<pre><code>&lt;data android:scheme=&quot;string&quot;
    android:host=&quot;string&quot;
    android:port=&quot;string&quot;
    android:path=&quot;string&quot;
    android:pathPattern=&quot;string&quot;
    android:pathPrefix=&quot;string&quot;
    android:mimeType=&quot;string&quot; /&gt;
</code></pre>
<p>data有两部分组成，mimeType和URI。mimeType指定媒体类型，比如image/jpeg等<br>
匹配示例：</p>
<pre><code>&lt;intent-filter&gt;
    &lt;data android:mimeType=&quot;image/*&quot;/&gt;
&lt;intent-filter&gt;
</code></pre>
<p><code>intent.setDataAndType(Uri.parse(&quot;file://abc&quot;),&quot;image/png&quot;)</code>;</p>
<blockquote>
<p>ps:如果要为Intent指定完整的data，必须调用setDataAndType方法，不能先调用setData在调用setType，以为这两个方法会清除对方的值；</p>
</blockquote>
<p>实例</p>
<pre><code>&lt;intent-filter&gt;
    &lt;data android:mimeType=&quot;video/mpeg&quot; android:scheme=&quot;http&quot;/&gt;
    &lt;data android:mimeType=&quot;audio/mpeg&quot; android:scheme=&quot;http&quot;/&gt;
&lt;/intent-filter&gt;
</code></pre>
<p><code>intent.setDataAndType(Uri.parse(&quot;http://abc&quot;),&quot;video/mpeg&quot;)</code>;或者<br>
<code>intent.setDataAndType(Uri.parse(&quot;http://abc&quot;),&quot;audio/mpeg&quot;)</code>;</p>
<h4 id="service">Service</h4>
<p>创建一个Binder类继承自<code>android.os.Binder</code>里面有两个方法，分别用于设置通信内容和获取Myservice对象。</p>
<pre><code>  public class Binder extends android.os.Binder{
      public void setData(String data){
          MyService.this.data=data;
      }
      public MyService getService(){
          return MyService.this;
      }
  }
</code></pre>
<p>下面是自定义的Myservice对象继承自Service类，并覆写<code>onCreate</code> <code>onDestory</code> <code>onBind</code>方法。</p>
<pre><code>  public MyService() extends Service {
    @Override
    public void onCreate() {
        running=true;
        super.onCreate();
        new Thread(){
            @Override
            public void run() {
                super.run();
                int i=0;
                while (running){
                    i++;
                    String str=i+&quot;:&quot;+data;
                    System.out.println(str);
                    if(callback!=null){
                        callback.onDataChange(str);
                    }
                    try {
                        sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }.start();
    }
 }
  @Override
  public void onDestroy() {
      running=false;
      super.onDestroy();
  }
  @Override
  public IBinder onBind(Intent intent) {
      return new Binder();
  }
}
</code></pre>
<p>之后需要创建一个接口用于检测通信消息发生变化的回调接口。</p>
<pre><code>  public interface Callback{
      void onDataChange(String data);
  }
</code></pre>
<p>在主UI线程中添加一些按钮并绑定相应的点击事件用于启动和停止服务，以及更行Service数据。用来检测Service是否与UI线程实时通信。</p>
<pre><code>public class MainActivity extends AppCompatActivity implements View.OnClickListener, ServiceConnection {
  private Button bindService;
  private Button unBindService;
  private Button syncData;
  private EditText editText;
  private MyService.Binder binder;
  private TextView textView;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      initView();
  }

  private void initView() {
      bindService = (Button) findViewById(R.id.bindService);
      unBindService = (Button) findViewById(R.id.unBindService);
      syncData = (Button) findViewById(R.id.syncData);
      editText= (EditText) findViewById(R.id.editText);
      textView= (TextView) findViewById(R.id.tv_textout);
      bindService.setOnClickListener(this);
      unBindService.setOnClickListener(this);
      syncData.setOnClickListener(this);
  }

  @Override
  public void onClick(View view) {
      switch (view.getId()) {
          case R.id.bindService:
              bindService(new Intent(this, MyService.class), this, Context.BIND_AUTO_CREATE);
              break;
          case R.id.unBindService:
              unbindService(this);
              break;
          case R.id.syncData:
              if(binder!=null){
                  binder.setData(editText.getText().toString());
              }
              break;
      }
  }

  @Override
  public void onServiceConnected(ComponentName componentName, IBinder iBinder) {
      binder= (MyService.Binder) iBinder;
      binder.getService().setCallback(new MyService.Callback() {
          @Override
          public void onDataChange(String data) {
              Message msg=new Message();
              Bundle b=new Bundle();
              b.putString(&quot;data&quot;,data);
              msg.setData(b);
              handler.sendMessage(msg);
          }
      });
  }
  private Handler handler=new Handler(){
      @Override
      public void handleMessage(Message msg) {
          super.handleMessage(msg);
          textView.setText(msg.getData().getString(&quot;data&quot;));
      }
  };
  @Override
  public void onServiceDisconnected(ComponentName componentName) {
  }
}
</code></pre>
<h4 id="java-io流">Java IO流</h4>
<table>
<thead>
<tr>
<th>分类</th>
<th style="text-align:center">字节输入流</th>
<th style="text-align:center">字节输出流</th>
<th style="text-align:center">字符输入流</th>
<th style="text-align:center">字符输出流</th>
</tr>
</thead>
<tbody>
<tr>
<td>抽象基类</td>
<td style="text-align:center"><code>InputStream</code></td>
<td style="text-align:center"><code>OutputStream</code></td>
<td style="text-align:center"><code>Reader</code></td>
<td style="text-align:center"><code>Writer</code></td>
</tr>
<tr>
<td>访问文件</td>
<td style="text-align:center">FileInputStream</td>
<td style="text-align:center">FileOutputStream</td>
<td style="text-align:center">FileReader</td>
<td style="text-align:center">FileWriter</td>
</tr>
<tr>
<td>访问数组</td>
<td style="text-align:center">ByteArrayInputStream</td>
<td style="text-align:center">BiteArrayOutputStream</td>
<td style="text-align:center">CharArrayReader</td>
<td style="text-align:center">CharArrayWriter</td>
</tr>
<tr>
<td>访问管道</td>
<td style="text-align:center">PipedInputStream</td>
<td style="text-align:center">PipedOutputStream</td>
<td style="text-align:center">PipedReader</td>
<td style="text-align:center">PipedWriter</td>
</tr>
<tr>
<td>访问字符串</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">StringReader</td>
<td style="text-align:center">StringWriter</td>
</tr>
<tr>
<td>缓冲流</td>
<td style="text-align:center">BufferedInputStream</td>
<td style="text-align:center">BufferedOutputStream</td>
<td style="text-align:center">BufferedReader</td>
<td style="text-align:center">BufferedWriter</td>
</tr>
<tr>
<td>转换流</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">InputStreamReader</td>
<td style="text-align:center">OutputStreamWriter</td>
</tr>
<tr>
<td>对象流</td>
<td style="text-align:center">ObjectInputStream</td>
<td style="text-align:center">ObjectOutputStream</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>抽象基类</td>
<td style="text-align:center"><code>FilterInputStream</code></td>
<td style="text-align:center"><code>FilterOutputStream</code></td>
<td style="text-align:center"><code>FilterReader</code></td>
<td style="text-align:center"><code>FilterWriter</code></td>
</tr>
<tr>
<td>打印流</td>
<td style="text-align:center"></td>
<td style="text-align:center">PrintStream</td>
<td style="text-align:center"></td>
<td style="text-align:center">PrintWriter</td>
</tr>
<tr>
<td>推回输入流</td>
<td style="text-align:center">PushbackInputStream</td>
<td style="text-align:center"></td>
<td style="text-align:center">PushbackReader</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td>特殊流</td>
<td style="text-align:center">DataInputStream</td>
<td style="text-align:center">DataOutputStream</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>其中基类都是抽象类，不同的子类对应不同的用途<br>
首先我们看一下字节流与字符流的不同之处</p>
<blockquote>
<p>字节流是由字节组成的,<a href="http://baike.baidu.com/item/%E5%AD%97%E7%AC%A6">字符</a>流是由字符组成的. Java里字符由两个字节组成.字节流是最基本的，所有的InputStream和OutputStream的子类都是，主要用在处理二进制数据，它是按字节来处理的但实际中很多的数据是文本，又提出了字符流的概念，它是按<a href="http://baike.baidu.com/item/%E8%99%9A%E6%8B%9F%E6%9C%BA">虚拟机</a>的encode来处理，也就是要进行<a href="http://baike.baidu.com/item/%E5%AD%97%E7%AC%A6%E9%9B%86">字符集</a>的转化。</p>
</blockquote>
<p>通俗的来讲，字节流就是二进制流，通常的图片，视频，音频文件都可以通过字节流来读写，字符流就是字符串，中文字符，等unicode字符编码后的字符集。字节流可以通过转换流（即<code>InputStreamReader</code>，<code>InputStreamWriter</code>）转换为字符流（转化的过程就是编码的过程），缓冲流是为了提高读写效率提供的类，可以开辟出一个缓冲区用于高速存取数据流（分别对应字节流和字符流）。</p>
<h4 id="字节流读写文件的实例">字节流读写文件的实例</h4>
<pre><code>public class FileCopy {
	public void fileCopy(String sourceFile,String targetFile) throws IOException{
		FileInputStream in=new FileInputStream(sourceFile);
		FileOutputStream out=new FileOutputStream(targetFile);
		byte[] buffer=new byte[2048];//创建2048个字节大小的缓冲区（可根据拷贝文件大小自行定义）
		int value;
		while((value=in.read(buffer))!=-1){//循环读写
			out.write(buffer, 0, value);
		}
                if(in!=null)in.close();//关闭i/o流
                if(out!=null)out.close();
	}
	public static void main(String[] args) throws IOException {
		String in=&quot;readFile.txt&quot;;
		String out=&quot;outFile.txt&quot;;
		FileCopy f=new FileCopy();
		f.fileCopy(in, out);
	}
}
</code></pre>
<h5 id="字节流转字符流实例">字节流转字符流实例</h5>
<p>文件拷贝不推荐用这种方法，此方法仅作为字节流转字符流的实例，因为在文件copy中字节流转化为字符流读写的意义不大，而且会降低运行效率</p>
<pre><code>public class FileCopy {
	public void fileCopy(String sourceFile,String targetFile) throws IOException{
		FileInputStream in=new FileInputStream(sourceFile);
		FileOutputStream out=new FileOutputStream(targetFile);
		BufferedReader reader=new BufferedReader(new InputStreamReader(in));
		BufferedWriter writer=new BufferedWriter(new OutputStreamWriter(out));
		String line=&quot;&quot;;
		StringBuffer result=new StringBuffer();
		while((line=reader.readLine())!=null){
			writer.write(line);//此处的write是将数据写入缓冲区，并没有写入文件
			writer.flush();//将缓冲区数据写入文件
		}
		if(writer!=null)writer.close();
		if(reader!=null)reader.close();
	}
	public static void main(String[] args) throws IOException {
		String in=&quot;readFile.txt&quot;;
		String out=&quot;outFile.txt&quot;;
		FileCopy f=new FileCopy();
		f.fileCopy(in, out);
		System.out.println(&quot;hell java&quot;);
	}
}
</code></pre>
<p>关键在于这两行</p>
<pre><code>BufferedReader reader=new BufferedReader(new InputStreamReader(in));
BufferedWriter writer=new BufferedWriter(new OutputStreamWriter(out));
</code></pre>
<p>将FileInputStream作为参数传入InputStreamReader中然后作为参数传给BufferedReader,其中InputStreamReader作为Reader的子类传入</p>
<h4 id="android持久化存储">Android持久化存储</h4>
<h5 id="文件写入">文件写入</h5>
<pre><code>    public void save(String inputText){
        FileOutputStream out=null;
        BufferedWriter writer=null;
        try {
            out=openFileOutput(&quot;data&quot;, Context.MODE_PRIVATE);
            writer=new BufferedWriter(new OutputStreamWriter(out));
            writer.write(inputText);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }finally {
            if(writer!=null){
                try {
                    writer.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
</code></pre>
<h5 id="读取文件">读取文件</h5>
<pre><code>    public String load(){
        FileInputStream in =null;
        BufferedReader reader=null;
        StringBuilder content=new StringBuilder();
        try {
            in=openFileInput(&quot;data&quot;);
            reader=new BufferedReader(new InputStreamReader(in));
            String line=&quot;&quot;;
            while ((line=reader.readLine())!=null){
                content.append(line);
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }finally {
            if(reader!=null){
                try {
                    reader.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        return content.toString();
    }
</code></pre>
<h4 id="sharepreferences方法">SharePreferences方法</h4>
<p><code>SharePreference</code>文件默认放在<code>/data/data/&lt;packagename&gt;/shared_prefs/目录下</code></p>
<h5 id="sharedpreferences写入">SharedPreferences写入</h5>
<pre><code>SharedPreferences.Editor editor=getSharedPreferences(&quot;data&quot;,MODE_PRIVATE).edit();
editor.putString(&quot;et_inputText&quot;,&quot;sharePreferences test&quot;);
editor.commit();
</code></pre>
<h5 id="sharedpreferences读取">SharedPreferences读取</h5>
<pre><code>SharedPreferences sp=getSharedPreferences(&quot;data&quot;,MODE_PRIVATE);
String input=sp.getString(&quot;et_inputText&quot;,&quot;请输入用户名&quot;);//第二个参数是为空的默认信息
</code></pre>
<h4 id="sqlite数据库存储">SQLite数据库存储</h4>
<p><code>SQLite</code>文件默认放在<code>/data/data/&lt;packagename&gt;/databases/目录下</code></p>
<pre><code>public class MyDataBaseHelper extends SQLiteOpenHelper{
    private static final String CREATE_BOOK=&quot;create table Book(&quot;
            +&quot;id integer primary key autoincrement, &quot;
            +&quot;author text, &quot;
            +&quot;price real, &quot;
            +&quot;pages integer, &quot;
            +&quot;name text)&quot;;
    private static final String CREATE_CATEGORY=&quot;create table Category(&quot;
            +&quot;id integer primary key autoincrement, &quot;
            +&quot;category_name text, &quot;
            +&quot;category_code integer)&quot;;
    private Context mContext;
    public MyDataBaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
        mContext=context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_BOOK);
        db.execSQL(CREATE_CATEGORY);
        Toast.makeText(mContext,&quot;create succeed&quot;,Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(&quot;drop table if exists Book&quot;);
        db.execSQL(&quot;drop table if exists Category&quot;);
        onCreate(db);
    }
</code></pre>
<p>创建数据库</p>
<pre><code> dbHelper=new MyDataBaseHelper(this,&quot;BookStore.db&quot;,null,2);
</code></pre>
<p>插入数据</p>
<pre><code>SQLiteDatabase db=dbHelper.getWritableDatabase();
ContentValues values=new ContentValues();
values.put(&quot;name&quot;,&quot;Effective Java&quot;);
values.put(&quot;author&quot;,&quot;Joshua Bloch&quot;);
values.put(&quot;pages&quot;,454);
values.put(&quot;price&quot;,16.96);
db.insert(&quot;Book&quot;,null,values);
</code></pre>
<p>更新数据</p>
<pre><code>ContentValues values=new ContentValues();
values.put(&quot;price&quot;,198.00);
SQLiteDatabase db=dbHelper.getReadableDatabase();
db.update(&quot;Book&quot;,values,&quot;name=?&quot;,new String[]{&quot;Android Programme&quot;});
</code></pre>
<p>删除行</p>
<pre><code>SQLiteDatabase db = dbHelper.getWritableDatabase();
db.delete(&quot;Book&quot;, &quot;pages &gt; ?&quot;, new String[] { &quot;500&quot; });
</code></pre>
<p><code>ContentValues</code>知识android提供的一个便于数据库操作的类，为数据库操作提供便利，也可以直接使用数据库语句进行操作</p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://sunxiaohang.github.io/post/spring/">
              <h3 class="post-title">
                下一篇：Spring
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">KnowledgeBase</div>
  <div class="social-container">
    
      
        <a href="https://github.com/sunxiaohang" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="mailto:cssunhang@outlook.com" target="_blank">hangsun</a> | <a class="rss" href="https://sunxiaohang.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
