<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://sunxiaohang.github.io</id>
    <title>KnowledgeBase</title>
    <updated>2020-04-14T07:00:33.807Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://sunxiaohang.github.io"/>
    <link rel="self" href="https://sunxiaohang.github.io/atom.xml"/>
    <subtitle>KnowledgeBase</subtitle>
    <logo>https://sunxiaohang.github.io/images/avatar.png</logo>
    <icon>https://sunxiaohang.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, KnowledgeBase</rights>
    <entry>
        <title type="html"><![CDATA[Shader]]></title>
        <id>https://sunxiaohang.github.io/post/shader/</id>
        <link href="https://sunxiaohang.github.io/post/shader/">
        </link>
        <updated>2020-04-14T06:15:44.000Z</updated>
        <content type="html"><![CDATA[<p>Unity shaderçš„æ¸²æŸ“æµç¨‹ï¼Œæ¨¡å‹ç©ºé—´ï¼Œä¸–ç•Œç©ºé—´ï¼Œè£åˆ‡ç©ºé—´ï¼Œå±å¹•ç©ºé—´çš„è½¬æ¢ï¼Œé¡¶ç‚¹ç€è‰²å™¨ï¼Œç‰‡å…ƒç€è‰²å™¨çš„ä¸€èˆ¬åŸç†ï¼ŒåŸºç¡€å…‰ç…§æ¨¡å‹åˆ†æã€‚é€æ˜ï¼Œå…‰çº¿è¿½è¸ªç­‰é«˜ç‰¹æ€§å…‰ç…§æ¨¡å‹åŸç†ã€‚ä¸»è¦ä¾§é‡äºç§»åŠ¨ç«¯çš„è½»é‡çº§æ¸²æŸ“ç®¡çº¿ï¼Œä¸è€ƒè™‘ä¸»æœºæˆ–PCè®¾å¤‡ã€‚</p>
<p>tips:æ¸²æŸ“æµæ°´çº¿çš„æœ€ç»ˆç›®çš„æ˜¯æ¸²æŸ“ä¸€å¼ äºŒç»´çº¹ç†</p>
<p>è¾“å…¥ï¼š1.è™šæ‹Ÿç›¸æœº 2.å…‰æº 3.ä¸€äº›shaderåŠçº¹ç†</p>
<figure data-type="image" tabindex="1"><img src="https://sunxiaohang.github.io/post-images/1586845473202.png" alt="" loading="lazy"></figure>
<h5 id="åº”ç”¨é˜¶æ®µ">åº”ç”¨é˜¶æ®µ</h5>
<p><em>åº”ç”¨ä¸»å¯¼</em>,é€šå¸¸ç”±CPUè´Ÿè´£å®ç°ï¼ˆå¼€å‘è€…å…·æœ‰ç»å¯¹æ§åˆ¶æƒï¼‰</p>
<ul>
<li>å‡†å¤‡åœºæ™¯æ•°æ®</li>
<li>ä¼˜åŒ–(ç²—ç²’åº¦å‰”é™¤(culling)å·¥ä½œ,å‰”é™¤ä¸å¯è§ç‰©ä½“)</li>
<li>è®¾ç½®å¥½æ¯ä¸ªæ¨¡å‹çš„æ¸²æŸ“çŠ¶æ€(æè´¨ï¼Œçº¹ç†ï¼Œä½¿ç”¨çš„shaderç­‰)</li>
<li>è¾“å‡ºæ˜¯æ¸²æŸ“æ‰€éœ€çš„å‡ ä½•ä¿¡æ¯ï¼Œå³<strong>æ¸²æŸ“å›¾å…ƒ</strong>(rendering primitives)</li>
</ul>
<h5 id="å‡ ä½•é˜¶æ®µ">å‡ ä½•é˜¶æ®µ</h5>
<p><em>å‡ ä½•é˜¶æ®µ</em>ç”¨äºå¤„ç†æ‰€æœ‰è¦ç»˜åˆ¶çš„å‡ ä½•ç›¸å…³ï¼ˆå›¾å…ƒæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆç»˜åˆ¶ï¼Œåœ¨å“ªç»˜åˆ¶ï¼‰</p>
<p>è´Ÿè´£å’Œæ¯ä¸ªæ¸²æŸ“å›¾å…ƒäº¤äº’ï¼Œè¿›è¡Œé€é¡¶ç‚¹ã€é€å¤šè¾¹å½¢çš„æ“ä½œã€‚è¿™ä¸€é˜¶æ®µä¼šå°†è¾“å‡ºå±å¹•ç©ºé—´çš„äºŒä½é¡¶ç‚¹åæ ‡ï¼Œæ¯ä¸ªå®šç‚¹å¯¹åº”çš„æ·±åº¦å€¼ï¼Œç€è‰²ç­‰ç›¸å…³ä¿¡æ¯ï¼Œå¹¶ä¼ é€’ç»™ä¸‹ä¸€é˜¶æ®µ</p>
<h5 id="å…‰æ …åŒ–é˜¶æ®µ">å…‰æ …åŒ–é˜¶æ®µ</h5>
<p>ä½¿ç”¨ä¸Šä¸ªé˜¶æ®µäº§ç”Ÿçš„æ•°æ®äº§ç”Ÿå±å¹•ä¸Šçš„åƒç´ ï¼Œå¹¶æ¸²æŸ“å‡ºæœ€ç»ˆçš„å›¾åƒï¼Œè¿™ä¸€é˜¶æ®µå®åœ¨GPUä¸Šæ‰§è¡Œï¼ˆå†³å®šæ¯ä¸ªæ¸²æŸ“å›¾å…ƒä¸Šçš„å“ªäº›å…ƒç´ è¢«ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼‰</p>
<h5 id="cpuå’Œgpuä¹‹é—´çš„é€šä¿¡">CPUå’ŒGPUä¹‹é—´çš„é€šä¿¡</h5>
<p>åº”ç”¨é˜¶æ®µ</p>
<ul>
<li>æŠŠæ•°æ®åŠ è½½åˆ°æ˜¾å­˜ï¼ˆVideoRAMï¼‰[RAM=&gt;VRAM]{GPUæ— æ³•ç›´æ¥è®¿é—®RAM}</li>
<li>è®¾ç½®æ¸²æŸ“çŠ¶æ€ï¼ˆåœºæ™¯ä¸­çš„ç½‘æ ¼æ€ä¹ˆè¢«æ¸²æŸ“[ä½¿ç”¨å“ªä¸ªé¡¶ç‚¹ç€è‰²å™¨(Vertex Shader)/ç‰‡å…ƒç€è‰²å™¨(Fragment Shader),å…‰æºå±æ€§ï¼Œæè´¨ç­‰]ï¼‰</li>
<li>è°ƒç”¨Draw Callï¼ˆCPU=&gt;GPUï¼‰æŒ‡ä»¤ä»…ä»…ä¼šæŒ‡å‘ä¸€ä¸ªéœ€è¦è¢«æ¸²æŸ“çš„å›¾å…ƒ(primitives)åˆ—è¡¨ï¼ˆæè´¨ä¿¡æ¯å·²åœ¨ä¸Šä¸€é˜¶æ®µå¤„ç†å®Œæˆï¼‰</li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://sunxiaohang.github.io/post-images/1586845497549.png" alt="" loading="lazy"></figure>
<p><strong>é¡¶ç‚¹ç€è‰²å™¨(Vertex Shader):</strong> <em>-å®Œå…¨å¯ç¼–ç¨‹-</em>ï¼Œé€šå¸¸ç”¨äºå®ç°å®šç‚¹çš„ç©ºé—´å˜æ¢ã€é¡¶ç‚¹ç€è‰²ç­‰</p>
<blockquote>
<p>é¡¶ç‚¹ç€è‰²å™¨è¾“å…¥æ¥è‡ªCPUï¼Œå¤„ç†å•ä½æ˜¯é¡¶ç‚¹ï¼ˆè¾“å…¥è¿›æ¥çš„æ¯ä¸ªé¡¶ç‚¹éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡é¡¶ç‚¹ç€è‰²å™¨ï¼‰ã€é¡¶ç‚¹ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„å¯å¹¶è¡Œã€‘</p>
<ul>
<li>åæ ‡å˜æ¢ï¼šæŠŠé¡¶ç‚¹åæ ‡ä»æ¨¡å‹ç©ºé—´è½¬æ¢åˆ°é½æ¬¡è£å‰ªç©ºé—´</li>
<li>è®¡ç®—å’Œè¾“å‡ºé¡¶ç‚¹é¢œè‰²ï¼šé€é¡¶ç‚¹å…‰ç…§</li>
</ul>
</blockquote>
<p>**æ›²é¢ç»†åˆ†ç€è‰²å™¨(Tessellation Shader)ğŸ˜—*ç”¨äºç»†åˆ†å›¾å…ƒ</p>
<p>**å‡ ä½•ç€è‰²å™¨(Geometry Shader)ğŸ˜—*å¯ä»¥è¢«ç”¨äºæ‰§è¡Œé€å›¾å…ƒ(Per-Primitive)çš„ç€è‰²æ“ä½œï¼Œæˆ–è¢«ç”¨äºäº§ç”Ÿæ›´å¤šçš„å›¾å…ƒ</p>
<p>**è£å‰ª(Clipping)ğŸ˜—*è£å‰ªæ‰ä¸åœ¨æ‘„åƒæœºè§†é‡å†…çš„é¡¶ç‚¹ï¼Œå¹¶å‰”é™¤æ‰æŸäº›ä¸‰è§’å›¾å…ƒçš„é¢ç‰‡ï¼ˆå½’ä¸€åŒ–çš„è®¾å¤‡åæ ‡[Normalized Device Coordinates]ï¼‰</p>
<p>ä¸€ä¸ªå›¾å…ƒå’Œæ‘„åƒæœºè§†é‡çš„ä¸‰ç§å…³ç³»ï¼š**1.**å®Œå…¨åœ¨è§†é‡å†…ï¼ˆç»§ç»­ä¼ é€’ç»™ä¸‹ä¸€é˜¶æ®µï¼‰ **2.**éƒ¨åˆ†åœ¨è§†é‡å†…ï¼ˆ<strong>è£å‰ª</strong>ï¼‰ **3.**å®Œå…¨åœ¨è§†é‡å¤–ï¼ˆä¸ä¼ é€’ï¼‰</p>
<p>*--ä¾‹å¦‚--ï¼š*ä¸€æ¡çº¿æ®µçš„ä¸€ä¸ªé¡¶ç‚¹åœ¨è§†é‡å†…ï¼Œå¦ä¸€ä¸ªå®šç‚¹åœ¨è§†é‡å¤–ï¼Œé‚£ä¹ˆåœ¨äº‹ä¸šå¤–éƒ¨çš„é¡¶ç‚¹åº”è¯¥å¸¦ä½¿ç”¨ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ä»£æ›¿ï¼ˆä½äºçº¿æ®µä¸è§†é‡è¾¹ç•Œçš„äº¤ç‚¹å¤„ï¼‰</p>
<p>**å±å¹•æ˜ å°„:**æŠŠæ¯ä¸ªå›¾å…ƒçš„xå’Œyåæ ‡è½¬æ¢åˆ°å±å¹•åæ ‡ç³»</p>
<ul>
<li>OpenGLï¼šé›¶ç‚¹åœ¨å·¦ä¸‹è§’</li>
<li>DirectXï¼šé›¶ç‚¹åœ¨å·¦ä¸Šè§’</li>
</ul>
<p>**ä¸‰è§’å½¢è®¾ç½®ï¼š**ä¼šè®¡ç®—å…‰æ …åŒ–ä¸€ä¸ªä¸‰è§’å½¢ç½‘æ ¼æ‰€éœ€çš„ä¿¡æ¯ï¼ˆä¸ºäº†èƒ½å¤Ÿè®¡ç®—è¾¹ç•Œåƒç´ çš„åæ ‡ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°ä¸‰è§’å½¢è¾¹ç•Œçš„è¡¨ç¤ºæ–¹å¼ï¼‰</p>
<p><em><em>ä¸‰è§’å½¢éå†ï¼š<em><em>æ£€æŸ¥æ¯ä¸ªåƒç´ æ˜¯å¦è¢«ä¸€ä¸ªä¸‰è§’ç½‘æ ¼è¦†ç›–ï¼Œå¦‚æœè¦†ç›–å°±ç”Ÿæˆä¸€ä¸ª</em>--ç‰‡å…ƒ(fragment)--*ä¹Ÿè¢«ç§°ä¸º</em></em>æ‰«æå˜æ¢</em>*</p>
<p>**ç‰‡å…ƒç€è‰²å™¨(Fragment Shader)ğŸ˜—*å®ç°é€ç‰‡å…ƒçš„ç€è‰²æ“ä½œ</p>
<p>æ ¹æ®ä»é¡¶ç‚¹ç€è‰²å™¨è¾“å‡ºçš„æ•°æ®æ’å€¼å¾—åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé¢œè‰²å€¼</p>
<p>**é€ç‰‡å…ƒæ“ä½œ(Per-Fragment Operations)ğŸ˜—*è´Ÿè´£å¾ˆå¤šé‡è¦æ“ä½œï¼Œä¾‹å¦‚ä¿®æ”¹é¢œè‰²ï¼Œæ·±åº¦ç¼“å†²ï¼Œæ··åˆç­‰ï¼ˆé€ç‰‡å…ƒåˆå¹¶ï¼‰</p>
<ul>
<li>å†³å®šæ¯ä¸ªç‰‡å…ƒçš„å¯è§æ€§ï¼Œæ¶‰åŠå¾ˆå¤šæµ‹è¯•å·¥ä½œï¼Œå¦‚æ·±åº¦æµ‹è¯•ï¼Œæ¨¡æ¿æµ‹è¯•ç­‰</li>
<li>å¦‚æœä¸€ä¸ªç‰‡å…ƒ<strong>é€šè¿‡äº†æ‰€æœ‰æµ‹è¯•</strong>ï¼Œä»…éœ€è¦æŠŠè¿™ä¸ªç‰‡å…ƒçš„é¢œè‰²å€¼å’Œå·²ç»å­˜å‚¨çš„é¢œè‰²ç¼“å†²åŒºä¸­çš„é¢œè‰²è¿›è¡Œåˆå¹¶ï¼ˆæ··è‰²ï¼‰</li>
</ul>
<h5 id="qa">Q&amp;A</h5>
<p><strong>é—®é¢˜1:CPUå’ŒGPUæ˜¯æ€æ ·å®ç°å¹¶è¡Œå·¥ä½œçš„</strong></p>
<p>*--å‘½ä»¤ç¼“å†²åŒº(Command Buffer)--ï¼š*åŒ…å«ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ï¼ŒCPUæ·»åŠ å‘½ä»¤ï¼ŒGPUè¯»å–å‘½ä»¤</p>
<p><strong>é—®é¢˜2:ä¸ºä»€ä¹ˆDrawCallå¤šäº†ä¼šå½±å“å¸§ç‡</strong></p>
<p><em>--æ¯ä¸€ä¸ªDrawCalléƒ½éœ€è¦å¾ˆå¤šé¢å¤–çš„æ“ä½œ--</em></p>
<p><strong>é—®é¢˜3:å¦‚ä½•å‡å°‘DrawCall</strong></p>
<p>*--æ‰¹å¤„ç†(Batching)--ï¼š*æŠŠå¤§é‡å°çš„DrawCallåˆå¹¶ä¸ºå¤§çš„DrawCall</p>
<ul>
<li>é¿å…ä½¿ç”¨å¤§é‡å¾ˆå°çš„ç½‘æ ¼ï¼ˆä¸å¯é¿å…æ—¶è€ƒè™‘åˆå¹¶ï¼‰</li>
<li>é¿å…ä½¿ç”¨è¿‡å¤šæè´¨ï¼ˆå°½é‡åœ¨ä¸åŒç½‘æ ¼ä¹‹é—´å…¬ç”¨åŒä¸€ä¸ªæè´¨ï¼‰</li>
</ul>
<h5 id="å›ºå®šç®¡çº¿æ¸²æŸ“">å›ºå®šç®¡çº¿æ¸²æŸ“</h5>
<p>**å›ºå®šå‡½æ•°çš„æµæ°´çº¿ï¼ˆFixed-Function Pipelineï¼‰ğŸ˜—*æä¾›ä¸€ç³»åˆ—é…ç½®æ¥å£ï¼Œå¼€å‘è€…æ²¡æœ‰å¯¹æµæ°´çº¿çš„å®Œå…¨æ§åˆ¶æƒ</p>
<h5 id="unity-shaderunity-shadermaterial">Unity Shader(Unity Shader&amp;Material)</h5>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæè´¨</li>
<li>åˆ›å»ºä¸€ä¸ªUnity Shaderï¼Œå¹¶æŠŠå®ƒèµ‹ç»™ä¸Šä¸€æ­¥åˆ›å»ºçš„æè´¨</li>
<li>æŠŠæè´¨èµ‹ç»™éœ€è¦æ¸²æŸ“çš„å¯¹è±¡</li>
<li>åœ¨æè´¨é¢ç›˜è°ƒæ•´Unity Shaderå±æ€§å¾—åˆ°å…ç–«çš„æ•ˆæœ</li>
</ul>
<p>**Materialï¼š**æè´¨éœ€è¦ç»“åˆä¸€ä¸ªGameObjectçš„Meshæˆ–è€…Particle Systemç»„ä»¶å·¥ä½œï¼Œå®ƒå†³å®šæ¸¸æˆå¯¹è±¡çš„æ ·å­</p>
<figure data-type="image" tabindex="3"><img src="https://sunxiaohang.github.io/post-images/1586845518401.png" alt="" loading="lazy"></figure>
<pre><code class="language-c#">Shader &quot;shaderè·¯å¾„/Shaderå&quot;
{
    Properties
    {
		//å±æ€§
        Name(&quot;display name&quot;,PropertyType)=DefaultValue;
        //PropertyType====Int,Float,Range(min,max),Color,Vector,2D,Cube,3D
        //å®ä¾‹
        _Color (&quot;Color&quot;, Color) = (1,1,1,1)
        _MainTex (&quot;Albedo (RGB)&quot;, 2D) = &quot;white&quot; {}
        _Glossiness (&quot;Smoothness&quot;, Range(0,1)) = 0.5
        _Metallic (&quot;Metallic&quot;, Range(0,1)) = 0.0
    }
    SubShader
    {
        //-------------æ˜¾å¡Aä½¿ç”¨çš„å­ç€è‰²å™¨
        //çœŸæ­£æ„ä¹‰ä¸Šçš„shaderä»£ç 
        //Surface Shader/ Vertex Shader / Fragment Shader / Fixed Function Shader
        //è¡¨é¢ç€è‰²å™¨/é¡¶ç‚¹ç€è‰²å™¨/ç‰‡å…ƒç€è‰²å™¨/å›ºå®šå‡½æ•°ç€è‰²å™¨
        //æ ‡ç­¾è®¾ç½® [Tags]
        Tags { &quot;RenderType&quot;=&quot;Opaque&quot; }
        //çŠ¶æ€[RenderSetup]
        
        //Pass æ¯ä¸ªPasså®šä¹‰äº†ä¸€æ¬¡å®Œæ•´çš„æ¸²æŸ“æµç¨‹(Passè¿‡å¤šä¼šé€ æˆæ¸²æŸ“æ€§èƒ½çš„ä¸‹é™)
        Pass{}
    }
    FallBack &quot;Diffuse&quot;
}
</code></pre>
<p><strong>çŠ¶æ€è®¾ç½®</strong></p>
<p><em>--å®šä¹‰åœ¨SubShaderä¸­ä¼šåº”ç”¨åˆ°æ‰€æœ‰Passï¼Œå®šä¹‰åœ¨å•ç‹¬Passä¸­ä»…ä½œç”¨ä¸å•ä¸ªPass--</em></p>
<ul>
<li><strong>-Cull-:</strong> -Cull Back- | -Front- | -Off- è®¾ç½®å‰”é™¤æ¨¡å¼ï¼šå‰”é™¤èƒŒé¢/æ­£é¢/å…³é—­å‰”é™¤</li>
<li><strong>-ZTest-:</strong> ZTest Less Greater | LEqual | Equal | NotEqual | Always è®¾ç½®æ·±åº¦æµ‹è¯•æ—¶ä½¿ç”¨çš„å‡½æ•°</li>
<li><strong>-ZWrite-:</strong> ZWrite On | Off å¼€å¯/å…³é—­æ·±åº¦å†™å…¥</li>
<li><strong>-Blend-:</strong> Blend SrcFactor DstFactorå¼€å¯å¹¶è®¾ç½®æ··åˆæ¨¡å¼</li>
</ul>
<p><strong>SubShaderçš„æ ‡ç­¾</strong></p>
<pre><code class="language-c#">Tags{&quot;TageName&quot;=&quot;Value&quot; &quot;TagName&quot;=&quot;Value&quot;}
//Queue:æ§åˆ¶æ¸²æŸ“é¡ºåºï¼ŒæŒ‡å®šè¯¥ç‰©ä½“å±äºå“ªä¸€ä¸ªæ¸²æŸ“é˜Ÿåˆ—ï¼Œè¿™ç§å‡¡æ˜¯å¯ä»¥ä¿è¯æ‰€æœ‰çš„é€æ˜ç‰©ä½“å¯ä»¥åœ¨æ‰€æœ‰ä¸é€æ˜ç‰©ä½“åè¢«æ¸²æŸ“
Tags{&quot;Queue&quot;=&quot;Transparent&quot;}
//RenderType:å¯¹ç€è‰²å™¨è¿›è¡Œåˆ†ç±»ï¼Œä¾‹å¦‚é€æ˜ç€è‰²å™¨å’Œä¸é€æ˜ç€è‰²å™¨
Tags{&quot;RenderType&quot;=&quot;Opaque&quot;}
//DisableBatching:ä¸€äº›SubShaderåœ¨ä½¿ç”¨Unityçš„æ‰¹å¤„ç†åŠŸèƒ½æ—¶ä¼šå‡ºç°é—®é¢˜
Tags{&quot;DsiableBatching&quot;=&quot;True&quot;}
//ForceNoShadowCasting:æ§åˆ¶ä½¿ç”¨è¯¥SubShaderçš„ç‰©ä½“æ˜¯å¦ä¼šæŠ•å°„é˜´å½±
Tags{&quot;ForceNoShadowCasting&quot;=&quot;True&quot;}
//IgnoreProjector:å¦‚æœè¯¥æ ‡ç­¾ä¸ºTrueï¼Œé‚£ä¹ˆä½¿ç”¨è¯¥SubShaderçš„ç‰©ä½“å°†ä¸ä¼šå—Projectorçš„å½±å“ï¼Œé€šå¸¸ç”¨äºåŠé€æ˜ç‰©ä½“
Tags{&quot;IgnoreProjector&quot;=&quot;True&quot;}
//CanUseSpriteAtlas:å½“è¯¥æ ‡ç­¾é€‚ç”¨äºç²¾çµ(sprites)æ—¶ï¼Œå°†è¯¥æ ‡ç­¾è®¾ç½®ä¸ºfalse
Tags{&quot;CanUseSpriteAtlas&quot;=&quot;False&quot;}
//PreviewType:çŸ¥åæè´¨é¢æ¿å°†å¦‚ä½•é¢„è§ˆè¯¥æè´¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæè´¨æ˜¾ç¤ºä¸ºä¸€ä¸ªsphereï¼Œå¯è®¾ç½®ä¸ºPlaneï¼ŒSkyBox
Tags{&quot;PreviewType&quot;=&quot;Plane&quot;}
</code></pre>
<ul>
<li>**Queue:**æ§åˆ¶æ¸²æŸ“é¡ºåºï¼ŒæŒ‡å®šè¯¥ç‰©ä½“å±äºå“ªä¸€ä¸ªæ¸²æŸ“é˜Ÿåˆ—ï¼Œè¿™ç§å‡¡æ˜¯å¯ä»¥ä¿è¯æ‰€æœ‰çš„é€æ˜ç‰©ä½“å¯ä»¥åœ¨æ‰€æœ‰ä¸é€æ˜ç‰©ä½“åè¢«æ¸²æŸ“=ã€‹Tags{&quot;Q&quot;}</li>
</ul>
<p><strong>Passè¯­ä¹‰å—</strong></p>
<pre><code class="language-c#">//Passçš„ä½¿ç”¨
UsePass &quot;MyShader/PASSNAME&quot;//Passçš„åå­—ä¼šè¢«è½¬æ¢ä¸ºå…¨éƒ¨å¤§å†™
...
Pass{
	//[Name]
    Name &quot;PassName&quot;
    //å¯ä»¥åœ¨Passé‡Œé¢é€šè¿‡UsePasså¤ç”¨å…¶ä»–Pass
    UsePass &quot;PassPath/PASSNAME&quot;
    //GrabPass:è¯¥Passè´Ÿè´£æŠ“å–å±å¹•å¹¶å°†ç»“æœå­˜å‚¨åœ¨ä¸€å¼ çº¹ç†ä¸­ï¼Œç”¨äºåç»­çš„Passå¤„ç†
    //[Tags]=&gt;Tags{&quot;tagName&quot;=&quot;tagValue&quot;}
    Tags{&quot;LightMode&quot;=&quot;ForwardBase&quot;}
    Tags{&quot;RequireOptions&quot;=&quot;SoftVegetation&quot;}
    //[RenderSetup]
}
</code></pre>
<h5 id="surface-shaderè¡¨é¢ç€è‰²å™¨æ— pass">Surface Shaderè¡¨é¢ç€è‰²å™¨ï¼ˆæ— Passï¼‰</h5>
<pre><code class="language-C#">Shader &quot;Custom/CustomTestShader&quot;
{
    Properties{}
    SubShader
    {
        Tags { &quot;RenderType&quot;=&quot;Opaque&quot; }
        CGPROGRAM
        //è¡¨é¢ç€è‰²å™¨çš„ç‰¹å®šè¯­æ³•æ”¾åœ¨CGPROGRAMå’ŒENDCGä¹‹é—´
        //CG/HLSLç¼–å†™
        ENDCG
    }
    FallBack &quot;Diffuse&quot;
}
</code></pre>
<h5 id="vertex-fragment-shaderé¡¶ç‚¹ç‰‡å…ƒç€è‰²å™¨passå†…">Vertex / Fragment Shaderé¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ï¼ˆPasså†…ï¼‰</h5>
<pre><code class="language-c#">Shader &quot;Custom/CustomVertexShader&quot;
{
    SubShader
    {
		Pass
		{
			CGPROGRAM
			float4 vert(float4 v:POSITION):SV_POSITION
			{return UnityObjectToClipPos(V);}
			float4 frag() : SV_Target
			{return fixed4(1.0,0.0,0.0,1.0);}
			ENDCG
		}
    }
    FallBack &quot;Diffuse&quot;
}
</code></pre>
<p><strong>ç€è‰²å™¨é€‰æ‹©</strong></p>
<ul>
<li>å…¼å®¹æ—§è®¾å¤‡(Fixed Function Shader)</li>
<li>å…‰æºç›¸å…³(Surface Shader)ï¼Œç§»åŠ¨å¹³å°è¡¨ç°ä¸ä½³</li>
<li>ä½¿ç”¨å…‰æºè¾ƒå°‘||è‡ªå®šä¹‰æ¸²æŸ“æ•ˆæœè¾ƒå¤š(Vertex/Fragment Shader)</li>
</ul>
<h5 id="åæ ‡ç³»">åæ ‡ç³»</h5>
<ul>
<li>å·¦æ‰‹åæ ‡ç³»=ã€‹æ—‹è½¬{å·¦æ‰‹æ³•åˆ™}</li>
<li>å³æ‰‹åæ ‡ç³»=ã€‹æ—‹è½¬{å³æ‰‹æ³•åˆ™}</li>
</ul>
<p>åœ¨æ¨¡å‹ç©ºé—´å’Œä¸–ç•Œç©ºé—´ï¼ŒUnityä½¿ç”¨çš„æ˜¯å·¦æ‰‹åæ ‡ç³»</p>
<p>åœ¨è§‚å¯Ÿè€…ç©ºé—´(æ‘„åƒæœº)ï¼ŒUnityä½¿ç”¨çš„æ˜¯å³æ‰‹åæ ‡ç³»ï¼Œæ‘„åƒæœºçš„å‰å‘æ˜¯zè½´çš„è´Ÿæ–¹å‘</p>
<p><strong>æ¨¡å‹ç©ºé—´(å¯¹è±¡ç©ºé—´)(å±€éƒ¨ç©ºé—´)åæ ‡ç³»</strong></p>
<p><strong>ä¸–ç•Œç©ºé—´</strong></p>
<p><strong>è§‚å¯Ÿè€…ç©ºé—´</strong>(å³æ‰‹åæ ‡ç³»)</p>
<p>**è£å‰ªç©ºé—´(é½æ¬¡è£å‰ªç©ºé—´)*<em>ç©ºé—´æ˜¯ç”±</em>--è§†é”¥ä½“(View Frustum)--*ç¡®å®š</p>
<p>è§†é”¥ä½“æœ‰ä¸¤ç§æŠ•å½±ç±»å‹</p>
<ul>
<li>1.æ­£äº¤æŠ•å½±(orthographic projection)
<ul>
<li>æ­£äº¤æŠ•å½±ç½‘æ ¼å¤§å°ç›¸åŒ(ä¿ç•™äº†ç‰©ä½“çš„è·ç¦»å’Œè§’åº¦)<strong>[2Dæ¸¸æˆæˆ–æ¸²æŸ“å°åœ°å›¾]</strong></li>
<li>æ­£äº¤æŠ•å½±è¿‘è£å‰ªå¹³é¢å’Œè¿œè£å‰ªå¹³é¢<strong>å¤§å°ç›¸ç­‰</strong></li>
</ul>
</li>
<li>2.é€è§†æŠ•å½±(perspective projection)
<ul>
<li>é€è§†æŠ•å½±ç½‘æ ¼è¿‘å¤§è¿œå°(æ¨¡æ‹Ÿäº†äººçœ¼çœ‹ä¸–ç•Œçš„æ–¹å¼)<strong>[æ¨¡æ‹Ÿ3Dä¸–ç•Œç‰©ä½“]</strong></li>
<li>é€è§†æŠ•å½±è¿‘è£å‰ªå¹³é¢å’Œè¿œè£å‰ªå¹³é¢<strong>è¿‘å°è¿œå¤§</strong><br>
<img src="https://sunxiaohang.github.io/post-images/1586845545157.png" alt="" loading="lazy"></li>
</ul>
</li>
</ul>
<h5 id="unity-shader-å†…ç½®å˜é‡">Unity Shader å†…ç½®å˜é‡</h5>
<p>æ¨¡å‹ç©ºé—´(M&gt;&gt;)ä¸–ç•Œç©ºé—´(V&gt;&gt;)è§‚å¯Ÿç©ºé—´(P&gt;&gt;)è£å‰ªç©ºé—´</p>
<p><strong>UNITY_MATRIX_MVP</strong> å½“å‰çš„æ¨¡å‹è§‚å¯ŸæŠ•å½±çŸ©é˜µï¼Œç”¨äºå°†é¡¶ç‚¹/ æ–¹å‘çŸ¢é‡ä»<strong>æ¨¡å‹ç©ºé—´</strong>å˜æ¢åˆ°<strong>è£å‰ªç©ºé—´</strong></p>
<p><strong>UNITY_ MATRIX_MV</strong> å½“å‰çš„æ¨¡å‹è§‚å¯ŸçŸ©é˜µï¼Œ ç”¨äºå°†é¡¶ç‚¹/ æ–¹å‘çŸ¢é‡ä»<strong>æ¨¡å‹ç©ºé—´</strong>å˜æ¢åˆ°<strong>è§‚å¯Ÿç©ºé—´</strong></p>
<p><strong>UNITY_MATRIX_V</strong> å½“å‰çš„è§‚å¯ŸçŸ©é˜µï¼Œ ç”¨äº å°† é¡¶ç‚¹/ æ–¹å‘ çŸ¢é‡ ä»<strong>ä¸–ç•Œç©ºé—´</strong> å˜æ¢ åˆ° <strong>è§‚å¯Ÿç©ºé—´</strong></p>
<p><strong>UNITY_MATRIX_P</strong> å½“å‰çš„æŠ•å½±çŸ©é˜µï¼Œ ç”¨äº å°† é¡¶ç‚¹/ æ–¹å‘ çŸ¢é‡ ä»<strong>è§‚å¯Ÿç©ºé—´</strong> å˜æ¢ åˆ° <strong>è£å‰ªç©ºé—´</strong></p>
<p><strong>UNITY_MATRIX_VP</strong> å½“å‰ çš„ è§‚å¯Ÿ æŠ•å½± çŸ©é˜µï¼Œ ç”¨äº å°† é¡¶ç‚¹/ æ–¹å‘ çŸ¢é‡ ä»<strong>ä¸–ç•Œç©ºé—´</strong> å˜æ¢ åˆ° <strong>è£å‰ªç©ºé—´</strong></p>
<p><strong>UNITY_ MATRIX_T_MV</strong> UNITY_ MATRIX_ MV çš„ <strong>è½¬ç½®çŸ©é˜µ</strong></p>
<p><strong>UNITY_ MATRIX_IT_MV</strong> UNITY_ MATRIX_ MV çš„ <strong>é€†è½¬ç½®çŸ©é˜µ</strong>ï¼Œ ç”¨äºå°†æ³•çº¿ä»<strong>æ¨¡å‹ç©ºé—´</strong>å˜æ¢ åˆ°<strong>è§‚å¯Ÿç©ºé—´</strong>ï¼Œ ä¹Ÿå¯ ç”¨äº å¾—åˆ° UNITY_ MATRIX_ MV çš„ é€† çŸ©é˜µ</p>
<p><strong>_Object2World</strong> å½“å‰ çš„ <strong>æ¨¡å‹çŸ©é˜µ</strong>ï¼Œ ç”¨äºå°† é¡¶ç‚¹/ æ–¹å‘çŸ¢é‡ <strong>æ¨¡å‹ç©ºé—´</strong> å˜æ¢åˆ°<strong>ä¸–ç•Œç©ºé—´</strong></p>
<p><strong>_World2Object <strong>_Object2World çš„ <strong>é€†çŸ©é˜µ</strong>, ç”¨äºå°†é¡¶ç‚¹/æ–¹å‘çŸ¢é‡ä»</strong>ä¸–ç•Œç©ºé—´</strong>å˜æ¢åˆ°<strong>æ¨¡å‹ç©ºé—´</strong></p>
<h5 id="cameraå’Œå±å¹•å‚æ•°">Cameraå’Œå±å¹•å‚æ•°</h5>
<p><strong>_WorldSpaceCameraPos</strong> float3 è¯¥ æ‘„åƒæœº åœ¨ä¸– ç•Œ ç©ºé—´ ä¸­çš„ ä½ç½® _</p>
<p><strong>_ProjectionParams</strong> float4 x = 1. 0ï¼ˆ æˆ– ? 1. 0ï¼Œ å¦‚æœ æ­£åœ¨ ä½¿ç”¨ ä¸€ä¸ª ç¿»è½¬ çš„ æŠ•å½± çŸ©é˜µ è¿›è¡Œ æ¸²æŸ“ï¼‰ï¼Œ y = Nearï¼Œ z = Farï¼Œ w = 1. 0 + 1. 0/ Farï¼Œ å…¶ä¸­ Near å’Œ Far åˆ† åˆ«æ˜¯ è¿‘ è£å‰ª å¹³é¢ å’Œ è¿œ è£å‰ª å¹³é¢ å’Œ æ‘„åƒæœº çš„ è·ç¦»</p>
<p><strong>_ScreenParams</strong> float4 x = widthï¼Œ y = heightï¼Œ z = 1. 0 + 1. 0/ widthï¼Œ w = 1. 0 + 1. 0/ heightï¼Œ å…¶ä¸­ width å’Œ height åˆ† åˆ«æ˜¯ è¯¥ æ‘„åƒæœº çš„ æ¸²æŸ“ ç›®æ ‡ï¼ˆ render targetï¼‰ çš„ åƒç´  å®½åº¦ å’Œ é«˜åº¦</p>
<p><strong>_ZBufferParams</strong> float4 x = 1 ? Far/ Nearï¼Œ y = Far/ Nearï¼Œ z = x/ Farï¼Œ w = y/ Farï¼Œ è¯¥ å˜é‡ ç”¨äº çº¿æ€§åŒ– Z ç¼“å­˜ ä¸­çš„ æ·±åº¦ å€¼ï¼ˆ å¯ å‚è€ƒ 13. 1 èŠ‚ï¼‰</p>
<p><strong>unity_ OrthoParams</strong> float4 x = widthï¼Œ y = heigthï¼Œ z æ²¡æœ‰ å®šä¹‰ï¼Œ w = 1. 0ï¼ˆ è¯¥ æ‘„åƒæœº æ˜¯ æ­£äº¤ æ‘„åƒæœºï¼‰ æˆ– w = 0. 0ï¼ˆ è¯¥ æ‘„åƒæœº æ˜¯ é€è§† æ‘„åƒæœºï¼‰ï¼Œ å…¶ä¸­ width å’Œ height æ˜¯ æ­£äº¤ æŠ•å½± æ‘„åƒæœº çš„ å®½åº¦ å’Œ é«˜åº¦</p>
<p><strong>unity_ CameraProjection</strong> float4x4 è¯¥ æ‘„åƒæœº çš„ æŠ•å½± çŸ©é˜µ</p>
<p><strong>unity_ CameraInvProjection</strong> float4x4 è¯¥ æ‘„åƒæœº çš„ æŠ•å½± çŸ©é˜µ çš„ é€† çŸ©é˜µ</p>
<p><strong>unity_ CameraWorldClipPlanes[ 6]</strong> float4 è¯¥ æ‘„åƒæœº çš„ 6 ä¸ª è£å‰ª å¹³é¢ åœ¨ä¸– ç•Œ ç©ºé—´ ä¸‹ çš„ ç­‰å¼ï¼Œ æŒ‰ å¦‚ä¸‹ é¡ºåºï¼š å·¦ã€ å³ã€ ä¸‹ã€ ä¸Šã€ è¿‘ã€ è¿œ è£å‰ª å¹³é¢</p>
<h5 id="unityä¸­çš„å±å¹•åæ ‡">Unityä¸­çš„å±å¹•åæ ‡</h5>
<p>**VPOS/WPOS:**åˆ†åˆ«æ˜¯HLSLå’ŒCgå¯¹å±å¹•åæ ‡çš„å®šä¹‰ï¼Œä¸¤è€…åœ¨unityä¸­ç­‰ä»·</p>
<pre><code class="language-C#">//VPOS/WPOSè¯­ä¹‰å®šä¹‰çš„è¾“å…¥æ˜¯ä¸€ä¸ªfloat4ç±»å‹çš„å˜é‡
//xyå€¼ä»£è¡¨åœ¨å±å¹•ç©ºé—´ä¸­çš„åƒç´ åæ ‡ï¼Œ[0.5-400.5]
//unityä¸­ï¼ŒVPOS/WPOSçš„zåˆ†é‡èŒƒå›´æ˜¯[0,1]ï¼Œåœ¨æ‘„åƒæœºè¿‘è£å‰ªå¹³é¢ï¼Œzå€¼ä¸º0ï¼Œè¿œè£å‰ªå¹³é¢ï¼Œzä¸º1
//wåˆ†é‡è¡¨ç¤ºæ‘„åƒæœºçš„æŠ•å½±ç±»å‹{é€è§†æŠ•å½±[1/Near,1/Far](Nearå’ŒFarå¯¹åº”è£å‰ªå¹³é¢åˆ°æ‘„åƒæœºçš„è·ç¦»)}{æ­£äº¤æŠ•å½±[æ’ä¸º1]}
//æŠŠå±å¹•ç©ºé—´åˆä¸€å±å¹•åˆ†è¾¨ç‡æ¥å¾—åˆ°{è§†å£ç©ºé—´(viewspace)}ä¸­çš„åæ ‡
//è§†å£åæ ‡æ˜¯æŠŠå±å¹•åæ ‡å½’ä¸€åŒ–ï¼Œå·¦ä¸‹è§’(0,0)å³ä¸Šè§’å°±æ˜¯(1,1)[xyå€¼é™¤ä»¥å±å¹•åˆ†è¾¨ç‡å³å¯]æˆ–è€…ç”¨ComputeScreenPoså‡½æ•°ï¼š
fixed4 frag(float4 sp:VPOS):SV_Target
{
    return fixed4(sp.xy/ScreenParams.xy,0.0,1.0);
}
//ComputeScreenPoså‡½æ•°ä½¿ç”¨ç¤ºä¾‹
struct vertOut{
	float pos:SV_POSITION;
	float scrPos:TEXCOORD0;
}
vertOut vert(appdata_base v){
	vertOut o;
	o.pos = mul(UNITY_MATRIX_MVP,v.vertex);
	o.scrPos = ComputeScreenPos(o.pos);
	return 0;
}
fixed4 frag(vertOut i):SV_Target{
	float2 wcoord = (i.scrPos.xy/i.scrPos.w);
	return fixed3(wcoord,0.0,1.0);
}

</code></pre>
<h5 id="unity-cgè¯­æ³•æ±‡æ€»">Unity Cgè¯­æ³•æ±‡æ€»</h5>
<p><strong>é¢å¤–åŸºç¡€ç±»å‹</strong></p>
<ul>
<li><strong>half</strong> 16ä½æµ®ç‚¹æ•° [-60000,60000]ç²¾åº¦{å°æ•°ç‚¹å3.3ä½}</li>
<li><strong>fixed</strong> 12ä½å®šç‚¹æ•°[-2,2]ï¼Œç²¾åº¦1/256</li>
<li><strong>sampler</strong>* åˆ†ä¸ºsampler,sampler1D,sampler2D,sampler3D,samplerCUBEå’ŒsamplerRECT</li>
</ul>
<p><strong>Swizzleæ“ä½œç¬¦</strong>ï¼ˆåªèƒ½ç”¨äº<strong>ç»“æ„ä½“</strong>å’Œ<strong>å‘é‡</strong>ï¼‰</p>
<p>float4(a,b,c,d).xwzç­‰ä»·äº float(a,d,c)</p>
<p><strong>è¾“å…¥æ•°æ®å…³é”®å­—</strong></p>
<ul>
<li><strong>Varyingï¼š<strong>åœ¨Cgç¨‹åºä¸­é€šè¿‡è¯­ä¹‰è¿›è¡Œç»‘å®šCgè¯­è¨€æä¾›äº†ä¸€ç»„è¯­ä¹‰è¯ï¼Œç”¨ä»¥è¡¨ç¤ºå‚æ•°æ˜¯ç”±é¡¶ç‚¹çš„å“ªäº›æ•°æ®åˆå§‹åŒ–çš„ï¼Œè¯­ä¹‰è¯ç»‘å®šå=&gt;å˜é‡è¢«åˆå§‹åŒ–çš„åŒæ—¶ä¹Ÿä»¥ä¸ºè¿™å˜é‡æœ‰äº†ç‰¹æ®Šå«ä¹‰ï¼Œå¦‚è¡¨ç¤ºä½ç½®ã€æ³•çº¿ç­‰{è¯­ä¹‰æä¾›äº†ä¸€ç§ä½¿ç”¨</strong>éšé¡¶ç‚¹å˜åŒ–</strong>æˆ–éš<strong>ç‰‡æ®µå˜åŒ–</strong>çš„å€¼æ¥åˆå§‹åŒ–Cgç¨‹åºå‚æ•°çš„æ–¹æ³•ï¼Œå¦‚ï¼šé¡¶ç‚¹ä½ç½®ï¼Œæ³•å‘é‡ï¼Œçº¹ç†åæ ‡ç­‰}</li>
<li><strong>Uniformå‚æ•°ï¼š<strong>Uniformæ˜¯ç”¨æ¥</strong>é™åˆ¶ä¸€ä¸ªå˜é‡çš„åˆå§‹å€¼çš„æ¥æº</strong>ï¼Œè¡¨ç¤ºè¯¥å˜é‡åˆå§‹å€¼æ¥æºäºå¤–éƒ¨ç¯å¢ƒï¼Œã€Unityå†…ç½®Uniformè¾“å…¥å‚æ•°åˆ—è¡¨(éƒ¨åˆ†å¦‚ï¼šæ¨¡å‹çŸ©é˜µï¼Œè§†é”¥ä½“ï¼Œæ—¶é—´é‡ï¼Œç›¸æœºä½ç½®ï¼Œå…‰æºä½ç½®ç­‰)ã€‘</li>
</ul>
<p>**è¯­ä¹‰ï¼š**è¡¨ç¤ºå›¾å…ƒæ•°æ®çš„å«ä¹‰(é¡¶ç‚¹ä½ç½®ï¼Œæ³•å‘é‡æˆ–è€…çº¹ç†ä¿¡æ¯)ä¹Ÿè¡¨ç¤ºè¿™äº›å›¾å…ƒæ•°æ®å­˜æ”¾çš„ç¡¬ä»¶èµ„æºï¼Œ<strong>é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºå³æ˜¯ç‰‡æ®µç€è‰²å™¨çš„è¾“å…¥</strong>ï¼ˆå› æ­¤ä¸¤è€…è¾“å‡ºè¾“å…¥è¯­ä¹‰å¿…é¡»æ˜¯ä¸€è‡´çš„ï¼‰[è¯­ä¹‰åªå¯¹è¿™ä¸¤ä¸ªé˜¶æ®µæœ‰æ„ä¹‰ï¼Œä¸”åªåœ¨å…¥å£å‡½æ•°æœ‰æ•ˆï¼Œåœ¨å†…éƒ¨å‡½æ•°æ— æ•ˆ]<strong>å¯ä»¥ç†è§£ä¸ºè¾“å‡º&gt;è¾“å…¥å…³ç³»æ˜ å°„</strong>ï¼Œè¯­ä¹‰è¯å’Œè¯­ä¹‰ç»‘å®šå¦‚ä¸‹ï¼š</p>
<ul>
<li>**POSITION/SV_POSITIONï¼š<strong>æ¨¡å‹åæ ‡ä½ç½®{ä¸¤è€…å”¯ä¸€åŒºåˆ«æ˜¯ï¼šå½“ç”¨åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­</strong>+**ä½œä¸ºè¯­ä¹‰è¾“å‡ºæ—¶ï¼ŒSV_POSITIONè¡¨ç¤ºçš„é¡¶ç‚¹ä½ç½®ä¼šè¢«å›ºå®šï¼Œä¸èƒ½æ”¹å˜}</li>
<li>**TANGENTï¼š**æ­£äº¤äºè¡¨é¢æ³•çº¿çš„å‘é‡</li>
<li>**NORMALï¼š**è¡¨é¢æ³•çº¿å‘é‡ï¼Œéœ€è¦è¿›è¡Œå½’ä¸€åŒ–</li>
<li>**TEXCOORDiï¼š**ç¬¬iç»„çº¹ç†åæ ‡(å³UVåæ ‡ï¼ŒèŒƒå›´åœ¨0-1ä¹‹é—´)ï¼Œiæ˜¯0-7ä¸­çš„ä¸€ä¸ªæ•°å­—</li>
<li>**COLORï¼š**é¢œè‰²(å…‰ç…§è®¡ç®—å…¬å¼=ambient+Diffuse+Specular)</li>
<li>**PSIZEï¼š**ç‚¹çš„å¤§å°</li>
<li>**BLENDINGICESï¼š**é€šç”¨å±æ€§ï¼Œå¯ä»¥ç”¨å®ƒå’ŒTANGENTæ›¿æ¢TEXCOORDi</li>
</ul>
<p><strong>é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºè¯­ä¹‰è¯ï¼š</strong></p>
<ul>
<li>**COLORï¼š**é¢œè‰²</li>
<li>**FOGï¼š**è¾“å…¥é›¾åæ ‡</li>
<li>**PSIZEï¼š**å¤§å°</li>
<li>**POSITIONï¼š**æ¨¡å‹åæ ‡ä½ç½®</li>
<li>**TEXCOORD0-TEXCOORD7ï¼š**ç¬¬iç»„çº¹ç†åæ ‡</li>
</ul>
<p><strong>ç‰‡æ®µç€è‰²å™¨è¾“å…¥è¯­ä¹‰å®šä¹‰ï¼š</strong></p>
<ul>
<li>**COLORï¼š**é¢œè‰²</li>
<li>**DEPTHï¼š**ç‰‡æ®µæ·±åº¦</li>
</ul>
<p><strong>è¯­ä¹‰ç»‘å®šä¸‰ç§æ–¹æ³•</strong></p>
<pre><code class="language-C#">//æ–¹æ³•ä¸€:ç»‘å®šè¯­ä¹‰æ”¾åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨çš„å‚æ•°å£°æ˜å[]ï¼šè¡¨ç¤ºå¯é€‰é¡¹&lt;&gt;ï¼šè¡¨ç¤ºå¿…é€‰é¡¹
[const][in|out|inout|uniform]&lt;type&gt;&lt;identifier&gt;[ :&lt;binding-semantic&gt;][=&lt;initializer&gt;]  
void vert(float4 obj_position:POSITION,float4 obj_normal:NORMAL,out float4 outPos:POSITION,uniform float4 uColor:COLOR){}
//æ–¹æ³•äºŒ:ç»‘å®šè¯­ä¹‰æ”¾åœ¨ç»“æ„ä½“çš„æˆå‘˜å˜é‡å
Struct&lt;struct-tag&gt;{
	&lt;type&gt;&lt;identifier&gt;[:binding-semantic];
	//sample
	float4 pos : SV_POSITION;
	float4 col:TEXCOORD0;
}
//æ–¹æ³•ä¸‰:ç»‘å®šè¯­ä¹‰æ”¾åœ¨å‡½æ•°ç”Ÿå‘½åé¢
&lt;type&gt;&lt;identifier&gt;(&lt;parameter-list&gt;)[:&lt;binding-semantic&gt;]{&lt;body&gt;}
float4 frag(vertexOutPut input):COLOR{
    float4 color = float4(1,0,0,1);
    return color;
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Unity3D]]></title>
        <id>https://sunxiaohang.github.io/post/unity3d/</id>
        <link href="https://sunxiaohang.github.io/post/unity3d/">
        </link>
        <updated>2020-04-06T11:49:39.000Z</updated>
        <summary type="html"><![CDATA[<p>Unity3Dé¡¹ç›®å…³é”®çŸ¥è¯†ç‚¹æ±‡æ€»ï¼Œæ–¹ä¾¿åæœŸå¤ä¹ å·©å›ºï¼ŒåŒ…æ‹¬å…³é”®çš„monobehaviourç”Ÿå‘½å‘¨æœŸï¼Œåç¨‹ï¼Œå·¥ä½œçº¿ç¨‹ï¼Œç›¸æœºå˜æ¢ç›¸å…³ï¼Œå°„çº¿æŠ•å°„ï¼Œå¯¹è±¡æ± åŒ–æŠ€æœ¯ï¼Œunityä¸­å¸¸ç”¨åˆ°çš„ä¸€åŠ3Dæ•°å­¦è¿ç®—ï¼Œç‚¹ç§¯ã€å·®ç§¯ã€æ¬§æ‹‰è§’å’Œå››å…ƒæ•°ç­‰ç›¸å…³ç¬”è®°ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Unity3Dé¡¹ç›®å…³é”®çŸ¥è¯†ç‚¹æ±‡æ€»ï¼Œæ–¹ä¾¿åæœŸå¤ä¹ å·©å›ºï¼ŒåŒ…æ‹¬å…³é”®çš„monobehaviourç”Ÿå‘½å‘¨æœŸï¼Œåç¨‹ï¼Œå·¥ä½œçº¿ç¨‹ï¼Œç›¸æœºå˜æ¢ç›¸å…³ï¼Œå°„çº¿æŠ•å°„ï¼Œå¯¹è±¡æ± åŒ–æŠ€æœ¯ï¼Œunityä¸­å¸¸ç”¨åˆ°çš„ä¸€åŠ3Dæ•°å­¦è¿ç®—ï¼Œç‚¹ç§¯ã€å·®ç§¯ã€æ¬§æ‹‰è§’å’Œå››å…ƒæ•°ç­‰ç›¸å…³ç¬”è®°ã€‚</p>
<!-- more -->
<h4 id="unity-åŸºç¡€ç±»å›¾">Unity åŸºç¡€ç±»å›¾</h4>
<figure data-type="image" tabindex="1"><img src="https://sunxiaohang.github.io/post-images/1586173848463.png" alt="" loading="lazy"></figure>
<h4 id="unityç”Ÿå‘½å‘¨æœŸ">Unityç”Ÿå‘½å‘¨æœŸ</h4>
<figure data-type="image" tabindex="2"><img src="https://sunxiaohang.github.io/post-images/1586173894549.png" alt="" loading="lazy"></figure>
<h4 id="camera">Camera</h4>
<pre><code>//-----------------------------------------------------
//-------------------é€šè¿‡ç›¸æœºçš„åˆ‡æ¢æ¥å®ç°åœºæ™¯çš„åˆ‡æ¢
/////æ¸²æŸ“ç”»ä¸­ç”»(å¤šç›¸æœº){å¦‚ï¼šèµ›è½¦æ¸¸æˆçš„åè§†é•œï¼Œå°åœ°å›¾}
/////é«˜depthç›¸æœºçš„ç”»é¢ä¼šè¦†ç›–ä½depthç›¸æœºç”»é¢
/////æ¨æ‹‰å˜ç„¦æ˜¯æ‘„åƒæœºåŒæ—¶å‘ç›®æ ‡å¯¹è±¡ç§»åŠ¨å¹¶å°†å…¶ç¼©å°çš„è§†è§‰æ•ˆæœ(å¯¹è±¡å¤§å°çœ‹èµ·æ¥å¤§è‡´ç›¸åŒï¼Œä»è€Œè¾¾åˆ°æ”¹å˜å…¶ä»–å¯¹è±¡è§†è§’çš„ç›®çš„)
void Start(){
    distance = Vector3.Distance(transform.position,target.position);
    heightAtDistance = FrustumHeightAtDistance(distance);
    EnabledE();
}
void Update(){
    var distance = Vector3.Distance(transform.position,target.position);
    Camera.fieldOfView = FovForHeightAtDistance(initialDistance,CurrentDistance);
}
//----------------------------------------------------------
//------------------------å°„çº¿æŠ•å°„-------------------------
void Start(){
    RayCastHit hit;
    //Camera.ViewPortPointToRay(0..1)åæ ‡[0è¡¨ç¤ºå·¦ä¸‹ï¼Œ1è¡¨ç¤ºå³ä¸Š]
    Ray ray = Camera.ScreenPointToRay(Input.mousePosition);
    if(Physics.RayCast(ray,out hit)){
        Transform objectHit =hit.transform;
        //å‘½ä¸­ to do
    }
}
//----------------------------------------------------------
//--------------------æ²¿å°„çº¿ç§»åŠ¨ç›¸æœº(ç¼©æ”¾)----------------
void Update(){
    Ray ray = camera.ScreenPointToRay(Input.mousePOsition);
    float zoomDistance = zoomSpeed*Input.GetAxis(&quot;Vertical&quot;)*Time.deltaTime;
    Camera.tranform.Translate(ray.direction*zoomDistance,Space.world);
}
//----------------------------------------------------------
//---------------------ä¿®æ”¹æ–œè§†é”¥ä½“pivot------------------
Matrix4*4 mat = Camera.main.projectionMatrix;
mat[0,2] = horizontalObl;//float(horizontal) æ°´å¹³å€¾æ–œé‡ &lt;&quot;+&quot;&gt;å‘ä¸Š
mat[1,2] = VerticalObl;//float(vertical) å‚ç›´å€¾æ–œé‡ &lt;&quot;-&quot;&gt;å‘ä¸‹
Camera.main.projectionMatrix = mat;
</code></pre>
<h4 id="pool">Pool</h4>
<pre><code>//----------------------------------------------------------
//---------------------game object pool------------------
public class ObjectPool : MonoBehaviour
{
   public static ObjectPool instance;
   public GameObject[] objectPrefabs;
   public List&lt;GameObject&gt;[] pooledObjects;
   public int[] amountToBuffer;
   public int defaultBufferAmount = 3;
   protected GameObject containerObject;
   void Awake (){instance = this;}
   void Start (){
       containerObject = new GameObject(&quot;ObjectPool&quot;);
       pooledObjects = new List&lt;GameObject&gt;[objectPrefabs.Length];
       int i = 0;
       foreach ( GameObject objectPrefab in objectPrefabs ){
           pooledObjects[i] = new List&lt;GameObject&gt;();  
           int bufferAmount;
           if(i &lt; amountToBuffer.Length) bufferAmount = amountToBuffer[i];
           else bufferAmount = defaultBufferAmount;
           for ( int n=0; n&lt;bufferAmount; n++){
               GameObject newObj = Instantiate(objectPrefab) as GameObject;
               newObj.name = objectPrefab.name;
               PoolObject(newObj);
           }
           i++;
       }
   }
   public GameObject GetObjectForType ( string objectType , bool onlyPooled ){
       for(int i=0; i&lt;objectPrefabs.Length; i++){
           GameObject prefab = objectPrefabs[i];
           if(prefab.name == objectType){
               if(pooledObjects[i].Count &gt; 0){
                   GameObject pooledObject = pooledObjects[i][0];
                   pooledObjects[i].RemoveAt(0);
                   pooledObject.transform.parent = null;
                   pooledObject.SetActiveRecursively(true);
                   return pooledObject;
               } else if(!onlyPooled) {
                   return Instantiate(objectPrefabs[i]) as GameObject;
               }
               break;
           }
       }
       return null;
   }
   public void PoolObject ( GameObject obj ){
       for ( int i=0; i&lt;objectPrefabs.Length; i++){
           if(objectPrefabs[i].name == obj.name){
               obj.SetActiveRecursively(false);
               obj.transform.parent = containerObject.transform;
               pooledObjects[i].Add(obj);
               return;
           }
       }
   }
}
//----------------------------------------------------------
//--------------------------effect pool--------------------
public class Effect : MonoBehaviour{
   public ParticleEmitter[] emitters;
   public float effectLength = 1f;
   public bool poolAfterComplete = true;
   public virtual void ResetEffect (){
       if(poolAfterComplete){
           ObjectPool.instance.PoolObject(gameObject);
       } else {
           Destroy(gameObject);
       }
   }
   public virtual void StartEffect (){
       foreach ( ParticleEmitter emitter in emitters ){
           emitter.Emit();
       }
       StartCoroutine(WaitForCompletion());
   }
   public IEnumerator WaitForCompletion (){
       yield return new WaitForSeconds(effectLength);
       ResetEffect();  
   }
}
//----------------------------------------------------------
//--------------------------sound pool--------------------
public class SoundEffect : MonoBehaviour{
   public AudioSource soundSource;
   public AudioClip[] soundClips;
   public float effectLength = 1f;
   public bool poolAfterComplete = true;
   public virtual void ResetEffect (){
       if(poolAfterComplete){
           ObjectPool.instance.PoolObject(gameObject);
       } else {
           Destroy(gameObject);
       }
   }
   public virtual void StartEffect (){
       soundSource.PlayOneShot(soundClips[Random.Range(0,soundClips.Length)]);
       StartCoroutine(WaitForCompletion());
   }
   public IEnumerator WaitForCompletion (){
       yield return new WaitForSeconds(effectLength);
       ResetEffect();
   }
}
</code></pre>
<h4 id="ç‚¹ç§¯magnitude">ç‚¹ç§¯ï¼ˆMagnitudeï¼‰</h4>
<p>Dot Product = Ax<em>Bx+Ay</em>By+Az*Bz<br>
ç‚¹ç§¯å¯ä»¥ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¤šè¾¹å½¢æ˜¯é¢å‘æ‘„åƒæœºè¿˜æ˜¯èƒŒå‘æ‘„åƒæœº,(æˆ–æ¨¡æ‹Ÿé£æœºé£è¡Œï¼Œé€šè¿‡åˆ¤æ–­é£æœºé£è¡Œæ–¹å‘ä¸å‚ç›´åœ°é¢æ–¹å‘çš„å¤¹è§’åˆ¤æ–­é£æœºæ˜¯ä¸Šå‡è¿˜æ˜¯ä¸‹é™)åœ¨Uï¼ŒVéé›¶å‰æä¸‹<br>
â€¢ ç‚¹ç§¯ä¸ºè´Ÿ=&gt;(U,V&gt;90)<br>
â€¢ ç‚¹ç§¯ä¸ºæ­£=&gt;(U,V&lt;90)<br>
â€¢ ç‚¹ç§¯ä¸ºé›¶=&gt;(U,V=90)</p>
<h4 id="å·®ç§¯å·¦æ‰‹å®šåˆ™ä¸­æŒ‡ä¸ºresultæ–¹å‘ç»“æœçŸ¢é‡å‚ç›´ä¸abçŸ¢é‡">å·®ç§¯[å·¦æ‰‹å®šåˆ™]{ä¸­æŒ‡ä¸ºresultæ–¹å‘}(ç»“æœçŸ¢é‡å‚ç›´ä¸abçŸ¢é‡)</h4>
<p>Vector2ï¼šA<em>B=X1</em>Y2+X2*Y1<br>
Vector3:(yz,zx,xy)<br>
Cx = AyBz-AzBy<br>
Cy = AzBx-AxBz<br>
Cz = AxBy-AyBx<br>
result = (Cx,Cy,Cz)<br>
è§’åŠ¨é‡ï¼ˆå½“å‰æŒ‡å‘çš„æ–¹å‘å‘é‡aï¼Œç›®æ ‡æ–¹å‘çš„æ–¹å‘å‘é‡bï¼‰æ±‚[å‰ç§¯]=æ—‹è½¬è½´</p>
<h4 id="enable-and-disable-component">Enable and Disable Component</h4>
<p>Component.enable = true|false<br>
æ§åˆ¶ä¸€ä¸ªç‰©ä½“æ˜¯å¦åœ¨å±å¹•ä¸Šæ¸²æŸ“æˆ–æ˜¾ç¤º</p>
<h4 id="active-and-deactivate-component">Active and Deactivate Component</h4>
<p>component.SetActive(false);<br>
æ§åˆ¶æ˜¯å¦åœ¨åœºæ™¯ä¸­ä½¿ç”¨è¯¥ç‰©ä½“ï¼ŒfindObjectæ˜¯å¦èƒ½æ‰¾åˆ°<br>
SetActiveRecursively()æ§åˆ¶é€’å½’å­ç‰©ä½“</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Unity3dæ‰©å±•ç¼–è¾‘å™¨]]></title>
        <id>https://sunxiaohang.github.io/post/unity3d-kuo-zhan-bian-ji-qi/</id>
        <link href="https://sunxiaohang.github.io/post/unity3d-kuo-zhan-bian-ji-qi/">
        </link>
        <updated>2020-02-11T11:44:11.000Z</updated>
        <summary type="html"><![CDATA[<p>Unity3Dæ‰©å±•ç¼–è¾‘å™¨çš„ä¸€äº›å¸¸è§„æ“ä½œï¼ŒåŒ…æ‹¬æ‰©å±•èœå•æ ï¼Œæ‰©å±•å±æ€§Inspectoræ“ä½œï¼Œä»¥åŠæ‰©å±•è‡ªå®šä¹‰å·¥å…·çª—ä½“ï¼Œè®¾è®¡åŸºæœ¬C#å¤„ç†æµç¨‹ï¼Œè¡¨æ ¼è¯»å–å¤„ç†ï¼Œå‰§æƒ…ç¼–è¾‘ï¼Œè¡¨ç°ç»„å¤„ç†ï¼Œä»¥åŠå…¶ä»–å¤–é“¾æ‰¹å¤„ç†æ“ä½œã€‚å‚è€ƒUnity3Dæ¸¸æˆå¼€å‘ä»¥åŠæ—¥å¸¸é¡¹ç›®å¼€å‘ç»éªŒã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Unity3Dæ‰©å±•ç¼–è¾‘å™¨çš„ä¸€äº›å¸¸è§„æ“ä½œï¼ŒåŒ…æ‹¬æ‰©å±•èœå•æ ï¼Œæ‰©å±•å±æ€§Inspectoræ“ä½œï¼Œä»¥åŠæ‰©å±•è‡ªå®šä¹‰å·¥å…·çª—ä½“ï¼Œè®¾è®¡åŸºæœ¬C#å¤„ç†æµç¨‹ï¼Œè¡¨æ ¼è¯»å–å¤„ç†ï¼Œå‰§æƒ…ç¼–è¾‘ï¼Œè¡¨ç°ç»„å¤„ç†ï¼Œä»¥åŠå…¶ä»–å¤–é“¾æ‰¹å¤„ç†æ“ä½œã€‚å‚è€ƒUnity3Dæ¸¸æˆå¼€å‘ä»¥åŠæ—¥å¸¸é¡¹ç›®å¼€å‘ç»éªŒã€‚</p>
<!-- more -->
<h5 id="æ‰©å±•å³é”®èœå•">æ‰©å±•å³é”®èœå•</h5>
<pre><code class="language-c#">//[MenuItem(&quot;Assets/Tools/Debug&quot;,isValidateFunction,priority)]
public class Extension
{
    [MenuItem(&quot;Assets/CustomTools/Debug&quot;,false,2)]
    static void DebugFunction()
    {
        Debug.Log(Selection.activeObject.name);
    }
}
</code></pre>
<h5 id="åˆ›å»ºèœå•">åˆ›å»ºèœå•</h5>
<pre><code class="language-c#">//[MenuItem(&quot;Assets/Create/ObjectName&quot;,isValidateFunction,priority)]
public class Extension
{
    [MenuItem(&quot;Assets/Create/Debug&quot;,false,2)]
    static void CreateObjectName()
    {
        GameObject.CreatePrimitive(PrimitiveType.Sphere);
    }
}
</code></pre>
<h5 id="æ‰©å±•å¸ƒå±€">æ‰©å±•å¸ƒå±€</h5>
<pre><code class="language-c#">public class Extension
{
    //è¡¨ç¤ºæ­¤æ–¹æ³•ä¼šåœ¨C#ä»£ç æ¯æ¬¡ç¼–è¯‘å®Œæˆåé¦–å…ˆè°ƒç”¨
    [InitializeOnLoadMethod]
    static void Function()
    {
        //ç›‘å¬EditorApplication.projectWindowItemOnGUIå§”æ‰˜ï¼Œå³å¯ä½¿ç”¨GUIæ–¹æ³•æ¥ç»˜åˆ¶è‡ªå®šä¹‰UIå…ƒç´ 
        EditorApplication.projectWindowItemOnGUI = delegate(string guid, Rect rect) { 
            //åœ¨projectè§†å›¾ä¸­é€‰æ‹©ä¸€ä¸ªèµ„æº
            if (Selection.activeObject &amp;&amp;guid == AssetDatabase.AssetPathToGUID(AssetDatabase.GetAssetPath(Selection.activeObject)))
            {
                //è®¾ç½®æ‹“å±•æŒ‰é’®åŒºåŸŸ
                float width = 50f;
                rect.x += rect.width - width;
                rect.y += 2f;
                rect.width = width;
                GUI.color = Color.red;
                //ç‚¹å‡»äº‹ä»¶å¤„ç†çš„ç®€å•å†™æ³•
                if(GUI.Button(rect,&quot;click&quot;)){
                    Debug.LogFormat(&quot;click:{0}&quot;,Selection.activeObject.name); 
                };
                GUI.color= Color.white;
            }
        };
    }
}
</code></pre>
<h5 id="ç›‘å¬äº‹ä»¶">ç›‘å¬äº‹ä»¶</h5>
<pre><code class="language-C#">//äº‹ä»¶ç›‘å¬éœ€è¦ç»§æ‰¿çˆ¶ç±»UnityEditor.AssetModificationProcessor
public class Extension:UnityEditor.AssetModificationProcessor{
    //å…¨å±€ç›‘å¬Projectè§†å›¾ä¸‹çš„èµ„æºæ˜¯å¦å‘ç”Ÿå˜åŒ–
    [InitializeOnLoadMethod]
    static void Function(){
    	EditorApplication.projectChanged += delegate(){Debug.Log(&quot;change&quot;);};
    }
    //ç›‘å¬åŒå‡»é¼ æ ‡å·¦é”®ï¼Œæ‰“å¼€èµ„æºäº‹ä»¶
    public static bool IsOpenForEdit(string assetPath, out string message){
        return true;//true è¡¨ç¤ºè¯¥èµ„æºå¯ä»¥æ‰“å¼€ï¼Œfalseè¡¨ç¤ºä¸å…è®¸åœ¨unityä¸­æ‰“å¼€è¯¥èµ„æº
    }
    //ç›‘å¬èµ„æºå³å°†è¢«åˆ›å»º
    private static void OnWillCreateAsset(string assetName){ 
    	Debug.LogFormat(&quot;path:{0}&quot;,assetName);
    }
    //ç›‘å¬èµ„æºå³å°†è¢«ä¿å­˜
    private static string[] OnWillSaveAssets(string[] paths){
        if (paths != null)Debug.LogFormat(&quot;path:{0}&quot;,string.Join(&quot;,&quot;,paths));
        return paths;
    }
    //ç›‘å¬èµ„æºå³å°†è¢«ç§»åŠ¨
    private static AssetMoveResult OnWillMoveAsset(string sourcePath, string destinationPath){
        Debug.LogFormat(&quot;from:{0} to {1}&quot;,sourcePath,destinationPath);
        return AssetMoveResult.DidMove;//AssetMoveResult.DidMoveè¡¨ç¤ºèµ„æºå¯ä»¥ç§»åŠ¨
    }
    //ç›‘å¬èµ„æºå³å°†è¢«åˆ é™¤
    private static AssetDeleteResult OnWillDeleteAsset(string assetPath, RemoveAssetOptions options){
        Debug.LogFormat(&quot;delete:{0}&quot;,assetPath);
        return AssetDeleteResult.DidNotDelete;//è¡¨ç¤ºè¯¥èµ„æºå¯ä»¥è¢«åˆ é™¤
    }
}
</code></pre>
<h4 id="æ‹“å±•hierarchyè§†å›¾">æ‹“å±•Hierarchyè§†å›¾</h4>
<h5 id="æ‹“å±•èœå•">æ‹“å±•èœå•</h5>
<pre><code class="language-c#">public class Extension{
    [MenuItem(&quot;GameObject/CustomCreate/Cube&quot;, false, 1)]
    static void CreateCube()
    {
        GameObject.CreatePrimitive(PrimitiveType.Cube);
    }
}
</code></pre>
<h5 id="æ‹“å±•å¸ƒå±€">æ‹“å±•å¸ƒå±€</h5>
<pre><code class="language-C#">public class Extension
{
    [InitializeOnLoadMethod]
    static void InitializeOnLoad()
    {
        EditorApplication.hierarchyWindowItemOnGUI = delegate(int id, Rect rect) {  
            //åœ¨hierarchyè§†å›¾ä¸­é€‰æ‹©ä¸€ä¸ªèµ„æº
            if (Selection.activeObject &amp;&amp; id == Selection.activeObject.GetInstanceID())
            {
                float width = 50f;
                float height = 20f;
                rect.x = rect.width - width;
                rect.width = width;
                rect.height = height;
                if (GUI.Button(rect, AssetDatabase.LoadAssetAtPath&lt;Texture&gt;(&quot;Assets/Unity.png&quot;)))
                {
                    Debug.LogFormat(&quot;click:{0}&quot;,Selection.activeObject.name);
                }
            }
        };
    }
}
</code></pre>
<h5 id="é‡å†™èœå•">é‡å†™èœå•</h5>
<pre><code class="language-c#">public class Extension
{
    [InitializeOnLoadMethod]
    static void StartInitializeOnLoadMethod() {
        EditorApplication.hierarchyWindowItemOnGUI += OnHierarchyGUI;
    }
    static void OnHierarchyGUI(int instanceId, Rect selectionRect) {
        if (Event.current != null 
            &amp;&amp; selectionRect.Contains(Event.current.mousePosition)
            &amp;&amp;Event.current.button==1&amp;&amp;Event.current.type&lt;=EventType.MouseUp) {
            GameObject selectedGameObject = EditorUtility.InstanceIDToObject(instanceId) as GameObject;
            if (selectedGameObject) {
                Vector2 mousePosition = Event.current.mousePosition;
                EditorUtility.DisplayPopupMenu(new Rect(mousePosition.x,mousePosition.y,0,0),&quot;Window/Test&quot;,null );
                Event.current.Use();
            }
        }
    }
    [MenuItem(&quot;Window/Test/tools1&quot;)]
    static void Test() {}
    [MenuItem(&quot;Window/Test/tools2&quot;)]
    static void Test1() { }
    [MenuItem(&quot;Window/Test/tools3&quot;)]
    static void Test2() { }
}
</code></pre>
<h4 id="æ‹“å±•inspectorè§†å›¾">æ‹“å±•Inspectorè§†å›¾</h4>
<h5 id="æ‹“å±•åŸç”Ÿç»„ä»¶">æ‹“å±•åŸç”Ÿç»„ä»¶</h5>
<pre><code class="language-c#">[CustomEditor(typeof(Camera))]
public class Extension:Editor{
    public override void OnInspectorGUI(){
        if (GUILayout.Button(&quot;extensionButton&quot;)) {/*function*/ }
        base.OnInspectorGUI();
    }
}
</code></pre>
<h5 id="æ‹“å±•ç»§æ‰¿ç»„ä»¶">æ‹“å±•ç»§æ‰¿ç»„ä»¶</h5>
<p>Unityå°†å¤§é‡çš„Editorç»˜åˆ¶æ–¹æ³•å°è£…åœ¨å†…éƒ¨DLLæ–‡ä»¶é‡Œï¼Œå¼€å‘è€…æ— æ³•è°ƒç”¨å®ƒçš„æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡åå°„çš„æ–¹å¼è°ƒç”¨å†…éƒ¨æœªå…¬å¼€çš„æ–¹æ³•ã€‚</p>
<pre><code class="language-C#">[CustomEditor(typeof(Transform))]
public class Extension:Editor{
    private Editor m_Editor;
    private void OnEnable(){
        m_Editor = Editor.CreateEditor(target,     Assembly.GetAssembly(typeof(Editor)).GetType(&quot;UnityEditor.TransformInspector&quot;, true));
    }
    public override void OnInspectorGUI(){
        if (GUILayout.Button(&quot;extensionButton&quot;)) { }
        GUI.enabled = false;//------------å¼€å§‹ç¦æ­¢
        m_Editor.OnInspectorGUI();//è°ƒç”¨ç³»ç»Ÿç»˜åˆ¶æ–¹æ³•
        GUI.enabled = true;//------------ç»“æŸç¦æ­¢
        if (GUILayout.Button(&quot;extensionButton2&quot;)) { }
    }
}
</code></pre>
<h5 id="ç»„ä»¶ä¸å¯ç¼–è¾‘">ç»„ä»¶ä¸å¯ç¼–è¾‘</h5>
<p>HideFlagå¯ä»¥ä½¿ç”¨æŒ‰ä½æˆ–(|)åŒæ—¶ä¿æŒå¤šä¸ªå±æ€§</p>
<pre><code class="language-c#">GUI.enabled = false;//------------å¼€å§‹ç¦æ­¢
////m_Editor.OnInspectorGUI();//è°ƒç”¨ç³»ç»Ÿç»˜åˆ¶æ–¹æ³•
GUI.enabled = true;//------------ç»“æŸç¦æ­¢

//å…¨å±€é”å®šä¸è§£é”ä¿®æ”¹
public class Extension{
    [MenuItem(&quot;GameObject/3D Object/Lock/Lock&quot;)]
    static void Lock(){
        if (Selection.gameObjects != null){
            foreach (var gameObject in Selection.gameObjects)       			                       gameObject.hideFlags = HideFlags.NotEditable;
        }
    }
    [MenuItem(&quot;GameObject/3D Object/Lock/Unlock&quot;)]
    static void Unlock(){
        if (Selection.gameObjects != null){
            foreach (var gameObject in Selection.gameObjects) {
                gameObject.hideFlags = HideFlags.None;
            }
        }
    }
}
</code></pre>
<h5 id="contextèœå•">Contextèœå•</h5>
<p>Inspectorä¸­çš„ç»„ä»¶å³é”®èœå•ï¼Œå¦‚æœæƒ³ç»™æ‰€æœ‰ç»„ä»¶éƒ½æ·»åŠ ä¸Šè¯¥èœå•<code>Transform</code>&gt;&gt;&gt;<code>Component</code></p>
<pre><code class="language-c#">public class Extension {
    [MenuItem(&quot;CONTEXT/Transform/NewContext1&quot;)]
    static void NewContext1(MenuCommand command) {
        Debug.Log(command.context.name);
    }
}
</code></pre>
<p>è¯¥è®¾ç½®ä¹Ÿå¯ä»¥ç”¨åœ¨è‡ªå·±å†™çš„è„šæœ¬ä¸­,ç”¨äºè¯»å–å’Œå†™å…¥ç»„ä»¶å±æ€§</p>
<pre><code class="language-c#">using UnityEngine;
#if UNITY_EDITOR
using UnityEditor;
#endif
public class Extension:MonoBehaviour{
    public string contextName;
    #if UNITY_EDITOR
    [MenuItem(&quot;CONTEXT/Extension/NewContext1&quot;)]
    static void NewContext1(MenuCommand command) {
        Extension extension = command.context as Extension;
        if(extension!=null)extension.contextName = &quot;HelloWorld&quot;;
    }
    #endif
}
//#if UNITY_EDITOR     #endifåªä¼šåœ¨Editoræ¨¡å¼ä¸‹æ‰§è¡Œï¼Œå‘å¸ƒåä¼šè¢«å‰”é™¤
</code></pre>
<p>å¦‚æœè‡ªå®šä¹‰èœå•å’Œç³»ç»Ÿèœå•é¡¹ç›®é‡åï¼Œè¿˜å¯ä»¥è¦†ç›–</p>
<pre><code class="language-c#">[ContextMenu(&quot;Remove Component&quot;)]
void RemoveComponent(){
    Debug.Log(&quot;RemoveComponent&quot;);
    //ç­‰ä¸€ä¼šåœ¨åˆ é™¤è‡ªå·±
    UnityEditor.EditorApplication.delayCall = delegate(){DestoryImmediate(this);};
}
</code></pre>
<h4 id="æ‹“å±•sceneè§†å›¾">æ‹“å±•Sceneè§†å›¾</h4>
<h5 id="è¾…åŠ©å…ƒç´ è¯¥ç±»ä¸åœ¨editorç›®å½•ä¸‹">è¾…åŠ©å…ƒç´ ï¼ˆè¯¥ç±»ä¸åœ¨Editorç›®å½•ä¸‹ï¼‰</h5>
<pre><code class="language-c#">public class Extension:MonoBehaviour{
    private void OnDrawGizmosSelected(){
        Gizmos.color = Color.red;
        Gizmos.DrawLine(transform.position,Vector3.zero);
        Gizmos.DrawCube(Vector3.zero, Vector3.one);
        //å…¶ä»–Gizmos.function()
    }
    //è¾…åŠ©å…ƒç´ ä¸ä¾èµ–é€‰æ‹©å¯¹è±¡å‡ºç°(å§‹ç»ˆæ˜¾ç¤ºzaiSceneè§†å›¾ä¸­)
    private void OnDrawGizmos(){
        Gizmos.DrawSphere(transform.position,1);
    }
}
</code></pre>
<h5 id="è¾…åŠ©ui">è¾…åŠ©UI</h5>
<p>åœ¨Sceneä¸­æˆ‘ä»¬å¯ä»¥æ·»åŠ EditorGUIï¼Œæ–¹ä¾¿åœ¨è§†å›¾ä¸­å¤„ç†ä¸€äº›æ“ä½œã€‚EditorGUIçš„ä»£ç éœ€è¦åœ¨**Handles.BeginGUI()<strong>å’Œ</strong>Handles.EndGUI()**ä¸­é—´ç»˜åˆ¶å®Œæˆã€‚</p>
<pre><code class="language-c#">[CustomEditor(typeof(Camera))]
public class Extension:Editor{
    private void OnSceneGUI(){
        Camera camera = target as Camera;
        if (camera != null){
            Handles.color = Color.red;
         Handles.Label(camera.transform.position,camera.transform.position.ToString());
            Handles.BeginGUI();
            GUI.backgroundColor = Color.red;
            if (GUILayout.Button(&quot;click&quot;, GUILayout.Width(200f))){
                Debug.LogFormat(&quot;click={0}&quot;,camera.name);
            }
            GUILayout.Label(&quot;Label&quot;);
            Handles.EndGUI();
        }
    }
}
</code></pre>
<h5 id="å¸¸é©»è¾…åŠ©ui">å¸¸é©»è¾…åŠ©UI</h5>
<pre><code class="language-c#">public class Extension{
    [InitializeOnLoadMethod]
    static void InitializeOnLoadMethod(){
        SceneView.duringSceneGui += delegate(SceneView sceneView){
            Handles.BeginGUI();
            GUI.Label(new Rect(0,0,50,15),&quot;title&quot; );
            GUI.Button(new Rect(0, 20, 50, 50)
                , AssetDatabase.GetBuiltinExtraResource&lt;Texture&gt;(&quot;Assets/unity.png&quot;));
            Handles.EndGUI();
        };
    }
}
</code></pre>
<h5 id="ç¦ç”¨é€‰ä¸­å¯¹è±¡">ç¦ç”¨é€‰ä¸­å¯¹è±¡</h5>
<pre><code class="language-c#">public class Extension{
    [InitializeOnLoadMethod]
    static void InitializeOnLoadMethod(){
        SceneView.duringSceneGui += delegate(SceneView sceneView){
            Event e = Event.current;
            if (e != null){
                //è·å–å®ƒçš„controllIDåï¼Œå³å¯ç¦æ­¢å°†ç‚¹å‡»äº‹ä»¶ç©¿é€ä¸‹å»
                //è¡¨ç¤ºç¦æ­¢æ¥æ”¶æ§åˆ¶ç„¦ç‚¹
                int controlID = GUIUtility.GetControlID(FocusType.Passive);
                if (e.type == EventType.Layout){
                    HandleUtility.AddDefaultControl(controlID);
                }
            }
        };
    }
}
</code></pre>
<h4 id="æ‹“å±•gameè§†å›¾">æ‹“å±•Gameè§†å›¾</h4>
<p>Gameè§†å›¾æ‹“å±•åˆ†**1.<strong>è¿è¡Œæ¨¡å¼</strong>2.**éè¿è¡Œæ¨¡å¼</p>
<pre><code class="language-C#">#if UNITY_EDITOR
[ExecuteInEditMode]//éè¿è¡Œæ¨¡å¼ä¸‹ä¹Ÿä¼šæ‰§è¡Œä»£ç çš„ç”Ÿå‘½å‘¨æœŸ
public class Extension:MonoBehaviour{
    void OnGUI(){
        if(GUILayout.Button(&quot;Click&quot;)){
            Debug.Log(&quot;Click!&quot;);
        }
        GUILayout.Label(&quot;HelloWorld&quot;);
    }
}
#endif
</code></pre>
<h4 id="menuitemèœå•">MenuItemèœå•</h4>
<h5 id="è¦†ç›–ç³»ç»Ÿèœå•">è¦†ç›–ç³»ç»Ÿèœå•</h5>
<pre><code class="language-c#">[MenuItem(&quot;GameObject/UI/Text&quot;)]
static void CreateNewText(){
    //todo
}
</code></pre>
<h5 id="è‡ªå®šä¹‰èœå•">è‡ªå®šä¹‰èœå•</h5>
<pre><code class="language-c#">[MenuItem(&quot;Root/TestCheck&quot;,false,1)]
static void checkFunction() {
    var menuPath = &quot;Root/TestCheck&quot;;
    bool m_Checked = Menu.GetChecked(menuPath);
    Menu.SetChecked(menuPath,!m_Checked);
}
[MenuItem(&quot;Root/TestGray&quot;)]
static void grayFunction() { }
[MenuItem(&quot;Root/TestGray&quot;,true,20)]
static bool grayFunctionValidate() {
    return false;//falseè¡¨ç¤ºç½®ç°ï¼Œä¸å¯ç‚¹å‡»
}
</code></pre>
<h4 id="é¢æ¿æ‹“å±•">é¢æ¿æ‹“å±•</h4>
<h5 id="inspectoré¢æ¿">Inspectoré¢æ¿</h5>
<pre><code class="language-C#">#if UNITY_EDITOR
using UnityEditor;
#endif
using UnityEditor.Experimental.TerrainAPI;
using UnityEngine;

#if UNITY_EDITOR
[CustomEditor(typeof(PoJo))]
public class Extension:Editor
{
    private bool m_EnableToogle;
    public override void OnInspectorGUI()
    {
        PoJo poJo = target as PoJo;
        poJo.scrollPos = EditorGUILayout.BeginScrollView(poJo.scrollPos, false, true);
        poJo.myName = EditorGUILayout.TextField(&quot;text&quot;, poJo.myName);
        poJo.myId = EditorGUILayout.IntField(&quot;int&quot;, poJo.myId);

        poJo.prefab = EditorGUILayout.ObjectField(&quot;GameObject&quot;, poJo.prefab,typeof(GameObject),true)as GameObject;
        //ç»˜åˆ¶æŒ‰é’®
        EditorGUILayout.BeginHorizontal();
        GUILayout.Button(&quot;1&quot;);
        GUILayout.Button(&quot;2&quot;);
        poJo.myEnum = (PoJo.MyEnum) EditorGUILayout.EnumPopup(&quot;MyEnum:&quot;, poJo.myEnum);
        EditorGUILayout.EndHorizontal();
        
        //toogle component
        m_EnableToogle = EditorGUILayout.BeginToggleGroup(&quot;EnableToogle&quot;, m_EnableToogle);
        poJo.toogle1 = EditorGUILayout.Toggle(&quot;toogle1&quot;, poJo.toogle1);
        poJo.toogle2 = EditorGUILayout.Toggle(&quot;toogle2&quot;, poJo.toogle2);
        EditorGUILayout.EndToggleGroup();
        EditorGUILayout.EndScrollView();
    }
}
#endif
</code></pre>
<h5 id="ç¼–è¾‘å™¨çª—å£editor-window">ç¼–è¾‘å™¨çª—å£Editor Window</h5>
<pre><code class="language-c#">public class CustomWindow:EditorWindow,IHasCustomMenu
{
    [MenuItem(&quot;Window/CustomWindow&quot;)]
    static void Init(){
        CustomWindow window = (CustomWindow) EditorWindow.GetWindow(typeof(CustomWindow));
        window.Show();
    }
    private Texture m_MyTexture = null;
    private float m_MyFloat = 0.5f;
    private void Awake(){
        Debug.LogFormat(&quot;çª—å£åˆå§‹åŒ–è°ƒç”¨&quot;);
        m_MyTexture = AssetDatabase.LoadAssetAtPath&lt;Texture&gt;(&quot;Assets/unity.png&quot;);
    }
    private void OnGUI(){
        GUILayout.Label(&quot;HelloWorld&quot;,EditorStyles.boldLabel);
        m_MyFloat = EditorGUILayout.Slider(&quot;Slide&quot;, m_MyFloat, -5, 5);
        GUI.DrawTexture(new Rect(0,30,100,100),m_MyTexture);
    }
    private void OnDestroy(){/*é”€æ¯æ—¶è°ƒç”¨*/}
    private void OnFocus(){/*æ‹¥æœ‰ç„¦ç‚¹æ—¶è°ƒç”¨*/}
    private void OnHierarchyChange(){/*hierarchyè§†å›¾å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨*/}
    private void OnInspectorUpdate(){/*Inspectoræ¯å¸§æ›´æ–°*/}
    private void OnLostFocus(){ /*å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨*/}
    private void OnProjectChange(){/*Projectè§†å›¾å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨*/}
    private void OnSelectionChange(){/*åœ¨hierarchyæˆ–projectè§†å›¾ä¸­é€‰æ‹©ä¸€ä¸ªå¯¹è±¡æ—¶è°ƒç”¨*/}
    private void Update(){/*æ¯å¸§è°ƒç”¨*/}
    public void AddItemsToMenu(GenericMenu menu){
        menu.AddDisabledItem(new GUIContent(&quot;Disable&quot;));
        menu.AddItem(new GUIContent(&quot;Test1&quot;),true, () =&gt;{/*todo*/});
        menu.AddSeparator(&quot;Test/&quot;);
        menu.AddItem(new GUIContent(&quot;Test/Test3&quot;),true, () =&gt; { });
    }
}
</code></pre>
<h4 id="è‡ªå®šä¹‰å¯¼å…¥ç±»å‹">è‡ªå®šä¹‰å¯¼å…¥ç±»å‹</h4>
<pre><code class="language-c#">[ScriptedImporter(1,&quot;custom&quot;)]
public class ImportListener : ScriptedImporter{
    public override void OnImportAsset(AssetImportContext ctx){
        var cube = GameObject.CreatePrimitive(PrimitiveType.Cube);
        var position = JsonUtility.FromJson&lt;Vector3&gt;(File.ReadAllText(ctx.assetPath));
        cube.transform.position = position;
        cube.transform.localScale = Vector3.one;
        ctx.AddObjectToAsset(&quot;obj&quot;,cube);
        ctx.SetMainObject(cube);
        //æ·»åŠ æè´¨
        var material = new Material(Shader.Find(&quot;Standard&quot;));
        material.color = Color.red;
        ctx.AddObjectToAsset(&quot;material&quot;,material);
        var tempMesh = new Mesh();
        DestroyImmediate(tempMesh);
    }
}
</code></pre>
<h3 id="æ¸¸æˆè„šæœ¬">æ¸¸æˆè„šæœ¬</h3>
<h5 id="è„šæœ¬åºåˆ—åŒ–">è„šæœ¬åºåˆ—åŒ–</h5>
<pre><code class="language-c#">#if UNITY_EDITOR
[CustomEditor(typeof(SerializedClass))]
public class ScriptInspector : Editor{
    public override void OnInspectorGUI(){
        serializedObject.Update();//æ›´æ–°æœ€æ–°æ•°æ®
        EditorGUI.BeginChangeCheck();//æ ‡è®°æ£€æŸ¥
        SerializedProperty property = serializedObject.FindProperty(&quot;id&quot;);//è·å–æ•°æ®ä¿¡æ¯
        property.intValue = EditorGUILayout.IntField(&quot;ä¸»é”®&quot;, property.intValue);//ä¿å­˜æ•°æ®
        property = serializedObject.FindProperty(&quot;name&quot;);
        property.stringValue = EditorGUILayout.TextField(&quot;å§“å&quot;, property.stringValue);
        property = serializedObject.FindProperty(&quot;prefab&quot;);
        property.objectReferenceValue = EditorGUILayout.ObjectField(&quot;æ¸¸æˆå¯¹è±¡&quot;,property.objectReferenceValue,typeof(GameObject),true);
        EditorGUILayout.PropertyField(serializedObject.FindProperty(&quot;targets&quot;), true);
        //æ ‡è®°æ£€æŸ¥å‘ç”Ÿå˜åŒ–
        if (EditorGUI.EndChangeCheck());//æ ‡è®°æ£€æŸ¥å‘ç”Ÿå˜åŒ–
        if (GUI.changed);//åˆ¤æ–­é¢æ¿å…ƒç´ å˜åŒ–
        //ä¿å­˜å…¨éƒ¨æ•°æ®
        serializedObject.ApplyModifiedProperties();
    }
}
#endif
</code></pre>
<h5 id="åºåˆ—åŒ–ååºåˆ—åŒ–">åºåˆ—åŒ–ååºåˆ—åŒ–</h5>
<pre><code class="language-c#">public class SerializedClass:MonoBehaviour,ISerializationCallbackReceiver{
    [SerializeField] private List&lt;Sprite&gt; m_Values = new List&lt;Sprite&gt;();
    [SerializeField]private List&lt;string&gt; m_Keys = new List&lt;string&gt;();
    public Dictionary&lt;string, Sprite&gt; m_SpriteDic = new Dictionary&lt;string, Sprite&gt;();
    public void OnBeforeSerialize(){
        m_Keys.Clear();
        m_Values.Clear();
        foreach (KeyValuePair&lt;string,Sprite&gt; pair in m_SpriteDic){
            m_Keys.Add(pair.Key);
            m_Values.Add(pair.Value);
        }
    }
    public void OnAfterDeserialize(){
        m_SpriteDic.Clear();
        for (int i = 0; i &lt; m_Keys.Count; i++){
            m_SpriteDic[m_Keys[i]] = m_Values[i];
        }
    }
}

#if UNITY_EDITOR
[CustomEditor(typeof(SerializedClass))]
public class Extension:Editor{
    public override void OnInspectorGUI(){
        serializedObject.Update();
        SerializedProperty propertyKey = serializedObject.FindProperty(&quot;m_Keys&quot;);
        SerializedProperty propertyValue = serializedObject.FindProperty(&quot;m_Values&quot;);
        GUILayout.BeginVertical();
        for (int i = 0; i &lt; propertyKey.arraySize; i++){
            GUILayout.BeginHorizontal();
            SerializedProperty key = propertyKey.GetArrayElementAtIndex(i);
            SerializedProperty value = propertyValue.GetArrayElementAtIndex(i);
            key.stringValue = EditorGUILayout.TextField(&quot;Key&quot;, key.stringValue);
            value.objectReferenceValue =
                EditorGUILayout.ObjectField(&quot;Value&quot;, value.objectReferenceValue, typeof(Sprite),false);
            GUILayout.EndHorizontal();
        }
        GUILayout.EndVertical();
        GUILayout.BeginHorizontal();
        if (GUILayout.Button(&quot;+&quot;)){
            (target as SerializedClass).m_SpriteDic[propertyKey.arraySize.ToString()] = null;
        }
        GUILayout.EndHorizontal();
        serializedObject.ApplyModifiedProperties();
    }
}
#endif
</code></pre>
<h5 id="scriptable-object">Scriptable Object</h5>
<pre><code class="language-C#">//èœå•ç‚¹å‡»ç”Ÿæˆ
[CreateAssetMenu]
public class Displayer : ScriptableObject{
    [SerializeField] public List&lt;DisplayerInfo&gt; m_DisplayerInfo;
    [Serializable]public class DisplayerInfo{
        public int id;
        public string name;
    }
}
public class DisplayerReader : MonoBehaviour{
    private void Start(){
        Displayer display = Resources.Load&lt;Displayer&gt;(&quot;Path&quot;);//è¯»å–
    }
}
</code></pre>
<pre><code class="language-c#">public class Extension{
    [MenuItem(&quot;Assets/Create ScriptableObject&quot;)]
    static void CreateScriptableObject(){
        Displayer displayer = ScriptableObject.CreateInstance&lt;Displayer&gt;();
        displayer.m_DisplayerInfo = new List&lt;Displayer.DisplayerInfo&gt;();
        displayer.m_DisplayerInfo.Add(new Displayer.DisplayerInfo() {id = 100, name = &quot;test&quot;});
        //å°†èµ„æºä¿å­˜åˆ°æœ¬åœ°
        AssetDatabase.CreateAsset(displayer,&quot;Assets/Resources/displayer.asset&quot;);
        AssetDatabase.SaveAssets();
        AssetDatabase.Refresh();
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Unity InAction]]></title>
        <id>https://sunxiaohang.github.io/post/unity-inaction/</id>
        <link href="https://sunxiaohang.github.io/post/unity-inaction/">
        </link>
        <updated>2020-02-06T12:09:00.000Z</updated>
        <summary type="html"><![CDATA[<p>Untiyå¸¸ç”¨é€»è¾‘ä»£ç çš„å®ç°æ–¹å¼ï¼Œå½’çº³æ€»ç»“ï¼Œç”¨äºæ ‡å‡†åŒ–ä»£ç ç»“æ„ï¼Œå·©å›ºåŠ å¼ºï¼ŒåŒ…æ‹¬åŸºæœ¬çš„å¹³ç§»æ—‹è½¬ç¼©æ”¾æ“ä½œï¼Œç›¸æœºè§†è§’å˜æ¢ï¼ŒCinemachineï¼Œè‡ªå®šä¹‰trackï¼Œè¡¨ç°ç»„ï¼Œä»¥åŠplayableæ¥å£çš„è‡ªå®šä¹‰å®ç°ã€‚æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€äº›å°trickæ ‡å‡†å®ç°ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Untiyå¸¸ç”¨é€»è¾‘ä»£ç çš„å®ç°æ–¹å¼ï¼Œå½’çº³æ€»ç»“ï¼Œç”¨äºæ ‡å‡†åŒ–ä»£ç ç»“æ„ï¼Œå·©å›ºåŠ å¼ºï¼ŒåŒ…æ‹¬åŸºæœ¬çš„å¹³ç§»æ—‹è½¬ç¼©æ”¾æ“ä½œï¼Œç›¸æœºè§†è§’å˜æ¢ï¼ŒCinemachineï¼Œè‡ªå®šä¹‰trackï¼Œè¡¨ç°ç»„ï¼Œä»¥åŠplayableæ¥å£çš„è‡ªå®šä¹‰å®ç°ã€‚æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€äº›å°trickæ ‡å‡†å®ç°ã€‚</p>
<!-- more -->
<h4 id="movement">Movement</h4>
<pre><code>public class FPSInput : MonoBehaviour
{
    public float m_speed = 6.0f;
    private CharacterController m_CharacterController;
    public float gravity = -9.8f;

    private void Start()
    {
        m_CharacterController = GetComponent&lt;CharacterController&gt;();
    }

    private void Update()
    {
        //ç§»åŠ¨çš„ä»£ç ä¾èµ–äºæ¸¸æˆçš„å¸§ç‡ï¼Œframe rate dependence
        float deltaX = Input.GetAxis(&quot;Horizontal&quot;) * m_speed;
        float deltaZ = Input.GetAxis(&quot;Vertical&quot;) * m_speed;
        Vector3 movement = new Vector3(deltaX,0,deltaZ);
        movement = Vector3.ClampMagnitude(movement, m_speed) * Time.deltaTime;//ä½¿å¯¹è§’ç§»åŠ¨çš„é€Ÿåº¦å’Œæ²¿è½´ç§»åŠ¨çš„é€Ÿåº¦ä¸€æ ·
        movement = transform.TransformDirection(movement);//æŠŠmovementå‘é‡ä¸›æœ¬åœ°åæ ‡å˜æ¢ä¸ºå…¨å±€åæ ‡
        movement.y = gravity;
        m_CharacterController.Move(movement);
    }
}
</code></pre>
<h4 id="rotation">Rotation</h4>
<pre><code>public class MouseLook : MonoBehaviour
{
    public enum RotationAxes
    {
        MouseXAndY,
        MouseX,
        MouseY
    }

    public RotationAxes axes = RotationAxes.MouseXAndY;
    public float sensitivityHor = 9.0f;
    public float sensitivityVert = 9.0f;
    public float miniMumVert = -45.0f;
    public float maxiMumVert = 45.0f;
    private float _rotationX = 0;
    private Rigidbody m_Rigidbody;

    private void Start()
    {
        m_Rigidbody = GetComponent&lt;Rigidbody&gt;();
        if(m_Rigidbody!=null)m_Rigidbody.freezeRotation = true;
    }

    private void Update()
    {
        if (axes == RotationAxes.MouseX)
        {
            transform.Rotate(0,Input.GetAxisRaw(&quot;Mouse X&quot;)*sensitivityHor,0);
        }
        else if (axes == RotationAxes.MouseY)
        {
            _rotationX -= Input.GetAxis(&quot;Mouse Y&quot;) * sensitivityVert;
            _rotationX = Mathf.Clamp(_rotationX,miniMumVert,maxiMumVert);
            float rotationY = transform.localEulerAngles.y;//è·å–å½“å‰yè½´çš„æ¬§æ‹‰è§’
            transform.localEulerAngles = new Vector3(_rotationX,rotationY,0);
        }
        else if (axes == RotationAxes.MouseXAndY)
        {
            _rotationX -= Input.GetAxis(&quot;Mouse Y&quot;) * sensitivityHor;
            _rotationX = Mathf.Clamp(_rotationX, miniMumVert, maxiMumVert);
            float rotationY = Input.GetAxis(&quot;Mouse X&quot;) * sensitivityVert+transform.localEulerAngles.y;
            transform.localEulerAngles = new Vector3(_rotationX,rotationY,0);
        }
    }
}
</code></pre>
<h4 id="messenger">Messenger</h4>
<pre><code>using System;
using System.Collections.Generic;
using System.Linq;
 
public enum MessengerMode {
    DONT_REQUIRE_LISTENER,
    REQUIRE_LISTENER,
}
 
static internal class MessengerInternal {
    readonly public static Dictionary&lt;string, Delegate&gt; eventTable = new Dictionary&lt;string, Delegate&gt;();
    static public MessengerMode DEFAULT_MODE = MessengerMode.REQUIRE_LISTENER;
 
    static public void AddListener(string eventType, Delegate callback) {
        MessengerInternal.OnListenerAdding(eventType, callback);
        eventTable[eventType] = Delegate.Combine(eventTable[eventType], callback);
    }
 
    static public void RemoveListener(string eventType, Delegate handler) {
        MessengerInternal.OnListenerRemoving(eventType, handler);   
        eventTable[eventType] = Delegate.Remove(eventTable[eventType], handler);
        MessengerInternal.OnListenerRemoved(eventType);
    }
 
    static public T[] GetInvocationList&lt;T&gt;(string eventType) {
        Delegate d;
        if(eventTable.TryGetValue(eventType, out d)) {
            try {
                return d.GetInvocationList().Cast&lt;T&gt;().ToArray();
            } catch {
                throw MessengerInternal.CreateBroadcastSignatureException(eventType);
            }
        }
        return new T[0];
    }
 
    static public void OnListenerAdding(string eventType, Delegate listenerBeingAdded) {
        if (!eventTable.ContainsKey(eventType)) {
            eventTable.Add(eventType, null);
        }
 
        var d = eventTable[eventType];
        if (d != null &amp;&amp; d.GetType() != listenerBeingAdded.GetType()) {
            throw new ListenerException(string.Format(&quot;Attempting to add listener with inconsistent signature for event type {0}. Current listeners have type {1} and listener being added has type {2}&quot;, eventType, d.GetType().Name, listenerBeingAdded.GetType().Name));
        }
    }
 
    static public void OnListenerRemoving(string eventType, Delegate listenerBeingRemoved) {
        if (eventTable.ContainsKey(eventType)) {
            var d = eventTable[eventType];
 
            if (d == null) {
                throw new ListenerException(string.Format(&quot;Attempting to remove listener with for event type {0} but current listener is null.&quot;, eventType));
            } else if (d.GetType() != listenerBeingRemoved.GetType()) {
                throw new ListenerException(string.Format(&quot;Attempting to remove listener with inconsistent signature for event type {0}. Current listeners have type {1} and listener being removed has type {2}&quot;, eventType, d.GetType().Name, listenerBeingRemoved.GetType().Name));
            }
        } else {
            throw new ListenerException(string.Format(&quot;Attempting to remove listener for type {0} but Messenger doesn't know about this event type.&quot;, eventType));
        }
    }
 
    static public void OnListenerRemoved(string eventType) {
        if (eventTable[eventType] == null) {
            eventTable.Remove(eventType);
        }
    }
 
    static public void OnBroadcasting(string eventType, MessengerMode mode) {
        if (mode == MessengerMode.REQUIRE_LISTENER &amp;&amp; !eventTable.ContainsKey(eventType)) {
            throw new MessengerInternal.BroadcastException(string.Format(&quot;Broadcasting message {0} but no listener found.&quot;, eventType));
        }
    }
 
    static public BroadcastException CreateBroadcastSignatureException(string eventType) {
        return new BroadcastException(string.Format(&quot;Broadcasting message {0} but listeners have a different signature than the broadcaster.&quot;, eventType));
    }
 
    public class BroadcastException : Exception {
        public BroadcastException(string msg)
            : base(msg) {
        }
    }
 
    public class ListenerException : Exception {
        public ListenerException(string msg)
            : base(msg) {
        }
    }
}
 
// No parameters
static public class Messenger { 
    static public void AddListener(string eventType, Action handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void AddListener&lt;TReturn&gt;(string eventType, Func&lt;TReturn&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void RemoveListener(string eventType, Action handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void RemoveListener&lt;TReturn&gt;(string eventType, Func&lt;TReturn&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void Broadcast(string eventType) {
        Broadcast(eventType, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, Action&lt;TReturn&gt; returnCall) {
        Broadcast(eventType, returnCall, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast(string eventType, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Action&gt;(eventType);
 
        foreach(var callback in invocationList)
            callback.Invoke();
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, Action&lt;TReturn&gt; returnCall, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Func&lt;TReturn&gt;&gt;(eventType);
 
        foreach(var result in invocationList.Select(del =&gt; del.Invoke()).Cast&lt;TReturn&gt;()) {
            returnCall.Invoke(result);
        }
    }
}
 
// One parameter
static public class Messenger&lt;T&gt; {
    static public void AddListener(string eventType, Action&lt;T&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void AddListener&lt;TReturn&gt;(string eventType, Func&lt;T, TReturn&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void RemoveListener(string eventType, Action&lt;T&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void RemoveListener&lt;TReturn&gt;(string eventType, Func&lt;T, TReturn&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void Broadcast(string eventType, T arg1) {
        Broadcast(eventType, arg1, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, T arg1, Action&lt;TReturn&gt; returnCall) {
        Broadcast(eventType, arg1, returnCall, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast(string eventType, T arg1, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Action&lt;T&gt;&gt;(eventType);
 
        foreach(var callback in invocationList)
            callback.Invoke(arg1);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, T arg1, Action&lt;TReturn&gt; returnCall, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Func&lt;T, TReturn&gt;&gt;(eventType);
 
        foreach(var result in invocationList.Select(del =&gt; del.Invoke(arg1)).Cast&lt;TReturn&gt;()) {
            returnCall.Invoke(result);
        }
    }
}
 
 
// Two parameters
static public class Messenger&lt;T, U&gt; { 
    static public void AddListener(string eventType, Action&lt;T, U&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void AddListener&lt;TReturn&gt;(string eventType, Func&lt;T, U, TReturn&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void RemoveListener(string eventType, Action&lt;T, U&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void RemoveListener&lt;TReturn&gt;(string eventType, Func&lt;T, U, TReturn&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void Broadcast(string eventType, T arg1, U arg2) {
        Broadcast(eventType, arg1, arg2, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, T arg1, U arg2, Action&lt;TReturn&gt; returnCall) {
        Broadcast(eventType, arg1, arg2, returnCall, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast(string eventType, T arg1, U arg2, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Action&lt;T, U&gt;&gt;(eventType);
 
        foreach(var callback in invocationList)
            callback.Invoke(arg1, arg2);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, T arg1, U arg2, Action&lt;TReturn&gt; returnCall, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Func&lt;T, U, TReturn&gt;&gt;(eventType);
 
        foreach(var result in invocationList.Select(del =&gt; del.Invoke(arg1, arg2)).Cast&lt;TReturn&gt;()) {
            returnCall.Invoke(result);
        }
    }
}
 
 
// Three parameters
static public class Messenger&lt;T, U, V&gt; { 
    static public void AddListener(string eventType, Action&lt;T, U, V&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void AddListener&lt;TReturn&gt;(string eventType, Func&lt;T, U, V, TReturn&gt; handler) {
        MessengerInternal.AddListener(eventType, handler);
    }
 
    static public void RemoveListener(string eventType, Action&lt;T, U, V&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void RemoveListener&lt;TReturn&gt;(string eventType, Func&lt;T, U, V, TReturn&gt; handler) {
        MessengerInternal.RemoveListener(eventType, handler);
    }
 
    static public void Broadcast(string eventType, T arg1, U arg2, V arg3) {
        Broadcast(eventType, arg1, arg2, arg3, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, T arg1, U arg2, V arg3, Action&lt;TReturn&gt; returnCall) {
        Broadcast(eventType, arg1, arg2, arg3, returnCall, MessengerInternal.DEFAULT_MODE);
    }
 
    static public void Broadcast(string eventType, T arg1, U arg2, V arg3, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Action&lt;T, U, V&gt;&gt;(eventType);
 
        foreach(var callback in invocationList)
            callback.Invoke(arg1, arg2, arg3);
    }
 
    static public void Broadcast&lt;TReturn&gt;(string eventType, T arg1, U arg2, V arg3, Action&lt;TReturn&gt; returnCall, MessengerMode mode) {
        MessengerInternal.OnBroadcasting(eventType, mode);
        var invocationList = MessengerInternal.GetInvocationList&lt;Func&lt;T, U, V, TReturn&gt;&gt;(eventType);
 
        foreach(var result in invocationList.Select(del =&gt; del.Invoke(arg1, arg2, arg3)).Cast&lt;TReturn&gt;()) {
            returnCall.Invoke(result);
        }
    }
}
</code></pre>
<h4 id="playable">Playable</h4>
<pre><code>//---------------------------------------------------
//-----------------------æ’­æ”¾åŠ¨ç”»-------------------
public class PlayAnimation : MonoBehaviour
{
    public AnimationClip AnimationClip1;
    public AnimationClip AnimationClip2;

    private PlayableGraph m_PlayableGraph;
    private void OnGUI()
    {
        if (GUILayout.Button(&quot;&lt;size=80&gt;play clips1&lt;/size&gt;&quot;))
        {
            AnimationPlayableUtilities.PlayClip(GetComponent&lt;Animator&gt;(),AnimationClip1,out m_PlayableGraph);
        }
        if (GUILayout.Button(&quot;&lt;size=80&gt;play clips2&lt;/size&gt;&quot;))
        {
            AnimationPlayableUtilities.PlayClip(GetComponent&lt;Animator&gt;(),AnimationClip2,out m_PlayableGraph);
        }
    }

    private void OnDisable()
    {
        m_PlayableGraph.Destroy();
    }
}
//---------------------------------------------------
//---------------------PlayableAssets--------------
//è‡ªå®šä¹‰timeline assets
[Serializable]
public class CustomPlayableAssets : PlayableAsset
{
    public ExposedReference&lt;GameObject&gt; ExposedReference;
    public override Playable CreatePlayable(PlayableGraph graph, GameObject owner)
    {
        CustomPlayableBehaviour behaviour = new CustomPlayableBehaviour();
        behaviour.eposedObjectValue = ExposedReference.Resolve(graph.GetResolver());
        return ScriptPlayable&lt;CustomPlayableBehaviour&gt;.Create(graph, behaviour);
    }
}

//è‡ªå®šä¹‰timeline behaviour
public class CustomPlayableBehaviour : PlayableBehaviour
{
    //graphStart&gt;&gt;BehaviourPause&gt;&gt;BehaviourStart&gt;&gt;BehaviourPause&gt;&gt;graphStop
    //æ¥æ”¶åºåˆ—åŒ–å¯¹è±¡
    public GameObject eposedObjectValue;

    //graphå¼€å§‹è¿è¡Œæ—¶è°ƒç”¨
    public override void OnGraphStart(Playable playable)
    {
        base.OnGraphStart(playable);
    }
    //graphç»“æŸæ—¶è°ƒç”¨
    public override void OnGraphStop(Playable playable)
    {
        base.OnGraphStop(playable);
    }
    //playableæ’­æ”¾æ—¶è°ƒç”¨
    public override void OnBehaviourPlay(Playable playable, FrameData info)
    {
        base.OnBehaviourPlay(playable, info);
    }
    //playableæš‚åœæ—¶è°ƒç”¨
    public override void OnBehaviourPause(Playable playable, FrameData info)
    {
        base.OnBehaviourPause(playable, info);
    }
    //æ¯å¸§è°ƒç”¨
    public override void PrepareFrame(Playable playable, FrameData info)
    {
        //å¯èƒ½æ­¤æ—¶è¿˜æ²¡ç»‘å®šå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦åˆ¤ç©º
        if (eposedObjectValue != null)
        {
            PlayableDirector director = playable.GetGraph&lt;Playable&gt;().GetResolver() as PlayableDirector;
            Debug.LogFormat(&quot;PlayableDirector:{0},eposedObjectValue:{1}&quot;,director.gameObject.name,eposedObjectValue.name);
        }
    }
}
//---------------------------------------------------
//-----------------------è‡ªå®šä¹‰track----------------
[TrackColor(1f,0f,0f)]
[TrackClipType(typeof(CustomPlayableAssets))]
[TrackBindingType(typeof(CustomTrack))]
public class CustomTrack : TrackAsset
{
    protected override Playable CreatePlayable(PlayableGraph graph, GameObject gameObject, TimelineClip clip)
    {
        return base.CreatePlayable(graph, gameObject, clip);
    }

    public override Playable CreateTrackMixer(PlayableGraph graph, GameObject go, int inputCount)
    {
        return base.CreateTrackMixer(graph, go, inputCount);
    }
}

//---------------------------------------------------
//-----------------------åŠ¨ç”»èåˆ-------------------
public class CustomPlayMixer : MonoBehaviour
{
    public AnimationClip AnimationClip1;
    public AnimationClip AnimationClip2;
    public float weight;
    private PlayableGraph m_PlayableGraph;
    private AnimationMixerPlayable m_AnimationMixerPlayable;
    private void Start()
    {
        m_AnimationMixerPlayable =
            AnimationPlayableUtilities.PlayMixer(GetComponent&lt;Animator&gt;(), 2, out m_PlayableGraph);
        AnimationClipPlayable clipPlayable1 = AnimationClipPlayable.Create(m_PlayableGraph,AnimationClip1);
        AnimationClipPlayable clipPlayable2 = AnimationClipPlayable.Create(m_PlayableGraph,AnimationClip2);
        m_PlayableGraph.Connect(clipPlayable1, 0, m_AnimationMixerPlayable, 0);
        m_PlayableGraph.Connect(clipPlayable2, 0, m_AnimationMixerPlayable, 1);
        AnimationPlayableOutput output = AnimationPlayableOutput.Create(m_PlayableGraph,&quot;AnimationOutput&quot;,GetComponent&lt;Animator&gt;());
        output.SetSourcePlayable(m_AnimationMixerPlayable);
        m_AnimationMixerPlayable.Play();
    }
    private void Update()
    {
        weight = Mathf.Clamp01(weight);
        m_AnimationMixerPlayable.SetInputWeight(0,1-weight);
        m_AnimationMixerPlayable.SetInputWeight(1,weight);
    }
    private void OnDestroy()
    {
        m_PlayableGraph.Destroy();
    }
}
//---------------------------------------------------
//-------------------------éŸ³é¢‘èåˆ-----------------
public class AudioMixer : MonoBehaviour
{
    public AudioClip m_AudioClip1;
    public AudioClip m_AudioClip2;
    public float weight;
    private PlayableGraph m_PlayableGraph;
    public AudioMixerPlayable m_AudioMixerPlayable;
    private void Start()
    {
        m_PlayableGraph = PlayableGraph.Create();
        m_AudioMixerPlayable = AudioMixerPlayable.Create(m_PlayableGraph,2);
        var audioClipPlayable1 = AudioClipPlayable.Create(m_PlayableGraph, m_AudioClip1, true);
        var audioClipPlayable2 = AudioClipPlayable.Create(m_PlayableGraph, m_AudioClip2, true);
        m_PlayableGraph.Connect(audioClipPlayable1,0,m_AudioMixerPlayable,0);
        m_PlayableGraph.Connect(audioClipPlayable2,0,m_AudioMixerPlayable,1);
        var audioPlayableOutput = AudioPlayableOutput.Create(m_PlayableGraph, &quot;Audio&quot;, GetComponent&lt;AudioSource&gt;());
        audioPlayableOutput.SetSourcePlayable(m_AudioMixerPlayable);
        m_AudioMixerPlayable.Play();
    }
    private void Update()
    {
        weight = Mathf.Clamp01(weight);
        m_AudioMixerPlayable.SetInputWeight(0,1-weight);
        m_AudioMixerPlayable.SetInputWeight(1,weight);
    }

    private void OnDisable()
    {
        m_PlayableGraph.Destroy();
    }
}
//---------------------------------------------------
//-------------------------é€Ÿåº¦æ§åˆ¶-----------------
public class MovingSphere : MonoBehaviour
{
    // Update is called once per frame
    [SerializeField, Range(0f, 100f)] private float max_Speed = 10f;
    [SerializeField, Range(0f, 100f)] private float max_Acceleration = 10f;
    [SerializeField]Rect allowedArea = new Rect(-5,-5,10,10);
    private float boundFactor = 0.7f;
    private Vector3 velocity;
    void Update()
    {
        Vector2 playerInput;
        playerInput.x = Input.GetAxis(&quot;Horizontal&quot;);
        playerInput.y = Input.GetAxis(&quot;Vertical&quot;);
        playerInput = Vector2.ClampMagnitude(playerInput, 1f);
        
        Vector3 desiredVelocity = new Vector3(playerInput.x,0f,playerInput.y)*max_Speed;
        float maxSpeedChange = max_Acceleration * Time.deltaTime;
        
        velocity.x = Mathf.MoveTowards(velocity.x, desiredVelocity.x, maxSpeedChange);
        velocity.z = Mathf.MoveTowards(velocity.z, desiredVelocity.z, maxSpeedChange);
        
        Vector3 displacement = velocity * Time.deltaTime;
        Vector3 targetPosition = transform.localPosition + displacement;
        if (targetPosition.x &lt; allowedArea.xMin)
        {
            targetPosition.x = allowedArea.xMin;
            velocity.x = -velocity.x*boundFactor;
        }else if (targetPosition.x &gt; allowedArea.xMax)
        {
            targetPosition.x = allowedArea.xMax;
            velocity.x = -velocity.x*boundFactor;
        }        
        if (targetPosition.z &lt; allowedArea.yMin)
        {
            targetPosition.z = allowedArea.yMin;
            velocity.z = -velocity.z*boundFactor;
        }else if (targetPosition.z &gt; allowedArea.yMax)
        {
            targetPosition.z = allowedArea.yMax;
            velocity.z = -velocity.z*boundFactor;
        }

        transform.localPosition = targetPosition;
    }
}
//---------------------------------------------------
//--------------------------TPS---------------------
//ThirdPersonCharacterControl
public class ThirdPersonCharacterControl : MonoBehaviour
{
    public float Speed;
    void Update (){
        PlayerMovement();
    }
    void PlayerMovement(){
        float hor = Input.GetAxis(&quot;Horizontal&quot;);
        float ver = Input.GetAxis(&quot;Vertical&quot;);
        Vector3 playerMovement = new Vector3(hor, 0f, ver) * Speed * Time.deltaTime;
        transform.Translate(playerMovement, Space.Self);
    }
}
//ThirdPersonCameraControl
public class ThirdPersonCameraControl : MonoBehaviour{
    float rotationSpeed = 1;
    public Transform Target, Player;
    float mouseX, mouseY;
    public Transform Obstruction;
    float zoomSpeed = 2f;
    void Start(){
        Obstruction = Target;
        Cursor.visible = false;
        Cursor.lockState = CursorLockMode.Locked;
    }
    private void LateUpdate(){
        CamControl();
        ViewObstructed();
    }
    void CamControl(){
        mouseX += Input.GetAxis(&quot;Mouse X&quot;) * rotationSpeed;
        mouseY -= Input.GetAxis(&quot;Mouse Y&quot;) * rotationSpeed;
        mouseY = Mathf.Clamp(mouseY, -35, 60);
        transform.LookAt(Target);
        if (Input.GetKey(KeyCode.LeftShift)){
            Target.rotation = Quaternion.Euler(mouseY, mouseX, 0);
        }
        else{
            Target.rotation = Quaternion.Euler(mouseY, mouseX, 0);
            Player.rotation = Quaternion.Euler(0, mouseX, 0);
        }
    }
    void ViewObstructed(){
        RaycastHit hit;
        if (Physics.Raycast(transform.position, Target.position - transform.position, out hit, 4.5f)){
            if (hit.collider.gameObject.tag != &quot;Player&quot;){
                Obstruction = hit.transform;
                Obstruction.gameObject.GetComponent&lt;MeshRenderer&gt;().shadowCastingMode = UnityEngine.Rendering.ShadowCastingMode.ShadowsOnly;
                if(Vector3.Distance(Obstruction.position, transform.position) &gt;= 3f &amp;&amp; Vector3.Distance(transform.position, Target.position) &gt;= 1.5f)
                    transform.Translate(Vector3.forward * zoomSpeed * Time.deltaTime);
            }
            else{
                Obstruction.gameObject.GetComponent&lt;MeshRenderer&gt;().shadowCastingMode = UnityEngine.Rendering.ShadowCastingMode.On;
                if (Vector3.Distance(transform.position, Target.position) &lt; 4.5f)
                    transform.Translate(Vector3.back * zoomSpeed * Time.deltaTime);
            }
        }
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[C#]]></title>
        <id>https://sunxiaohang.github.io/post/c/</id>
        <link href="https://sunxiaohang.github.io/post/c/">
        </link>
        <updated>2019-10-17T11:52:42.000Z</updated>
        <summary type="html"><![CDATA[<p>C#å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œä¸»è¦é’ˆå¯¹ä¸€äº›æ–°ç‰¹æ€§å’Œæ³›å‹ï¼Œå’ŒC#äº‹ä»¶ç³»ç»Ÿï¼Œä¸»è¦é’ˆå¯¹Unity3dï¼Œéæ ‡å‡†C#<br>
æ³¨æ„åœ¨ä¸€äº›è¾ƒæ–°ç‰ˆæœ¬çš„.net æ”¯æŒçš„æ–°ç‰¹æ€§å½“ä¸­ï¼Œè¦ç‰¹åˆ«æ³¨æ„å…¼å®¹æ€§é—®é¢˜å’Œæ€§èƒ½é—®é¢˜ï¼Œä¾‹å¦‚å‡½æ•°å¼ï¼Œlambdaä»¥åŠnull option.</p>
]]></summary>
        <content type="html"><![CDATA[<p>C#å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œä¸»è¦é’ˆå¯¹ä¸€äº›æ–°ç‰¹æ€§å’Œæ³›å‹ï¼Œå’ŒC#äº‹ä»¶ç³»ç»Ÿï¼Œä¸»è¦é’ˆå¯¹Unity3dï¼Œéæ ‡å‡†C#<br>
æ³¨æ„åœ¨ä¸€äº›è¾ƒæ–°ç‰ˆæœ¬çš„.net æ”¯æŒçš„æ–°ç‰¹æ€§å½“ä¸­ï¼Œè¦ç‰¹åˆ«æ³¨æ„å…¼å®¹æ€§é—®é¢˜å’Œæ€§èƒ½é—®é¢˜ï¼Œä¾‹å¦‚å‡½æ•°å¼ï¼Œlambdaä»¥åŠnull option.</p>
<!-- more -->
<h4 id="æ³›å‹å§”æ‰˜">æ³›å‹å§”æ‰˜</h4>
<pre><code>delegate void Del&lt;T&gt;(T item);
public static void Notify(int i) { }
...
Del&lt;int&gt; m1 = new Del&lt;int&gt;(Notify);
//Del&lt;int&gt; m2 = Notify;

//åœ¨æ³›å‹ç±»ä¸­å®šä¹‰çš„å§”æ‰˜å¯ä»¥ç”¨ç±»æ–¹æ³•ä½¿ç”¨çš„ç›¸åŒæ–¹å¼æ¥ä½¿ç”¨æ³›å‹ç±»ç±»å‹å‚æ•°
class Stack&lt;T&gt;
{
	T[] items;
	int index;
	public delegate void StackDelegate(T[] items);
}//å¼•ç”¨å§”æ‰˜çš„ä»£ç å¿…é¡»æŒ‡å®šåŒ…å«ç±»çš„ç±»å‹å‚æ•°
class Instance
{
	private static void DoWork(float[] items){}
public static void TestStatck()
{
Stack&lt;float&gt; s = new Stack&lt;float&gt;();
Stack&lt;float&gt;.StackDelegate d = DoWork;
}
}

//å¸¸ç”¨äº‹ä»¶å‘å¸ƒè®¢é˜…ç³»ç»Ÿ
public class PublicSubscribeManager
{
 //å®šä¹‰å‘å¸ƒæ¶ˆæ¯ä½“extends EventArgs
 public class MessageBox : System.EventArgs{ public MessageBox(string subject, string content){}}
 //å®šä¹‰ä»£ç† parameter(object sender,SubEventArgs message)
 public delegate void PublishEventHandler(object sender, MessageBox message);
 //å®šä¹‰event DelegateType eventVariable;
 public event PublishEventHandler Publish;
 //å®šä¹‰æ‰§è¡Œå‡½æ•°
 protected virtual void OnPublished(MessageBox message){if (Publish != null)Publish(this,message);}
	public void Trigger(string subject,string content){OnPublished(new MessageBox(subject,content));}
}
class MainClass
{
 static void Main()
 {
  	PublicSubscribeManager manager = new PublicSubscribeManager();
  	manager.Publish += new PublicSubscribeManager.PublishEventHandler((sender,message)=&gt; { Console.WriteLine(&quot;{sender},{message}&quot;);});
  	manager.Trigger(&quot;_subject&quot;, &quot;_content&quot;);
 }
}
</code></pre>
<h4 id="ç‰¹æ€§è§£æ">ç‰¹æ€§è§£æ</h4>
<pre><code>Type type = typeof(class);
object[] XXX = type.GetXXX();
for(XX x int XXX)x.reduce();
---------------------------
System.Reflection.MemberInfo info = type.getMember(Type.MemberName);
System.Reflection.MethodInfo info = type.GetMethod(Type.MethodName);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è½¯ä»¶å·¥ç¨‹æ¶æ„]]></title>
        <id>https://sunxiaohang.github.io/post/ruan-jian-gong-cheng-jia-gou/</id>
        <link href="https://sunxiaohang.github.io/post/ruan-jian-gong-cheng-jia-gou/">
        </link>
        <updated>2019-09-11T11:46:39.000Z</updated>
        <summary type="html"><![CDATA[<p>è½¯ä»¶å·¥ç¨‹æ¶æ„çš„ä¸€äº›æƒ³æ³•å’Œæ€è·¯æ±‡æ€»ï¼Œæ—¨åœ¨ä»æ¨¡å‹é˜¶æ®µå»ºç«‹ä¸€ä¸ªç›¸å¯¹å®Œå–„çš„è½¯ä»¶æ¡†æ¶,é‡åœ¨ç§¯ç´¯è½¯ä»¶å·¥ç¨‹å¼€å‘ç›¸å…³çš„å¼€å‘æ€è·¯å’Œæ³¨æ„äº‹é¡¹ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>è½¯ä»¶å·¥ç¨‹æ¶æ„çš„ä¸€äº›æƒ³æ³•å’Œæ€è·¯æ±‡æ€»ï¼Œæ—¨åœ¨ä»æ¨¡å‹é˜¶æ®µå»ºç«‹ä¸€ä¸ªç›¸å¯¹å®Œå–„çš„è½¯ä»¶æ¡†æ¶,é‡åœ¨ç§¯ç´¯è½¯ä»¶å·¥ç¨‹å¼€å‘ç›¸å…³çš„å¼€å‘æ€è·¯å’Œæ³¨æ„äº‹é¡¹ã€‚</p>
<!-- more -->
<h4 id="ç³»ç»Ÿæ¶æ„">ç³»ç»Ÿæ¶æ„</h4>
<p>ç³»ç»Ÿæ¶æ„è¡¡é‡æ ‡å‡†<br>
â€¢ æ‰¿è½½åŠ›<br>
â€¢ å¯æ‰©å±•åº¦<br>
â€¢ æ˜“ç”¨æ€§<br>
â€¢ å¯ä¼¸ç¼©æ€§<br>
â€¢ å®¹ç¾åŠ›</p>
<h4 id="åˆ†å±‚æ€ç»´">åˆ†å±‚æ€ç»´</h4>
<p>é¢å¯¹å¤æ‚çš„ç³»ç»Ÿï¼Œå¾€å¾€éœ€è¦æŠŠå„ä¸ªæ¨¡å—æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œåˆ†ç±»åˆ†å±‚ï¼Œæ¨¡å—é—´å„å¸å…¶èŒååŒå·¥ä½œ,æŠŠå¤æ‚çš„é—®é¢˜ç®€å•åŒ–ï¼Œ<img src="https://sunxiaohang.github.io/post-images/1586173649489.png" alt="" loading="lazy"></p>
<h4 id="åˆ†æ²»æ€ç»´divide-and-conquer">åˆ†æ²»æ€ç»´(Divide and conquer)</h4>
<figure data-type="image" tabindex="1"><img src="https://sunxiaohang.github.io/post-images/1586173679513.png" alt="" loading="lazy"></figure>
<h4 id="æ¼”åŒ–æ€ç»´">æ¼”åŒ–æ€ç»´</h4>
<figure data-type="image" tabindex="2"><img src="https://sunxiaohang.github.io/post-images/1586173718360.png" alt="" loading="lazy"></figure>
<h4 id="æ•°æ®è¡¨">æ•°æ®è¡¨</h4>
<p>â€¢ Excel<br>
â€¢ ä»£ç æ•°æ®<br>
â€¢ txt<br>
â€¢ æ¯”ç‰¹æµæ•°æ®</p>
<h4 id="æ€§èƒ½è§„èŒƒ">æ€§èƒ½è§„èŒƒ</h4>
<h4 id="ç¾æœ¯èµ„æºè§„èŒƒ">ç¾æœ¯èµ„æºè§„èŒƒ</h4>
<p>â€¢ æ ¹æ®è¿ç”¨åœºæ™¯<br>
â€¢ åæ¨è®¡ç®—<br>
â€¢ å®é™…æµ‹è¯•</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring]]></title>
        <id>https://sunxiaohang.github.io/post/spring/</id>
        <link href="https://sunxiaohang.github.io/post/spring/">
        </link>
        <updated>2019-02-28T11:23:21.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸»è¦æ˜¯ä¸€äº›è¯»ä¹¦ç¬”è®°ï¼Œæ€»ç»“java webé¡¹ç›®å¸¸ç”¨æ¡†æ¶çš„ä¸€äº›å®ç°ç»†èŠ‚å’ŒåŸºç¡€ç†è®ºã€‚ç›®å‰å¿«é€Ÿè¿­ä»£å¼€å‘è¿‡ç¨‹å®Œå…¨å¯ä»¥ä¾èµ–æ›´æ–°çš„å¿«é€Ÿæ¡†æ¶ä»£æ›¿ï¼Œå¦‚SSM+thymeleaf+layuiç­‰</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸»è¦æ˜¯ä¸€äº›è¯»ä¹¦ç¬”è®°ï¼Œæ€»ç»“java webé¡¹ç›®å¸¸ç”¨æ¡†æ¶çš„ä¸€äº›å®ç°ç»†èŠ‚å’ŒåŸºç¡€ç†è®ºã€‚ç›®å‰å¿«é€Ÿè¿­ä»£å¼€å‘è¿‡ç¨‹å®Œå…¨å¯ä»¥ä¾èµ–æ›´æ–°çš„å¿«é€Ÿæ¡†æ¶ä»£æ›¿ï¼Œå¦‚SSM+thymeleaf+layuiç­‰</p>
<!-- more -->
<h4 id="jsp">JSP</h4>
<h5 id="jspå†…ç½®å¯¹è±¡">JSPå†…ç½®å¯¹è±¡</h5>
<table>
<thead>
<tr>
<th>JSPå†…ç½®å¯¹è±¡</th>
<th>å¯¹è±¡æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Out</td>
<td>å‘å®¢æˆ·ç«¯å¯¹è±¡è¾“å‡ºæ•°æ®</td>
</tr>
<tr>
<td>Request</td>
<td>å‘æœåŠ¡å™¨æäº¤æ•°æ®</td>
</tr>
<tr>
<td>Response</td>
<td>æœåŠ¡å™¨é¡¹ç›®ä¿¡æ¯</td>
</tr>
<tr>
<td>Exception</td>
<td>å¼‚å¸¸ä¿¡æ¯</td>
</tr>
<tr>
<td>Config</td>
<td>é…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td>Page</td>
<td>æŒ‡å‘å½“å‰pageæœ¬èº«</td>
</tr>
<tr>
<td>Session</td>
<td>ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼ˆç»Ÿä¸€ç”¨æˆ·çš„ä¸åŒå¯¹è±¡ä¹‹é—´å…±äº«ä¿¡æ¯ï¼‰</td>
</tr>
<tr>
<td>Application</td>
<td>ä¸Šä¸‹æ–‡ï¼ˆä¸åŒç”¨æˆ·é—´å…±äº«ä¿¡æ¯ï¼‰</td>
</tr>
<tr>
<td>PageContext</td>
<td>é˜Ÿjspé¡µé¢æ‰€æœ‰å¯¹è±¡åŠå‘½åç©ºé—´çš„è®¿é—®</td>
</tr>
</tbody>
</table>
<h5 id="outå¯¹è±¡">outå¯¹è±¡</h5>
<p><code>out.flush()</code><br>
<code>out.clearBuffer</code><br>
<code>out.clear</code></p>
<pre><code>out.print(&quot;è·å–å½“å‰ç¼“å†²åŒºå¤§å°ï¼š&quot;+out.getBufferSize());
out.print(&quot;å½“å‰ç¼“å†²åŒºå‰©ä½™å­—èŠ‚æ•°ç›®&quot;+out.getRemaining());
</code></pre>
<h5 id="requestå¯¹è±¡">Requestå¯¹è±¡</h5>
<table>
<thead>
<tr>
<th>Requestå¯¹è±¡</th>
<th>å¯¹è±¡æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="ç®€å•è¯­æ³•æ ¼å¼æ•´ç†">ç®€å•è¯­æ³•æ ¼å¼æ•´ç†</h5>
<pre><code>&lt;jsp:forward page=&quot;login.jsp&quot;&gt;
    &lt;jsp:param value=&quot;jikexueyuan&quot; name=&quot;username&quot;/&gt;
    &lt;jsp:param value=&quot;sunxiaohang&quot; name=&quot;password&quot;/&gt;
&lt;/jsp:forward&gt;
&lt;%@page errorPage=&quot;error_page.jsp&quot; isErrorPage=&quot;true&quot; %&gt;


  String username=request.getParameter(&quot;username&quot;);
    String password=request.getParameter(&quot;password&quot;);
    out.println(&quot;username &quot;+username);
    out.println(&quot;&lt;br/&gt;&quot;);
    out.println(&quot;password &quot;+password);

&lt;jsp:include page=&quot;body.jsp&quot;&gt;
    &lt;jsp:param name=&quot;bgcolor&quot; value=&quot;red&quot;/&gt;
&lt;/jsp:include&gt;

&lt;body bgcolor=&quot;&lt;%=request.getParameter(&quot;bgcolor&quot;)%&gt;&quot;&gt;
&lt;/body&gt;

&lt;jsp:useBean id=&quot;person&quot; class=&quot;Person&quot;&gt;&lt;/jsp:useBean&gt;
&lt;jsp:setProperty property=&quot;name&quot; name=&quot;person&quot;/&gt;
&lt;jsp:setProperty property=&quot;sex&quot; name=&quot;person&quot;/&gt;

&lt;jsp:getProperty property=&quot;name&quot; name=&quot;person&quot;/&gt;
&lt;jsp:getProperty property=&quot;sex&quot; name=&quot;person&quot;/&gt;
éœ€è¦æ·»åŠ statdard.jar jstl.jaråŒ…
</code></pre>
<h5 id="springå†…ç½®å¯¹è±¡">Springå†…ç½®å¯¹è±¡</h5>
<pre><code>  response.setHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;);//æ— ç¼“å­˜
    response.setIntHeader(&quot;refresh&quot;,2);//è®¾ç½®ä¸¤ç§’é’Ÿè‡ªåŠ¨åˆ·æ–°
    out.print(&quot;this date is :&quot;+new java.util.Date().toString()+&quot;&lt;br&gt;&quot;);
    response.sendRedirect(&quot;https://www.baidu.com&quot;);//é‡å®šå‘é¡µé¢
    Cookie cookie=new Cookie(&quot;username&quot;,&quot;password&quot;);
    cookie.setMaxAge(3600);
    response.addCookie(cookie);
    session.getId();
</code></pre>
<h5 id="é¢å‘æ–¹é¢çš„ç¨‹åºè®¾è®¡aop">é¢å‘<code>æ–¹é¢</code>çš„ç¨‹åºè®¾è®¡ï¼ˆAOPï¼‰</h5>
<p>Springæ¡†æ¶çš„ä¸€ä¸ªå…³é”®ç»„ä»¶æ˜¯é¢å‘æ–¹é¢çš„ç¨‹åºè®¾è®¡ï¼ˆAOPï¼‰æ¡†æ¶ã€‚ä¸€ä¸ªç¨‹åºä¸­è·¨è¶Šå¤šä¸ªç‚¹çš„åŠŸèƒ½è¢«ç§°ä¸º<code>æ¨ªåˆ‡å…³æ³¨ç‚¹</code>ï¼Œå…¶åœ¨æ¦‚å¿µä¸Šç‹¬ç«‹äºåº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ï¼ˆsampleï¼šæ—¥å¿—è®°å½•ã€å£°æ˜æ€§äº‹åŠ¡ï¼‰</p>
<p><code>OOP</code>ä¸­æ¨¡å—åŒ–çš„å…³é”®å•å…ƒæ˜¯ç±»ï¼Œ<code>AOP</code>ä¸­æ¨¡å—åŒ–çš„å…³é”®å•å…ƒå®¤æ–¹é¢ã€‚<code>AOP</code>å¸®åŠ©ä½ å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä»–ä»¬æ‰€å½±å“çš„å¯¹è±¡ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œ<code>ä¾èµ–æ³¨å…¥</code>å¸®åŠ©ä½ å°†ä½ çš„åº”ç”¨ç¨‹åºå¯¹è±¡ä»å½¼æ­¤ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p>
<ul>
<li>
<p><code>æ§åˆ¶åè½¬IOC</code><br>
åœ¨ç¼–å†™ä¸€ä¸ªå¤æ‚çš„javaç¨‹åºæ—¶åº”ç”¨ç¨‹åºç±»åº”å½“å°½å¯èƒ½çš„ç‹¬ç«‹äºå…¶ä»–çš„javaç±»æ¥å¢åŠ è¿™äº›ç±»çš„å¯é‡ç”¨æ€§ï¼Œå½“è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œå¯ä»¥ä½¿ä»–ä»¬ç‹¬ç«‹äºå…¶ä»–ç±»è¿›è¡Œæµ‹è¯•ã€‚</p>
</li>
<li>
<p><code>ä¾èµ–æ³¨å…¥DI</code><br>
ä¾èµ–æ³¨å…¥å¯ä»¥ä»¥å‘æ„é€ å‡½æ•°ä¼ é€’å‚æ•°çš„æ–¹å¼å‘ç”Ÿï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨setteræ–¹æ³•post-constructionã€‚</p>
</li>
</ul>
<h5 id="springä½“ç³»ç»“æ„">Springä½“ç³»ç»“æ„</h5>
<figure data-type="image" tabindex="1"><img src="https://upload-images.jianshu.io/upload_images/2480310-1638858c768bd15f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Springä½“ç³»æ¡†æ¶å›¾" loading="lazy"></figure>
<h5 id="æ ¸å¿ƒå®¹å™¨">æ ¸å¿ƒå®¹å™¨</h5>
<p>æ ¸å¿ƒå®¹å™¨ç”±æ ¸å¿ƒã€beanã€ä¸Šä¸‹æ–‡çš„è¡¨è¾¾å¼è¯­è¨€æ¨¡å—ç»„æˆ</p>
<ul>
<li><code>æ ¸å¿ƒ</code>æä¾›æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€åŒ…æ‹¬IOCå’Œä¾èµ–æ³¨å…¥åŠŸèƒ½ã€‚</li>
<li><code>Bean</code>æä¾›BeanFactoryï¼Œå·¥å‚æ¨¡å¼çš„å¤æ‚å®ç°ã€‚</li>
<li><code>ä¸Šä¸‹æ–‡</code>å»ºç«‹åœ¨ç”±coreå’Œbeanæä¾›çš„åšå®åŸºç¡€ä¸Šï¼Œä»–æ˜¯è®¿é—®å®šä¹‰å’Œé…ç½®çš„ä»»ä½•å¯¹è±¡çš„åª’ä»‹ã€‚ApplicationContextæ¥å£æ˜¯ä¸Šä¸‹æ–‡æ¨¡å—çš„é‡ç‚¹ã€‚</li>
<li><code>è¡¨è¾¾å¼è¯­è¨€</code>æ¨¡å—åœ¨è¿è¡Œæ—¶æä¾›äº†æŸ¥è¯¢å’Œæ“ä½œä¸€ä¸ªå¯¹è±¡å›¾çš„å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€</li>
</ul>
<h5 id="æ•°æ®é›†æˆ-è®¿é—®">æ•°æ®é›†æˆã€è®¿é—®</h5>
<ul>
<li><code>JDBC</code>æä¾›åˆ é™¤å†—ä½™çš„JDBCç›¸å…³ç¼–ç çš„JDBCæŠ½è±¡å±‚</li>
<li><code>ORC</code>ä¸ºæµè¡Œçš„å¯¹è±¡å…³ç³»æ˜ å°„APIï¼ŒåŒ…æ‹¬JPAã€JDOã€Hibernateå’ŒiBatisæä¾›é›†æˆå±‚</li>
<li><code>OXM</code>æä¾›æŠ½è±¡å±‚ã€å®ƒæ”¯æŒå¯¹JAXBã€Castorã€XMLBeansï¼ŒJiBxå’ŒXStreamçš„å¯¹è±¡/XMLæ˜ å°„å®ç°</li>
<li><code>JMS</code>javaæ¶ˆæ¯æœåŠ¡åŒ…å«ç”Ÿäº§å’Œæ¶ˆè´¹çš„ä¿¡æ¯çš„åŠŸèƒ½</li>
<li><code>äº‹åŠ¡</code>äº‹åŠ¡æ¨¡å—ä¸ºå®ç°ç‰¹æ®Šæ¥å£çš„ç±»åŠæ‰€æœ‰çš„POJOæ”¯æŒç¼–ç¨‹å¼å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†</li>
</ul>
<h5 id="web">Web</h5>
<ul>
<li><code>Web</code>æä¾›åŸºæœ¬çš„é¢å‘webçš„é›†æˆåŠŸèƒ½ï¼Œä¾‹å¦‚å¤šä¸ªæ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½å’Œä½¿ç”¨servletç›‘å¬å™¨å’Œé¢å‘webåº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡æ¥åˆå§‹åŒ–IOCå®¹å™¨</li>
<li><code>Web-MVC</code>åŒ…å«Springçš„æ¨¡å‹-è§†å›¾-æ§åˆ¶ï¼ˆMVCï¼‰ï¼Œå®ç°äº†webåº”ç”¨ç¨‹åº</li>
<li><code>Web-Socket</code>ä¸º<code>WebSocket-Based</code>æä¾›æ”¯æŒï¼Œè€Œä¸”åœ¨webåº”ç”¨ç¨‹åºä¸­æä¾›å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡çš„ä¸¤ç§æ–¹å¼ã€‚</li>
<li><code>Web-Portlet</code>æä¾›åœ¨portletç¯å¢ƒä¸­å®ç°MVCï¼Œå¹¶ä¸”åæ˜ äº†Web-Servletæ¨¡å—çš„åŠŸèƒ½ã€‚</li>
</ul>
<h5 id="springå®ä¾‹">Springå®ä¾‹</h5>
<ul>
<li>1.ç”Ÿæˆå·¥å‚å¯¹è±¡ï¼ŒåŠ è½½å®ŒæŒ‡å®šè·¯å¾„ä¸‹beané…ç½®æ–‡ä»¶ï¼Œåˆ©ç”¨æ¡†æ¶æä¾›çš„<code>FileSystemXmlApplicationContext</code> APIç”Ÿæˆå·¥å‚bean<code>FileSystemXmlApplicationContext</code>è´Ÿè´£ç”Ÿæˆå’Œåˆå§‹åŒ–æ‰€æœ‰å¯¹è±¡ï¼Œæ¯”å¦‚ï¼šæ‰€æœ‰XML beané…ç½®æ–‡ä»¶ä¸­çš„bean</li>
<li>åˆ©ç”¨ç¬¬ä¸€æ­¥ç”Ÿæˆçš„ä¸Šä¸‹æ–‡ä¸­çš„<code>getBean()</code>æ–¹æ³•å¾—åˆ°æ‰€éœ€è¦çš„beanï¼Œè¿™ä¸ªæ–¹æ³•é€šè¿‡é…ç½®ä¸­çš„<code>beanID</code>æ¥è¿”å›ä¸€ä¸ªçœŸæ­£çš„å¯¹è±¡ï¼Œä¸€æ—¦å¾—åˆ°è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¯¹è±¡æ¡ç”¨ä»»ä½•æ–¹æ³•ã€‚</li>
</ul>
<pre><code> ApplicationContext applicationContext=new ClassPathXmlApplicationContext(&quot;/configure/beansConfigure.xml&quot;);
        HelloWord helloWord= (HelloWord) applicationContext.getBean(&quot;helloWord&quot;);
        helloWord.getMessage();
</code></pre>
<h5 id="bean-property">bean property</h5>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>å¼ºåˆ¶å±æ€§ï¼Œåˆ¶å®šç”¨æ¥åˆ›å»ºbeançš„beanç±»</td>
</tr>
<tr>
<td>name/id</td>
<td>æŒ‡å®šå”¯ä¸€çš„beançš„æ ‡è¯†ç¬¦</td>
</tr>
<tr>
<td>scope</td>
<td>æŒ‡å®šç”±ç‰¹å®šbeanå®šä¹‰åˆ›å»ºçš„å¯¹è±¡çš„ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td>constructor-arg</td>
<td>ç”¨æ¥æ³¨å…¥ä¾èµ–å…³ç³»</td>
</tr>
<tr>
<td>properties</td>
<td>ç”¨æ¥æ³¨å…¥ä¾èµ–å…³ç³»</td>
</tr>
<tr>
<td>autowiring mode</td>
<td>ç”¨æ¥æ³¨å…¥ä¾èµ–å…³ç³»</td>
</tr>
<tr>
<td>lazy-initialization mode</td>
<td>ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆ›å»ºå¯¹è±¡ï¼ˆæ‡’æ±‰æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td>initialization</td>
<td>åœ¨beançš„æ‰€æœ‰å¿…é¡»å±æ€§è¢«å®¹å™¨è®¾ç½®ä¹‹åï¼Œè°ƒç”¨å›è°ƒæ–¹æ³•</td>
</tr>
<tr>
<td>destruction</td>
<td>å½“åŒ…å«è¯¥beançš„å®¹å™¨è¢«é”€æ¯æ˜¯ï¼Œä½¿ç”¨å›è°ƒæ–¹æ³•</td>
</tr>
</tbody>
</table>
<h5 id="springé…ç½®å…ƒæ•°æ®">Springé…ç½®å…ƒæ•°æ®</h5>
<p><code>Spring IoC</code>å®¹å™¨å®Œå…¨ç”±å®é™…ç¼–å†™çš„é…ç½®å…ƒæ•°æ®çš„æ ¼å¼è§£è€¦</p>
<ul>
<li>åŸºäºXMLçš„é…ç½®æ–‡ä»¶</li>
<li>åŸºäºæ³¨è§£çš„é…ç½®</li>
<li>åŸºäºjavaçš„é…ç½®</li>
</ul>
<h5 id="spring-beançš„ä½œç”¨åŸŸ">Spring Beançš„ä½œç”¨åŸŸ</h5>
<p>åœ¨Springå®šä¹‰ä¸€ä¸ªbeanæ—¶ï¼Œå¿…é¡»å£°æ˜è¯¥beançš„ä½œç”¨åŸŸ.</p>
<table>
<thead>
<tr>
<th>ä½œç”¨åŸŸ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>singleTon</code></td>
<td>å•ä¾‹æ¨¡å¼</td>
</tr>
<tr>
<td><code>prototype</code></td>
<td>æ™®é€šæ¨¡å¼ï¼Œæ¯æ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</td>
</tr>
<tr>
<td><code>request</code></td>
<td>ä½œç”¨åŸŸå®šä¹‰ä¸ºHTTPè¯·æ±‚ï¼Œåªåœ¨web-aware spring ApplicationContextçš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ</td>
</tr>
<tr>
<td><code>session</code></td>
<td>ä½œç”¨åŸŸå®šä¹‰é™åˆ¶ä¸ºHTTPä¼šè¯ï¼Œåªåœ¨web-aware spring ApplicationContextçš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ</td>
</tr>
<tr>
<td><code>global-session</code></td>
<td>ä½œç”¨åŸŸå°†beançš„å®šä¹‰é™åˆ¶ä¸ºå…¨å±€HTTPç»˜ç”»ï¼Œåªåœ¨web-aware spring ApplicationContextçš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ</td>
</tr>
</tbody>
</table>
<p>ä½œç”¨åŸŸè®¾ç½®å®ä¾‹</p>
<pre><code> &lt;bean id=&quot;singleTon&quot; class=&quot;com.example.SingleTon&quot; 
      scope=&quot;singleton&quot;&gt;
</code></pre>
<h5 id="spring-beançš„ç”Ÿå‘½å‘¨æœŸ">Spring beançš„ç”Ÿå‘½å‘¨æœŸ</h5>
<p>å£°æ˜å¸¦æœ‰ <code>init-method</code>å’Œ <code>destroy-method</code> å‚æ•°çš„ ã€‚</p>
<ul>
<li><code>init-method</code> å±æ€§æŒ‡å®šä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å®ä¾‹åŒ– bean æ—¶è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
<li><code>destroy-method</code> æŒ‡å®šä¸€ä¸ªæ–¹æ³•ï¼Œåªæœ‰ä»å®¹å™¨ä¸­ç§»é™¤ bean åï¼Œæ‰èƒ½è°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
</ul>
<p>åœ¨<code>org.springframework.beans.factory.InitializingBean</code> æ¥å£æŒ‡å®šä¸€ä¸ªå•ä¸€çš„æ–¹æ³•ï¼š</p>
<pre><code>void afterPropertiesSet() throws Exception;
</code></pre>
<p>æˆ‘ä»¬åªéœ€è¦åœ¨å®ç°<code>InitializingBean</code>æ¥å£å°±å¯ä»¥åœ¨å¯¹è±¡åˆ›å»ºååšä¸€äº›äº‹æƒ…</p>
<pre><code>public class TestBean implements InitializingBean {
   public void afterPropertiesSet() throws Exception{
      // do some initialization work
   }
}
</code></pre>
<p>åŒæ ·çš„åœ¨<code>org.springframework.beans.factory.DisposableBean</code> æ¥å£æŒ‡å®šä¸€ä¸ªå•ä¸€çš„æ–¹æ³•ï¼š</p>
<pre><code>void destroy() throws Exception;
</code></pre>
<p>ç„¶ååœ¨ç±»å¯¹è±¡ä¸­å®ç°<code>DisposableBean</code>æ¥å£</p>
<pre><code>public class TestBean implements DisposableBean{
    @Override
    public void destroy() throws Exception {
        // do some initialization work
    }
}
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨åŸºäºXMLå…ƒæ•°æ®é…ç½®çš„å¢ƒå†µä¸‹è¿˜å¯ä»¥é€šè¿‡è®¾ç½®<code>destroy-method</code>å±æ€§å®ç°</p>
<pre><code>&lt;bean id=&quot;exampleBean&quot;
         class=&quot;examples.ExampleBean&quot; destroy-method=&quot;destroy&quot;/&gt;
</code></pre>
<p>åœ¨ç±»é‡Œé¢æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰</p>
<pre><code>public class TestBean {
   public void destroy() {
      // do some destruction work
   }
}
</code></pre>
<h5 id="beanpostprocessor">BeanPostProcessor</h5>
<p>æœ‰æ—¶å€™ä¼šéœ€è¦åœ¨beanå®ä¾‹åŒ–å¯¹è±¡å‰åå»åšä¸€äº›å‡†å¤‡å·¥ä½œæˆ–é¢„å¤„ç†ï¼Œå¯ä»¥åœ¨åˆ›å»ºbeanç±»æ—¶å®ç°<code>BeanPostProcessor</code>æ¥å£å»å®Œæˆè‡ªå®šä¹‰å·¥ä½œã€‚<br>
è¯¥æ¥å£å®šä¹‰äº†<code>postProcessBeforeInitialization</code>å’Œ<code>postProcessAfterInitialization</code>ä¸¤ä¸ªå¸¦å‚å‡½æ•°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹</p>
<pre><code>public class TestBean implements BeanPostProcessor {
   public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
      System.out.println(&quot;BeforeInitialization : &quot; + beanName);
      return bean;  // you can return any other object as well
   }
   public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
      System.out.println(&quot;AfterInitialization : &quot; + beanName);
      return bean;  // you can return any other object as well
   }
}
</code></pre>
<p><code>æ³¨æ„</code>ï¼šåœ¨mainæ–¹æ³•ä¸­éœ€è¦æ³¨å†Œä¸€ä¸ªåœ¨ AbstractApplicationContext ç±»ä¸­å£°æ˜çš„å…³é—­ hook çš„ registerShutdownHook() æ–¹æ³•ã€‚å®ƒå°†ç¡®ä¿æ­£å¸¸å…³é—­ï¼Œå¹¶ä¸”è°ƒç”¨ç›¸å…³çš„ destroy æ–¹æ³•ã€‚</p>
<pre><code>context.registerShutdownHook();
</code></pre>
<h4 id="javaçš„åå°„æœºåˆ¶">Javaçš„åå°„æœºåˆ¶</h4>
<p><code>å†™åœ¨Spring Iocä¹‹å‰</code><br>
ç±»è£…è½½å™¨å°±æ˜¯å¯»æ‰¾ç±»çš„å­—èŠ‚ç æ–‡ä»¶å¹¶æ„é€ å‡ºç±»åœ¨JVMå†…éƒ¨è¡¨ç¤ºçš„å¯¹è±¡ç»„ä»¶ï¼Œä¸»è¦å·¥ä½œç”±ClassLoaderåŠå…¶å­ç±»è´Ÿè´£ï¼ŒClassLoaderæ˜¯ä¸€ä¸ªé‡è¦çš„javaè¿è¡Œæ—¶ç³»ç»Ÿç»„ä»¶ï¼Œä»–è´Ÿè´£åœ¨è¿è¡Œæ—¶æŸ¥æ‰¾å’Œè£…å…¥Classå­—èŠ‚ç æ–‡ä»¶</p>
<pre><code>public class ReflectCar {
    public static Car initCarByDefaultConst() throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
        ClassLoader loader=Thread.currentThread().getContextClassLoader();
        Class clazz=loader.loadClass(&quot;com.beijinghuayi.ioc.Car&quot;);
        //è·å–ç±»é»˜è®¤å®ä¾‹åŒ–å¯¹è±¡
        Constructor constructor=clazz.getDeclaredConstructor((Class[])null);
        Car car= (Car) constructor.newInstance();

        Method setBrand=clazz.getMethod(&quot;setBrand&quot;,String.class);
        setBrand.invoke(car,&quot;å¥”é©°&quot;);
        Method setColor=clazz.getMethod(&quot;setColor&quot;,String.class);
        setColor.invoke(car,&quot;çº¢è‰²&quot;);
        Method setMaxspeed=clazz.getMethod(&quot;setMaxspeed&quot;,String.class);
        setMaxspeed.invoke(car,&quot;200ç &quot;);
        return car;
    }
    public static Car initCarByParams() throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
        ClassLoader loader=Thread.currentThread().getContextClassLoader();
        Class clazz=loader.loadClass(&quot;com.beijinghuayi.ioc.Car&quot;);
        Constructor constructor=clazz.getDeclaredConstructor(new Class[]{String.class,String.class,String.class});
        Car car= (Car) constructor.newInstance(new Object[]{&quot;çº¢è‰²&quot;,&quot;å®é©¬&quot;,&quot;180&quot;});
        return car;
    }
}
</code></pre>
<p><code>å·¥ä½œæœºåˆ¶ï¼š</code></p>
<ul>
<li>1.è£…è½½ï¼šæŸ¥æ‰¾å’Œå¯¼å…¥Classæ–‡ä»¶</li>
<li>2.é“¾æ¥ï¼šæ‰§è¡Œæ ¡éªŒï¼Œå‡†å¤‡å’Œè§£ææ­¥éª¤</li>
<li>3.åˆå§‹åŒ–ï¼šå¯¹ç±»çš„é™æ€å˜é‡ã€é™æ€ä»£ç å—æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</li>
</ul>
<p><code>Tip:</code>JVMåœ¨è¿è¡Œæ—¶ä¼šäº§ç”Ÿ3ä¸ª<code>classLoader</code></p>
<ul>
<li>æ ¹è£…è½½å™¨ï¼ˆC++å®ç°ã€ä¸æ˜¯classloaderçš„å­ç±»ï¼‰è£…è½½jreæ ¸å¿ƒç±»åº“</li>
<li>ExtClassLoaderï¼ˆæ‰©å±•ç±»è£…è½½å™¨ï¼‰è£…è½½jreæ‰©å±•ç›®å½•extä¸­çš„jarç±»</li>
<li>AppClassLoaderï¼ˆç³»ç»Ÿç±»è£…è½½å™¨ï¼‰è£…è½½classpathä¸­çš„å†…å®¹</li>
</ul>
<p><code>ClassLoader</code>é‡è¦æ–¹æ³•</p>
<ul>
<li>Class loadClass(String name);ä»æ–‡ä»¶ä¸­è£…åœ¨ç±»</li>
<li>Class defineClass(String name,byte[]b,int off,int len)</li>
<li>Class findSystemClass(String name)</li>
<li>Class findLoadedClass(String name)</li>
<li>ClassLoader getParent()</li>
</ul>
<p>Classåå°„å¯¹è±¡æè¿°ç±»è¯­ä¹‰ç»“æ„ï¼Œå¯ä»¥ä»Classå¯¹è±¡ä¸­è·å¾—æ„é€ å‡½æ•°ï¼Œæˆå‘˜å˜é‡ï¼Œæ–¹æ³•ç­‰å…ƒç´ çš„åå°„å¯¹è±¡ï¼Œå¹¶ä»¥ç¼–ç¨‹çš„æ–¹æ³•é€šè¿‡è¿™äº›åå°„å¯¹è±¡å¯¹ç›®æ ‡ç±»å¯¹è±¡è¿›è¡Œæ“ä½œã€‚è¿™äº›åå°„å¯¹è±¡ç±»åœ¨java.reflectåŒ…ä¸­å®šä¹‰ï¼Œä¸‹é¢æ˜¯æœ€ä¸»è¦çš„ä¸‰ä¸ªåå°„ç±»</p>
<ul>
<li>1.Constructorç±»å¯¹è±¡çš„åå°„ç±»ï¼ˆé€šè¿‡getConstructoræ–¹æ³•å¯ä»¥è·å¾—ç±»çš„æ‰€æœ‰æ„é€ å‡½æ•°åå°„å¯¹è±¡æ•°ç»„ï¼‰NewInstanceã€‚</li>
<li>2.Methodç±»æ–¹æ³•çš„åå°„ç±»invoke() getReturnType(),getParameterTypes();</li>
<li>3.Field è·å–ç±»çš„æˆå‘˜å˜é‡åå°„ç±»ï¼ˆ è·å–æˆå‘˜å˜é‡åå°„æ•°ç»„ï¼‰<br>
<code>Tip</code>è®¿é—®privateï¼Œprotectæˆå‘˜å˜é‡æˆ–æ–¹æ³•æ—¶éœ€æ·»åŠ <code>Field.setAccessible(true)</code>ï¼Œ<code>Method.setAccessible(true)</code>æ–¹æ³•å–æ¶ˆjavaè¯­è¨€æ£€æŸ¥ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡º<code>IllegalAccessException</code>å¼‚å¸¸.</li>
</ul>
<pre><code> ClassLoader loader=Thread.currentThread().getContextClassLoader();
        System.out.println(&quot;classLoader:&quot;+loader);
        System.out.println(&quot;parent classLoader:&quot;+loader.getParent());
        System.out.println(&quot;grandParent classLoader:&quot;+loader.getParent().getParent());
</code></pre>
<h5 id="å¼•å‡ºspring-ioc">å¼•å‡ºSpring Ioc</h5>
<p>åœ¨Springä¸­ï¼Œé€šè¿‡IOCå¯ä»¥å°†å®ç°ç±»ã€å‚æ•°ä¿¡æ¯ç­‰é…ç½®åœ¨å¯¹åº”çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå½“éœ€è¦æ›´æ”¹å®ç°ç±»æˆ–å‚æ•°ä¿¡æ¯æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹æŸå¯¹è±¡æ‰€éœ€è¦çš„å…¶ä»–å¯¹è±¡è¿›è¡Œæ³¨å…¥ï¼Œè¿™ç§æ³¨å…¥éƒ½æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­å®ç°ã€‚</p>
<h5 id="spring-beançš„ç®€å•å®ç°">Spring Beançš„ç®€å•å®ç°</h5>
<pre><code>public class BeanFactory {
    private Map&lt;String,Object&gt; beanmap=new HashMap&lt;&gt;();
    public void init(String xml) throws DocumentException, ClassNotFoundException, IntrospectionException, IllegalAccessException, InstantiationException, InvocationTargetException {
        //1.åˆ›å»ºè¯»å–é…ç½®æ–‡ä»¶çš„readerå¯¹è±¡
        SAXReader reader=new SAXReader();
        //2.è·å–å½“å‰çº¿ç¨‹çš„ç±»åŠ è½½å™¨
        ClassLoader loader=Thread.currentThread().getContextClassLoader();
        //3.ä»classç›®å½•ä¸‹è·å–æŒ‡å®šçš„xmlæ–‡ä»¶
        InputStream ins=loader.getResourceAsStream(xml);
        Document doc=reader.read(ins);
        Element root=doc.getRootElement();
        Element foo;

        //4.éå†xmlæ–‡ä»¶ä¸­çš„Beanå®ä¾‹
        for(Iterator i=root.elementIterator(&quot;bean&quot;);i.hasNext();){
            foo= (Element) i.next();
            //5.é’ˆå¯¹æ¯ä¸€ä¸ªbeanå®ä¾‹ï¼Œè·å–beançš„å±æ€§idå’Œclass
            Attribute id=foo.attribute(&quot;id&quot;);
            Attribute cls=foo.attribute(&quot;class&quot;);

            //6.åˆ©ç”¨Javaåå°„æœºåˆ¶ï¼Œé€šè¿‡classçš„åç§°è·å–Classå¯¹è±¡
            Class bean=Class.forName(cls.getText());
            //7.è·å–ä¸¢åº”classä¿¡æ¯
            java.beans.BeanInfo info =java.beans.Introspector.getBeanInfo(bean);
            //8.è·å–å…¶å±æ€§æè¿°
            java.beans.PropertyDescriptor pd[]=info.getPropertyDescriptors();
            //9.åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶åœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼
            Object obj=bean.newInstance();
            //10.éå†è¯¥beançš„propertyå±æ€§
            for(Iterator ite=foo.elementIterator(&quot;property&quot;);ite.hasNext();){
                Element foo2= (Element) ite.next();
                //11.è·å–è¯¥propertyçš„nameå±æ€§
                Attribute name=foo2.attribute(&quot;name&quot;);
                String value=null;
                //12.è·å–è¯¥propertyçš„å­å…ƒç´ çš„å€¼
                for (Iterator ite1 = foo2.elementIterator(&quot;value&quot;); ite1.hasNext();)
                {
                    Element node = (Element) ite1.next();
                    value = node.getText();
                    break;
                }

                //13.åˆ©ç”¨Javaçš„åå°„æœºåˆ¶è°ƒç”¨å¯¹è±¡çš„æŸä¸ªsetæ–¹æ³•ï¼Œå¹¶å°†å€¼è®¾ç½®è¿›å»
                for (int k = 0; k &lt; pd.length; k++) {
                    if (pd[k].getName().equalsIgnoreCase(name.getText()))
                    {
                        Method mSet = null;
                        mSet = pd[k].getWriteMethod();
                        mSet.invoke(obj, value);
                    }
                }
            }
            //14.å°†å¯¹è±¡æ”¾å…¥beanMapä¸­ï¼Œå…¶ä¸­keyä¸ºidå€¼ï¼Œvalueä¸ºå¯¹è±¡
            beanmap.put(id.getText(), obj);
        }
    }
    /**
     * é€šè¿‡beançš„idè·å–beançš„å¯¹è±¡.
     *
     * @param beanName
     *            beançš„id
     * @return è¿”å›å¯¹åº”å¯¹è±¡
     */
    public Object getBean(String beanName) {
        Object obj = beanmap.get(beanName);
        return obj;
    }
}
</code></pre>
<p><code>config.xml</code></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans&gt;
    &lt;bean id=&quot;javaBean&quot; class=&quot;JavaBean&quot;&gt;
        &lt;property name=&quot;username&quot;&gt;
            &lt;value&gt;mic_swift&lt;/value&gt;
        &lt;/property&gt;
        &lt;property name=&quot;password&quot;&gt;
            &lt;value&gt;010101010110&lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<h5 id="springèµ„æºè®¿é—®å·¥å…·ç±»">Springèµ„æºè®¿é—®å·¥å…·ç±»</h5>
<p>JDKæ‰€æä¾›çš„è®¿é—®èµ„æºç±»å¹¶ä¸èƒ½å¾ˆå¥½çš„æ»¡è¶³å„ç§åº•å±‚èµ„æºçš„è®¿é—®éœ€æ±‚ï¼Œå› æ­¤ï¼ŒSpringè®¾è®¡äº†ä¸€ä¸ªResourceæ¥å£ï¼Œå®ƒä¸ºåº”ç”¨æä¾›äº†æ›´å¼ºå¤§çš„è®¿é—®åº•å±‚èµ„æºçš„èƒ½åŠ›ï¼š<br>
<code>ä¸»è¦æ–¹æ³•ï¼š</code></p>
<ul>
<li>boolean exists()</li>
<li>boolean isOpen()</li>
<li>URL getURL();</li>
<li>File getFile();</li>
<li>inputStream getInputStream();</li>
</ul>
<p><code>å…·ä½“å®ç°ç±»</code></p>
<ul>
<li>ByteArrayResource</li>
<li>ClassPathResource</li>
<li>FileSystemResource</li>
<li>InputStreamResource</li>
<li>ServletContextResource</li>
<li>UrlResource</li>
</ul>
<p>ä¸ºäº†è®¿é—®ä¸åŒç±»å‹çš„èµ„æºï¼Œå¿…é¡»ä½¿ç”¨ç›¸åº”çš„Resourceå®ç°ç±»ï¼ŒSpringæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„åŠ è½½èµ„æºçš„æœºåˆ¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«ä¸åŒçš„èµ„æºç±»å‹ã€‚<br>
<code>èµ„æºç±»å‹åœ°å€å‰ç¼€</code></p>
<ul>
<li>classpath classpath:com/example/config.xml</li>
<li>File file:/com/example/config.xml</li>
<li>Http http://www.baidu.com</li>
<li>Ftp ftp://www.baidu.com</li>
<li>æ— å‰ç¼€ com/example/config.xml<br>
######BeanFactoryå’ŒApplicationContext<br>
BeanFactoryæ—¶Springæ¡†æ¶çš„æœ€æ ¸å¿ƒæ¥å£ï¼Œå®ƒæä¾›é«˜çº§çš„Iocé…ç½®æœºåˆ¶ï¼ŒAppliactionContextå»ºç«‹åœ¨BeanFactoryåŸºç¡€ä¸Šï¼Œæä¾›äº†æ›´å¤šé¢å‘åº”ç”¨çš„åŠŸèƒ½ï¼Œå®ƒæä¾›äº†å›½é™…åŒ–æ”¯æŒå’Œæ¡†æ¶äº‹ä»¶ä½“ç³»ï¼Œæ›´æ˜“äºåˆ›å»ºå®é™…åº”ç”¨ä¸€èˆ¬æˆBeanFactoryä¸ºIocå®¹å™¨ï¼Œè€Œç§°ApplicationContextä¸ºåº”ç”¨ä¸Šä¸‹æ–‡</li>
</ul>
<p>BeanFactoryæ˜¯ä¸€ä¸ªç±»å·¥å‚ï¼Œå¯ä»¥å¸¸è§å¹¶ç®¡ç†å„ç§ç±»çš„å¯¹è±¡ï¼ŒSpringç§°è¿™äº›åˆ›å»ºå’Œç®¡ç†çš„javaå¯¹è±¡ä¸ºbeanï¼Œåœ¨Springä¸­ï¼Œjavaå¯¹è±¡çš„èŒƒå›´æ›´åŠ å®½æ³›ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹BeanFactoryçš„ç±»ä½“ç³»ç»“æ„ä»¥åŠè£…è½½åˆå§‹åŒ–é¡ºåºè¿›è¡Œè¯´æ˜ï¼š</p>
<h5 id="ç±»ä½“ç³»ç»“æ„">ç±»ä½“ç³»ç»“æ„</h5>
<ul>
<li>XmlBeanFactory</li>
<li>ListableBeanFactory</li>
<li>HierarhicalBeanFactory</li>
<li>ConfigurableBeanFactory</li>
<li>AutowireCapableBeanFactory</li>
<li>SingletonBeanFactory</li>
<li>BeanDefinitionRegistry</li>
</ul>
<h5 id="åˆå§‹åŒ–é¡ºåº">åˆå§‹åŒ–é¡ºåº</h5>
<ul>
<li>åˆ›å»ºé…ç½®æ–‡ä»¶</li>
<li>è£…è½½é…ç½®æ–‡ä»¶</li>
<li>å¯åŠ¨Iocå®¹å™¨</li>
<li>è·å–Beanå®ä¾‹</li>
</ul>
<p>ApplicationContextç”±BeanFactoryæ´¾ç”Ÿè€Œæ¥ï¼Œæä¾›äº†æ›´å¤šé¢å‘å®é™…çš„åŠŸèƒ½ã€‚åœ¨BeanFactoryä¸­ï¼Œå¾ˆå¤šåŠŸèƒ½éœ€è¦ä»¥ç¼–ç¨‹çš„æ–¹å¼å®ç°ï¼Œè€Œåœ¨ApplicationContextä¸­åˆ™å¯ä»¥é€šè¿‡é…ç½®çš„æ–¹å¼å®ç°ï¼Œæ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹ApplicationContextçš„å®ç°ç±»ä»¥åŠç±»ä½“ç³»ç»“æ„ï¼š</p>
<p><code>å…·ä½“å®ç°ç±»</code></p>
<ul>
<li>ClassPathXmlApplicationContext</li>
<li>FileSystemXmlApplicationContext</li>
<li>ConfigurableApplicationContext<br>
<code>ç±»ç»§æ‰¿ä½“ç³»</code>(æ‰©å±•æ¥å£)</li>
<li>ApplicationEventPublisher</li>
<li>MessageSource</li>
<li>ResourcePatternResolver</li>
<li>LifeCycle(ç”¨äºå¤„ç†å¼‚æ­¥)</li>
</ul>
<p>Springå®¹å™¨ä¸­çš„Beanæ‹¥æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼Œç”±å¤šä¸ªç‰¹å®šçš„ç”Ÿå‘½é˜¶æ®µç»„æˆï¼Œæ¯ä¸ªç”Ÿå‘½é˜¶æ®µéƒ½å…è®¸å¤–ç•Œå¯¹Beanè¿›è¡Œæ§åˆ¶ï¼Œåœ¨Springä¸­ï¼Œæˆ‘ä»¬ä»Beançš„ä½œç”¨èŒƒå›´å’Œå®ä¾‹åŒ–Beanæ—¶æ‰€ç»å†çš„ä¸€ç³»åˆ—é˜¶æ®µæ¥æè¿°Beançš„ç”Ÿå‘½å‘¨æœŸ</p>
<ul>
<li>BeanFactoryä¸­çš„Beançš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>ApplicationContextä¸­çš„Beançš„ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<h5 id="springå®¹å™¨å¯åŠ¨åŸºæœ¬æ¡ä»¶">Springå®¹å™¨å¯åŠ¨åŸºæœ¬æ¡ä»¶</h5>
<ul>
<li>Springæ¡†æ¶ç±»åŒ…</li>
<li>Beané…ç½®ä¿¡æ¯</li>
<li>Beanç±»æ»¡è¶³</li>
</ul>
<h5 id="beançš„å…ƒæ•°æ®ä¿¡æ¯">Beançš„å…ƒæ•°æ®ä¿¡æ¯</h5>
<ul>
<li>Beançš„å®ç°ç±»</li>
<li>Beançš„å±æ€§ä¿¡æ¯</li>
<li>Beançš„ä¾èµ–å…³ç³»</li>
<li>Beançš„è¡Œä¸ºé…ç½®</li>
<li>Beançš„åˆ›å»ºæ–¹å¼</li>
</ul>
<p>ä½¿ç”¨é™æ€å·¥å‚çš„æ–¹å¼é™¤äº†æŒ‡å®šå¿…é¡»çš„classå±æ€§ï¼Œè¿˜è¦æŒ‡å®šfactory-methodå±æ€§æ¥æŒ‡å®šå®ä¾‹åŒ–Beançš„æ–¹æ³•ï¼Œè€Œä¸”ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä¹Ÿå…è®¸æŒ‡å®šæ–¹æ³•å‚æ•°ï¼ŒSpringIocå®¹å™¨å°†è°ƒç”¨æ­¤å±æ€§çš„æ–¹æ³•æ¥è·å–Beanã€‚</p>
<p>ä½¿ç”¨å®ä¾‹å·¥å‚æ–¹æ³•ä¸èƒ½æŒ‡å®šclaså±æ€§ï¼Œæ­¤æ—¶å¿…é¡»ä½¿ç”¨factory-beanæ¥æŒ‡å®šå·¥å‚Beanï¼Œfactory-methodå±æ€§æŒ‡å®šå®ä¾‹åŒ–Beançš„æ–¹æ³•ï¼Œè€Œä¸”ä½¿ç”¨å®ä¾‹å·¥å‚æ–¹æ³•å…è®¸æŒ‡å®šæ–¹æ³•å‚æ•°ï¼Œæ–¹å¼å’Œä½¿ç”¨æ„é€ å™¨æ–¹å¼ä¸€æ ·</p>
<pre><code>&lt;bean id=&quot;beanInstanceFactory&quot; class=&quot;com.beijinghuayi.spring.Instance&quot;/&gt;
	&lt;bean id=&quot;helloWorldInstance&quot; factory-bean=&quot;beanInstanceFactory&quot; factory-method=&quot;newInstance&quot;&gt;
		&lt;constructor-arg index=&quot;0&quot; value=&quot;Hello Instance Factory!&quot;&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
</code></pre>
<h5 id="springå¤šä¸ªé…ç½®æ–‡ä»¶çš„æ•´åˆ">Springå¤šä¸ªé…ç½®æ–‡ä»¶çš„æ•´åˆ</h5>
<pre><code>&lt;beans&gt;
    &lt;import resource=&quot;common/Spring-Common.xml&quot;/&gt;
    &lt;import resource=&quot;common/Spring-Connect.xml&quot;/&gt;
    &lt;import resource=&quot;common/Spring-Moudel.xml&quot;/&gt;
&lt;/beans&gt;
</code></pre>
<h5 id="spring-bean-å®šä¹‰ç»§æ‰¿">Spring Bean å®šä¹‰ç»§æ‰¿</h5>
<ul>
<li>Beanå¯ä»¥é€šè¿‡è®¾ç½®é…ç½®æ–‡ä»¶æ¥å®šä¹‰ç»§æ‰¿å…³ç³»</li>
<li>å­ bean çš„å®šä¹‰ç»§æ‰¿çˆ¶å®šä¹‰çš„é…ç½®æ•°æ®ã€‚å­å®šä¹‰å¯ä»¥æ ¹æ®éœ€è¦é‡å†™ä¸€äº›å€¼ï¼Œæˆ–è€…æ·»åŠ å…¶ä»–å€¼ã€‚<code>tip:</code>Spring Bean å®šä¹‰çš„ç»§æ‰¿ä¸ Java ç±»çš„ç»§æ‰¿æ— å…³ï¼Œä½†æ˜¯ç»§æ‰¿çš„æ¦‚å¿µæ˜¯ä¸€æ ·çš„ã€‚</li>
<li>å½“ä½ ä½¿ç”¨åŸºäº XML çš„é…ç½®å…ƒæ•°æ®æ—¶ï¼Œé€šè¿‡ä½¿ç”¨çˆ¶å±æ€§ï¼ŒæŒ‡å®šçˆ¶ bean ä½œä¸ºè¯¥å±æ€§çš„å€¼æ¥è¡¨æ˜å­ bean çš„å®šä¹‰ã€‚</li>
</ul>
<p>é€šè¿‡XMLé…ç½®æ–‡ä»¶å®ç°ç»§æ‰¿å…³ç³»å®ä¾‹</p>
<pre><code>&lt;bean id=&quot;person&quot; class=&quot;com.example.Person&quot;&gt;
      &lt;property name=&quot;name&quot; value=&quot;swift&quot;/&gt;
      &lt;property name=&quot;details&quot; value=&quot;animal can speak&quot;/&gt;
   &lt;/bean&gt;

   &lt;bean id=&quot;student&quot; class=&quot;com.example.Student&quot; parent=&quot;person&quot;&gt;
      &lt;property name=&quot;name&quot; value=&quot;study&quot;/&gt;
      &lt;property name=&quot;details&quot; value=&quot;good good study, day day up!&quot;/&gt;
   &lt;/bean&gt;
</code></pre>
<p><code>tipï¼š</code>åœ¨å®šä¹‰Studentç±»çš„æ—¶å€™æˆ‘ä»¬ä¸å†éœ€è¦ç»§æ‰¿Personç±»</p>
<h5 id="bean-å®šä¹‰æ¨¡æ¿">Bean å®šä¹‰æ¨¡æ¿</h5>
<pre><code>&lt;bean id=&quot;person&quot; abstract=&quot;true&quot;&gt;
      &lt;property name=&quot;name&quot; value=&quot;swift&quot;/&gt;
      &lt;property name=&quot;details&quot; value=&quot;animal can speak&quot;/&gt;
   &lt;/bean&gt;

   &lt;bean id=&quot;student&quot; class=&quot;com.example.Student&quot; parent=&quot;person&quot;&gt;
      &lt;property name=&quot;name&quot; value=&quot;study&quot;/&gt;
      &lt;property name=&quot;details&quot; value=&quot;good good study, day day up!&quot;/&gt;
   &lt;/bean&gt;
</code></pre>
<p>person è‡ªèº«ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå› ä¸ºå®ƒæ˜¯ä¸å®Œæ•´çš„(æ²¡æœ‰æŒ‡å®šclasså±æ€§)ï¼Œè€Œä¸”å®ƒä¹Ÿè¢«æ˜ç¡®åœ°æ ‡è®°ä¸ºæŠ½è±¡çš„ã€‚å½“ä¸€ä¸ªå®šä¹‰æ˜¯æŠ½è±¡çš„ï¼Œå®ƒä»…ä»…ä½œä¸ºä¸€ä¸ªçº¯ç²¹çš„æ¨¡æ¿ bean å®šä¹‰æ¥ä½¿ç”¨çš„ï¼Œå……å½“å­å®šä¹‰çš„çˆ¶å®šä¹‰ä½¿ç”¨ã€‚</p>
<h5 id="spring-ä¾èµ–æ³¨å…¥">Spring ä¾èµ–æ³¨å…¥</h5>
<p>å½“ç¼–å†™ä¸€ä¸ªå¤æ‚çš„ Java åº”ç”¨ç¨‹åºæ—¶ï¼Œåº”ç”¨ç¨‹åºçš„ java æœ‰å¤šä¸ªå¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºç±»åº”è¯¥å°½å¯èƒ½ç‹¬ç«‹äºå…¶ä»– Java ç±»æ¥å¢åŠ è¿™äº›ç±»é‡ç”¨çš„å¯èƒ½æ€§ï¼Œä¾èµ–æ³¨å…¥DI<br>
ï¼ˆæˆ–æœ‰æ—¶ç§°ä¸ºå¸ƒçº¿ï¼‰æœ‰åŠ©äºæŠŠè¿™äº›ç±»ç²˜åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶ä¿æŒä»–ä»¬<code>ç‹¬ç«‹</code>ã€‚</p>
<ul>
<li>æ„é€ å‡½æ•°æ³¨å…¥</li>
</ul>
<pre><code>public class Person{
   private Speak speak;
   public Person(Speak speak) {
      this.speak= speak;
   }
}
</code></pre>
<p>ä¾èµ–å…³ç³»é€šè¿‡<code>ç±»æ„é€ å‡½æ•°</code>è¢«æ³¨å…¥åˆ° Personç±»ä¸­ã€‚</p>
<ul>
<li>setteræ–¹æ³•æ³¨å…¥</li>
</ul>
<pre><code>public class Person{
   private Speak speak;
   public void setSpeak(Speak speak){
	   this.speak=speak;
   }
}
</code></pre>
<p>ä¾èµ–å…³ç³»é€šè¿‡<code>ç±»æ„é€ å‡½æ•°</code>è¢«æ³¨å…¥åˆ° Personç±»ä¸­ã€‚æ§åˆ¶æµé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰å·²ç»â€œåè½¬â€ï¼Œå› ä¸ºä½ å·²ç»æœ‰æ•ˆåœ°å§”æ‰˜ä¾èµ–å…³ç³»åˆ°ä¸€äº›å¤–éƒ¨ç³»ç»Ÿã€‚</p>
<ul>
<li>XMLé…ç½®æ–‡ä»¶æ³¨å…¥</li>
</ul>
<pre><code> &lt;bean id=&quot;person&quot; class=&quot;com.example.Person&quot;&gt;
      &lt;constructor-arg ref=&quot;speak&quot;/&gt;
&lt;/bean&gt;
&lt;!-- Definition for speak bean --&gt;
&lt;bean id=&quot;speak&quot; class=&quot;com.example.Speak&quot;&gt;
&lt;/bean&gt;
</code></pre>
<h5 id="spring-åŸºäºè®¾å€¼å‡½æ•°çš„ä¾èµ–æ³¨å…¥">Spring åŸºäºè®¾å€¼å‡½æ•°çš„ä¾èµ–æ³¨å…¥</h5>
<p>å½“å®¹å™¨è°ƒç”¨ä¸€ä¸ªæ— å‚çš„æ„é€ å‡½æ•°æˆ–ä¸€ä¸ªæ— å‚çš„é™æ€ factory æ–¹æ³•æ¥åˆå§‹åŒ–ä½ çš„ bean åï¼Œé€šè¿‡å®¹å™¨åœ¨ä½ çš„ bean ä¸Šè°ƒç”¨è®¾å€¼å‡½æ•°ï¼ŒåŸºäºè®¾å€¼å‡½æ•°çš„ DI å°±å®Œæˆäº†ã€‚</p>
<pre><code> &lt;bean id=&quot;person&quot; class=&quot;com.example.Person&quot;&gt;
      &lt;property name=&quot;speak&quot; ref=&quot;speak&quot;&gt;
&lt;/bean&gt;
&lt;!-- Definition for speak bean --&gt;
&lt;bean id=&quot;speak&quot; class=&quot;com.example.Speak&quot;&gt;
&lt;/bean&gt;
</code></pre>
<ul>
<li>
<p><code>Tipï¼š</code>æ­¤æ–¹æ³•å’Œæ„é€ å‡½æ•°æ³¨å…¥å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯åœ¨åŸºäºæ„é€ å‡½æ•°æ³¨å…¥ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ ‡ç­¾ä¸­çš„å…ƒç´ ï¼Œè€Œåœ¨åŸºäºè®¾å€¼å‡½æ•°çš„æ³¨å…¥ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ ‡ç­¾ã€‚</p>
</li>
<li>
<p><code>tipï¼š</code>å¦‚æœä½ è¦æŠŠä¸€ä¸ªå¼•ç”¨ä¼ é€’ç»™ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ æ ‡ç­¾çš„ ref å±æ€§ï¼Œè€Œå¦‚æœä½ è¦ç›´æ¥ä¼ é€’ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨ value å±æ€§ã€‚</p>
</li>
</ul>
<h5 id="p-namespace"><code>p-namespace</code></h5>
<pre><code>&lt;bean id=&quot;test&quot; class=&quot;com.example.Person&quot;&gt;
      &lt;property name=&quot;name&quot; value=&quot;swift&quot;/&gt;
      &lt;property name=&quot;method&quot; ref=&quot;speak&quot;/&gt;
&lt;/bean&gt;
//å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ç®€åŒ–è¡¨ç¤º
&lt;bean id=&quot;test&quot; class=&quot;com.example.Person&quot;
      p:name=&quot;swift&quot;
      p:method=&quot;speak&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<h5 id="æ³¨å…¥å†…éƒ¨bean">æ³¨å…¥å†…éƒ¨bean</h5>
<p>inner beanæ˜¯åœ¨beanç±»ä¸­æ·»åŠ çš„å†…éƒ¨ç±»ï¼ˆjavaå†…éƒ¨ç±»ï¼‰</p>
<pre><code>&lt;bean id=&quot;person&quot; class=&quot;com.sunxiaohang.Person&quot;&gt;
        &lt;property name=&quot;speak&quot;&gt;
            &lt;bean id=&quot;speak&quot; class=&quot;com.sunxiaohang.Speak&quot;&gt;&lt;/bean&gt;
        &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>tip:<code>&lt;!--propertyéœ€è¦æä¾›setæ–¹æ³•æ‰èƒ½ä½¿ç”¨--&gt;</code></p>
<h5 id="springæ³¨å…¥é›†åˆ">Springæ³¨å…¥é›†åˆ</h5>
<p>Springæä¾›äº†å››ç§é›†åˆç±»</p>
<table>
<thead>
<tr>
<th>Springé›†åˆç±»</th>
</tr>
</thead>
<tbody>
<tr>
<td>Map</td>
</tr>
<tr>
<td>Properties</td>
</tr>
<tr>
<td>Set</td>
</tr>
<tr>
<td>List</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸‹æ˜¯<code>Collections</code>ç±»å’Œ<code>springbean.xml</code>çš„é…ç½®ä»£ç </p>
<pre><code>package com.sunxiaohang;

import java.util.List;
import java.util.Map;
import java.util.Properties;
import java.util.Set;

public class Collections {
    private Set collectionSet;
    private Map collectionMap;
    private Properties collectionProperties;
    private List collectionList;

    public Collections() {
    }

    public Set getCollectionSet() {
        System.out.println(&quot;Set Element:&quot;+collectionSet);
        return collectionSet;
    }

    public void setCollectionSet(Set collectionSet) {
        this.collectionSet = collectionSet;
    }

    public Map getCollectionMap() {
        System.out.println(&quot;Map Element:&quot;+collectionMap);
        return collectionMap;
    }

    public void setCollectionMap(Map collectionMap) {
        this.collectionMap = collectionMap;
    }

    public Properties getCollectionProperties() {
        System.out.println(&quot;Properties Element:&quot;+collectionProperties);
        return collectionProperties;
    }

    public void setCollectionProperties(Properties collectionProperties) {
        this.collectionProperties = collectionProperties;
    }

    public List getCollectionList() {
        System.out.println(&quot;list Element:&quot;+collectionList);
        return collectionList;
    }

    public void setCollectionList(List collectionList) {
        this.collectionList = collectionList;
    }
}

</code></pre>
<pre><code>&lt;bean id=&quot;collections&quot; class=&quot;com.sunxiaohang.Collections&quot;&gt;
    &lt;property name=&quot;collectionList&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;å¼ ä¸‰&lt;/value&gt;
            &lt;value&gt;æå››&lt;/value&gt;
            &lt;value&gt;ç‹äº”&lt;/value&gt;
            &lt;value&gt;é©¬å…­&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name=&quot;collectionSet&quot;&gt;
        &lt;set&gt;
            &lt;value&gt;åŒ—äº¬&lt;/value&gt;
            &lt;value&gt;å¤©æ´¥&lt;/value&gt;
            &lt;value&gt;ä¸Šæµ·&lt;/value&gt;
            &lt;value&gt;å¹¿å·&lt;/value&gt;
        &lt;/set&gt;
    &lt;/property&gt;
    &lt;property name=&quot;collectionMap&quot;&gt;
        &lt;map&gt;
            &lt;entry key=&quot;1&quot; value=&quot;one&quot;/&gt;
            &lt;entry key=&quot;2&quot; value=&quot;two&quot;/&gt;
            &lt;entry key=&quot;3&quot; value=&quot;three&quot;/&gt;
            &lt;entry key=&quot;4&quot; value=&quot;four&quot;/&gt;
        &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name=&quot;collectionProperties&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;1&quot;&gt;å§“å&lt;/prop&gt;
            &lt;prop key=&quot;2&quot;&gt;æ€§åˆ«&lt;/prop&gt;
            &lt;prop key=&quot;3&quot;&gt;å¹´é¾„&lt;/prop&gt;
            &lt;prop key=&quot;4&quot;&gt;å‡ºç”Ÿæ—¥æœŸ&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç®—æ³•]]></title>
        <id>https://sunxiaohang.github.io/post/suan-fa/</id>
        <link href="https://sunxiaohang.github.io/post/suan-fa/">
        </link>
        <updated>2018-12-20T03:37:58.000Z</updated>
        <summary type="html"><![CDATA[<p>ç®—æ³•åŒ…æ‹¬ï¼ŒåŸºç¡€æŸ¥æ‰¾å’Œæ’åºç®—æ³•ï¼Œæ·±åº¦å¹¿åº¦ä¼˜å…ˆéå†ï¼Œè¿·å®«æ±‚è§£ç®—æ³•ï¼Œä¼˜å…ˆé˜Ÿåˆ—ï¼Œåˆ†æ”¯é™ç•Œï¼ŒåŠ¨æ€è§„åˆ’å’Œè¯¸å¦‚Nçš‡åç­‰ç®—æ³•åº”ç”¨ï¼Œé‡ç‚¹å…³æ³¨åŸºç¡€ç®—æ³•ï¼Œå’Œè¯¸å¦‚åŠ¨æ€è§„åˆ’çš„ä¸€èˆ¬ç®—æ³•æ€æƒ³ï¼Œé€’å½’å’Œéé€’å½’ç®—æ³•å®ç°çš„ä¼˜ç¼ºç‚¹ï¼Œå‚è€ƒç®—æ³•å¯¼è®º</p>
]]></summary>
        <content type="html"><![CDATA[<p>ç®—æ³•åŒ…æ‹¬ï¼ŒåŸºç¡€æŸ¥æ‰¾å’Œæ’åºç®—æ³•ï¼Œæ·±åº¦å¹¿åº¦ä¼˜å…ˆéå†ï¼Œè¿·å®«æ±‚è§£ç®—æ³•ï¼Œä¼˜å…ˆé˜Ÿåˆ—ï¼Œåˆ†æ”¯é™ç•Œï¼ŒåŠ¨æ€è§„åˆ’å’Œè¯¸å¦‚Nçš‡åç­‰ç®—æ³•åº”ç”¨ï¼Œé‡ç‚¹å…³æ³¨åŸºç¡€ç®—æ³•ï¼Œå’Œè¯¸å¦‚åŠ¨æ€è§„åˆ’çš„ä¸€èˆ¬ç®—æ³•æ€æƒ³ï¼Œé€’å½’å’Œéé€’å½’ç®—æ³•å®ç°çš„ä¼˜ç¼ºç‚¹ï¼Œå‚è€ƒç®—æ³•å¯¼è®º</p>
<!-- more -->
<h4 id="å…±äº«æ•°ç»„åŸåœ°é€†ç½®">å…±äº«æ•°ç»„åŸåœ°é€†ç½®</h4>
<pre><code>public class Main {
    public static char array[]={'A','B','C','D','E','F','G','H','1','2','3','4'};
    public static void main(String[] args) {
        reverse(0,7);//é€†ç½®å­—æ¯åºåˆ—ç»“æœä¸ºï¼šHGFEDCBA1234
        reverse(8,11);//é€†ç½®æ•°å­—åºåˆ—ç»“æœä¸ºï¼šHGFEDCBA4321
        reverse(0,11);//æ•´ä½“é€†ç½®ç»“æœä¸ºï¼š1234ABCDEFG
        print(array);
    }
    public static void reverse(int start,int end){//é€†ç½®å‡½æ•°
        char temp;
        while(start&lt;end) {
            temp = array[start];
            array[start++] = array[end];
            array[end--] = temp;
        }
    }
    private static void print(char[] array) {
        for (int i = 0; i &lt;array.length; i++)
            System.out.print(array[i]);
        System.out.println();
    }
}
</code></pre>
<h4 id="n-çš‡åé—®é¢˜">N çš‡åé—®é¢˜</h4>
<pre><code>/**
 * n queens problem
 *
 * */
public class EightQueen {
    private int QUEEN_COUNT = 0;//represent the queen count
    private int[][] queenCount;//chess box matrix
    private int resultCount = 0;//solution number
    private int[] queenPlace;//mark the queen placed position
    /**
     * construct a EightQueen with a argument represent the number of queen
     * initial a empty chess box
     * 0 represent empty
     * 1 represent the area has been taken
     * recurse to call the putQueen method
     * the queenPlace array to mark the queen's taken area which uses to print
     *
     * */
    public EightQueen(int n) {
        this.QUEEN_COUNT = n;
        this.resultCount = 0;
        this.queenCount = new int[QUEEN_COUNT][QUEEN_COUNT];
        queenPlace = new int[QUEEN_COUNT];
        putQueen(0);
    }
    /**
     * implement the putQueen function to recursion
     * use column index in outer loop and row index in inner loop with step increase
     * */
    private void putQueen(int row) {
        for (int column = 0; column &lt; QUEEN_COUNT; column++) {//loop for QUEEN_COUNT times
            if (queenCount[row][column] == 0) {//judge the condition
                /**
                 * each row has one queen
                 * mark the column and diagonal back diagonal(row has been scatter)
                 *
                 * */
                for (int nextRow = row + 1; nextRow &lt; QUEEN_COUNT; nextRow++) {
                    queenCount[nextRow][column]++;
                    if (column - nextRow + row &gt;= 0) {
                        queenCount[nextRow][column - nextRow + row]++;
                    }
                    if (column + nextRow - row &lt; QUEEN_COUNT) {
                        queenCount[nextRow][column + nextRow - row]++;
                    }
                }
                queenPlace[row] = column;//place the queen with only column information
                if (row == QUEEN_COUNT - 1) printQueen(++resultCount);//recursion has completed
                else putQueen(row + 1);//recurse to call the putQueen function
                /**
                 *
                 * unmarked the column and diagonal back diagonal(row has been scatter)
                 *
                 * */
                for (int rows = row + 1; rows &lt; QUEEN_COUNT; rows++) {
                    queenCount[rows][column]--;
                    if (column - rows + row &gt;= 0) {
                        queenCount[rows][column - rows + row]--;
                    }
                    if (column + rows - row &lt; QUEEN_COUNT) {
                        queenCount[rows][column + rows - row]--;
                    }
                }
            }
        }
        if (row == 0) System.out.println(QUEEN_COUNT + &quot; queens has totally &quot; + resultCount + &quot;result.&quot;);
    }

    private void printQueen(int size)
    {
        System.out.println(&quot;********** &quot;+size+&quot; **********\n&quot;);
        for (int i = 0; i &lt; QUEEN_COUNT; i++) {
            for (int j = 0; j &lt; QUEEN_COUNT; j++) {
                System.out.print(queenPlace[i] == j ? &quot; # &quot; : &quot; - &quot;);
            }
            System.out.println();
        }
    }
}

</code></pre>
<h4 id="æœ€å¤§å­åºå’Œé—®é¢˜">æœ€å¤§å­åºå’Œé—®é¢˜</h4>
<pre><code>int MaxSubSeqSum(int arrays[], int left, int right) {
    int sum = 0;
    if (left == right) {
        if (arrays[left] &gt; 0)return arrays[left];
        else sum = 0;
    } else {
        int middle = (left + right) / 2;
        int leftSum = MaxSubSeqSum(arrays, left, middle);
        int rightSum = MaxSubSeqSum(arrays, middle + 1, right);
        int finalLeftSum = 0, thisLeftSum = 0;
        for (int i = left; i &lt;=middle; i++) {
            thisLeftSum += arrays[i];
            if (thisLeftSum &gt; finalLeftSum)finalLeftSum = thisLeftSum;
        }
        int finalRightSum = 0, thisRightSum = 0;
        for (int j = middle + 1; j &lt; right; j++) {
            thisRightSum += arrays[j];
            if (thisRightSum &gt; finalRightSum)finalRightSum = thisRightSum;
        }
        sum = finalLeftSum + finalRightSum;
        printf(&quot;left sum is %d,right sum is %d\n&quot;,finalLeftSum,finalRightSum);
        if (sum &lt; leftSum)sum = leftSum;
        if (sum &lt; rightSum)sum = rightSum;
    }
    return sum;
}
</code></pre>
<h4 id="ä¼˜å…ˆé˜Ÿåˆ—">ä¼˜å…ˆé˜Ÿåˆ—</h4>
<pre><code>/**
 * use maximum-top heap to implement priority queue
 * define a MAX_SIZE_OF_PRIORITY_QUEUE to limit the max length of priority queue
 * use a integer array to store element
 * hypothesis i is the root node and then use 2*i to mark left child and 2*i+1 to mark right child
 * use initialArray[0] to store the length of heap
 * */
public class PriorityQueue{
    private static final int MAX_SIZE_OF_PRIORITY_QUEUE=100;
    private int[] initialArray;
    /**
     * initial priority queue with a exist array which can't be null
     * */
    public PriorityQueue(int[] initialElement) {
        if(initialElement==null)return;
        if(initialElement.length==0)return;
        initialArray=new int[MAX_SIZE_OF_PRIORITY_QUEUE];
        initialArray[0]=initialElement.length;
        for(int i=0;i&lt;initialElement.length;i++)initialArray[i+1]=initialElement[i];
        System.out.println(initialArray[0]);
        for (int i = initialArray[0]; i &gt;0 ; i--)reBuildHeap(i);
    }
    /**
     * rebuild array according to the value of each node
     * maximum-top heap
     * index represents the index of a node which should be rebuild(include it's children node)
     *
     * simple:
     *         1
     *      2     3
     *   4   5  6   7
     *
     * */
    private void reBuildHeap(int index){
        System.out.println(&quot;execute rebuild function to rebuild a maximum-top heap with one loop&quot;);
        int leftChildIndex=index*2;
        int rightChildIndex=leftChildIndex+1;
        int length=initialArray[0];
        int biggerValueIndex=-1;
        if(leftChildIndex&gt;length&amp;&amp;rightChildIndex&gt;length){
            System.out.println(&quot;no left child&quot;);
            return;
        }
        if(leftChildIndex&lt;=length&amp;&amp;rightChildIndex&gt;length){
            System.out.println(&quot;only left child&quot;);
            biggerValueIndex=leftChildIndex;
        }
        if(leftChildIndex&gt;length&amp;&amp;rightChildIndex&lt;=length){
            System.out.println(&quot;only right child&quot;);
            biggerValueIndex=rightChildIndex;
        }
        if(leftChildIndex&lt;=length&amp;&amp;rightChildIndex&lt;=length){
            System.out.println(&quot;both children&quot;);
            biggerValueIndex=initialArray[leftChildIndex]&gt;initialArray[rightChildIndex]?leftChildIndex:rightChildIndex;
        }
        if(initialArray[index]&gt;initialArray[biggerValueIndex]){
            System.out.println(&quot;unnecessary to swap!&quot;);
            return;
        }else{
            int temp=initialArray[index];
            initialArray[index]=initialArray[biggerValueIndex];
            initialArray[biggerValueIndex]=temp;
            this.reBuildHeap(biggerValueIndex);
        }
    }
    public int getLength() {
        return initialArray[0];
    }
    /**
     * get top priority value of heap
     * the first element of array
     * */
    public int priority(){
        return initialArray[1];
    }
    /**
     * length++
     * add element to the tail of array
     * rebuild the heap to regular priority heap
     * */
    public void insert(int element){
        initialArray[0]++;
        initialArray[initialArray[0]]=element;
        for(int i=initialArray[0];i&gt;=1;i=i/2){
            reBuildHeap(i);
        }
    }
    /**
     * length--
     * swap the first element and last element
     * delete last value
     * rebuild the heap
     * */
    public int deletePriority(){
        if(initialArray[0]&lt;=0)return -1;
        int maxValue=initialArray[1];
        initialArray[1]=initialArray[initialArray[0]];
        initialArray[0]--;
        for(int i=initialArray[0];i&gt;=1;i=i/2){
            reBuildHeap(i);
        }
        return maxValue;
    }
    /**
     * print the structure of priority heap
     * */
    @Override
    public String toString() {
        StringBuilder builder=new StringBuilder(&quot;{&quot;);
        for (int i = 1; i &lt;= initialArray[0]; i++) {
            if(i!=1)builder.append(&quot;,&quot;);
            builder.append(initialArray[i]);
        }
        builder.append(&quot;}&quot;);
        return builder.toString();
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®¾è®¡æ¨¡å¼]]></title>
        <id>https://sunxiaohang.github.io/post/she-ji-mo-shi/</id>
        <link href="https://sunxiaohang.github.io/post/she-ji-mo-shi/">
        </link>
        <updated>2018-06-13T11:19:42.000Z</updated>
        <summary type="html"><![CDATA[<p>ä»…åŒ…å«è®¾è®¡æ¨¡å¼çš„ä¸€èˆ¬å®ç°å’Œè®¾è®¡æ€æƒ³ä»¥åŠè®¾è®¡æ¨¡å¼çš„ä½¿ç”¨æ–¹å‘ï¼Œä¸æ‹˜æ³¥äºå…·ä½“è¯­è¨€ã€‚ä»¥ä¸‹è®¾è®¡æ¨¡å¼æ€æƒ³ä»…åŸºäºJavaè¯­è¨€å®ç°ï¼Œæ—¨åœ¨ä¼˜åŒ–è½¯ä»¶å·¥ç¨‹ç»“æ„ï¼Œå®Œå–„é¡¹ç›®çš„é²æ£’æ€§å’Œå¥å£®æ€§ï¼Œä¾¿äºåæœŸè¿­ä»£å’Œç»´æŠ¤ã€‚åŒ…å«è®¾è®¡æ¨¡å¼çš„ä¸€èˆ¬åŸåˆ™å’Œå¸¸ç”¨è®¾è®¡æ¨¡å¼ç›¸å…³è§„èŒƒã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä»…åŒ…å«è®¾è®¡æ¨¡å¼çš„ä¸€èˆ¬å®ç°å’Œè®¾è®¡æ€æƒ³ä»¥åŠè®¾è®¡æ¨¡å¼çš„ä½¿ç”¨æ–¹å‘ï¼Œä¸æ‹˜æ³¥äºå…·ä½“è¯­è¨€ã€‚ä»¥ä¸‹è®¾è®¡æ¨¡å¼æ€æƒ³ä»…åŸºäºJavaè¯­è¨€å®ç°ï¼Œæ—¨åœ¨ä¼˜åŒ–è½¯ä»¶å·¥ç¨‹ç»“æ„ï¼Œå®Œå–„é¡¹ç›®çš„é²æ£’æ€§å’Œå¥å£®æ€§ï¼Œä¾¿äºåæœŸè¿­ä»£å’Œç»´æŠ¤ã€‚åŒ…å«è®¾è®¡æ¨¡å¼çš„ä¸€èˆ¬åŸåˆ™å’Œå¸¸ç”¨è®¾è®¡æ¨¡å¼ç›¸å…³è§„èŒƒã€‚</p>
<!-- more -->
<h3 id="å…­å¤§è®¾è®¡åŸåˆ™">å…­å¤§è®¾è®¡åŸåˆ™</h3>
<h5 id="å•ä¸€èŒè´£åŸåˆ™">å•ä¸€èŒè´£åŸåˆ™</h5>
<blockquote>
<p>åˆ†ç¦»ä¸šåŠ¡å¯¹è±¡å’Œä¸šåŠ¡é€»è¾‘</p>
</blockquote>
<h5 id="é‡Œæ°æ›¿æ¢åŸåˆ™">é‡Œæ°æ›¿æ¢åŸåˆ™</h5>
<blockquote>
<ul>
<li>å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»æ–¹æ³•</li>
<li>å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§</li>
<li>è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ˜¯<code>è¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§</code></li>
<li>è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ˜¯<code>è¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å°</code></li>
</ul>
</blockquote>
<h5 id="ä¾èµ–å€’ç½®åŸåˆ™">ä¾èµ–å€’ç½®åŸåˆ™</h5>
<blockquote>
<ul>
<li>é«˜å±‚æ¨¡å—ä¸ä¾èµ–åº•å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–å…¶æŠ½è±¡</li>
<li>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚</li>
<li>ç»†èŠ‚åº”è¯¥ä»¥æ¥æŠ½è±¡</li>
</ul>
</blockquote>
<h5 id="æ¥å£éš”ç¦»åŸåˆ™">æ¥å£éš”ç¦»åŸåˆ™</h5>
<blockquote>
<ul>
<li>æ¥å£å°½é‡å°</li>
<li>æ¥å£é«˜å†…èš</li>
<li>å®šåˆ¶æœåŠ¡</li>
<li>æ¥å£çš„è®¾è®¡æ˜¯æœ‰é™åº¦çš„</li>
</ul>
</blockquote>
<h5 id="è¿ªç±³ç‰¹æ³•åˆ™æœ€å°‘çŸ¥é“åŸåˆ™">è¿ªç±³ç‰¹æ³•åˆ™[æœ€å°‘çŸ¥é“åŸåˆ™]</h5>
<blockquote>
<ul>
<li>åªå’Œæœ‹å‹äº¤æµ</li>
<li>æœ‹å‹ä¹‹é—´ä¹Ÿæœ‰<code>è·ç¦»</code></li>
<li>æ˜¯è‡ªå·±çš„å°±æ˜¯è‡ªå·±çš„</li>
<li>è°¨æ…ä½¿ç”¨Serializable</li>
</ul>
</blockquote>
<h5 id="å¼€é—­åŸåˆ™">å¼€é—­åŸåˆ™</h5>
<blockquote>
<p>æ‰©å±•å¼€æ”¾ï¼Œä¿®æ”¹å…³é—­</p>
</blockquote>
<h3 id="å•ä¾‹æ¨¡å¼">å•ä¾‹æ¨¡å¼</h3>
<h5 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h5>
<ul>
<li>è¦æ±‚ç”Ÿæˆå”¯ä¸€åºåˆ—å·çš„ç¯å¢ƒ</li>
<li>å…±äº«è®¿é—®æˆ–å…±äº«æ•°æ®</li>
<li>å¯¹è±¡åˆ›å»ºèµ„æºæ¶ˆè€—å¤§</li>
<li>éœ€è¦å®šä¹‰å¤§é‡çš„é™æ€å¸¸é‡å’Œé™æ€æ–¹</li>
</ul>
<h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼">å·¥å‚æ–¹æ³•æ¨¡å¼</h3>
<p><code>Example</code></p>
<pre><code>// Human.java
public interface Human {
    void getColor();
}
// WhiteHuman.java
public class WhiteHuman implements Human{
    @Override
    public void getColor() {
        System.out.println(&quot;white Human color!&quot;);
    }
}
// AbstractHumanFactory.java
/**
 * å¿…éœ€æ˜¯Classç±»å‹
 * å¿…é¡»æ˜¯Humançš„å®ç°ç±»
 * */
public abstract class AbstractHumanFactory {
    public abstract &lt;T extends Human&gt; T createHuman(Class&lt;T&gt; c);
}
// Useage
AbstractHumanFactory factory = new HumanFactory();
Human whiteMan = factory.createHuman(WhiteHuman.class);
</code></pre>
<h5 id="ç®€å•å·¥å‚">ç®€å•å·¥å‚</h5>
<pre><code>// HumanFactory.java
/**
* ç›´æ¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œè·³è¿‡æŠ½è±¡å·¥å‚
*/
public class HumanFactory {
    public static &lt;T extends Human&gt; T createHuman(Class&lt;T&gt; c){
        Human human = null;
        try {
            human = (Human) Class.forName(c.getName()).newInstance();
        } catch (Exception e) {
            System.out.println(&quot;specify human class error!&quot;);
        } 
        return (T) human;
    }
}
// Usage
HumanFactory.createHuman(White.class);
</code></pre>
<h5 id="å·¥å‚å•ä¾‹">å·¥å‚å•ä¾‹</h5>
<pre><code>// SingletonFactory.java
public class SingletonFactory {
    private static Singleton sigleton;
    static {
        try {
            Class clazz = Class.forName(Singleton.class.getName());
            Constructor constructor = clazz.getDeclaredConstructor();
            constructor.setAccessible(true);
            sigleton = (Singleton) constructor.newInstance();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } 
    }
    public Singleton getSigleton(){
        return sigleton;
    }
}
</code></pre>
<h3 id="æŠ½è±¡å·¥å‚æ¨¡å¼">æŠ½è±¡å·¥å‚æ¨¡å¼</h3>
<figure data-type="image" tabindex="1"><img src="https://upload-images.jianshu.io/upload_images/2480310-9c9889a239cee88c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" loading="lazy"></figure>
<pre><code>// AbstractCreator.java
public abstract class AbstractCreator {
    public abstract AbstractProductA createProductA();
    public abstract AbstractProductB createProductB();
}
// Creator1.java
public class Creator1 extends AbstractCreator{
    @Override
    public AbstractProductA createProductA() {
        return new ProductA1();
    }
    @Override
    public AbstractProductB createProductB() {
        return new ProductB1();
    }
}
// Creator2.java
public class Creator2 extends AbstractCreator{
    @Override
    public AbstractProductA createProductA() {
        return new ProductA2();
    }
    @Override
    public AbstractProductB createProductB() {
        return new ProductB2();
    }
}
</code></pre>
<pre><code>//AbstractProductA.java
public abstract class AbstractProductA {
    public void shareMethod(){}
    public abstract void doSomething();
}
//AbstractProductB.java
public abstract class AbstractProductB {
    public void shareMethod(){}
    public abstract void doSomething();
}
// ProductA1.java
public class ProductA1 extends AbstractProductA{
    @Override
    public void doSomething() {
        System.out.println(&quot;product a1&quot;);
    }
}
// ProductA2.java
public class ProductA2 extends AbstractProductA{
    @Override
    public void doSomething() {
        System.out.println(&quot;product a2&quot;);
    }
}
</code></pre>
<h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3>
<pre><code>public abstract class HummerModel {
     public abstract void start();
     public abstract void stop();       
     public abstract void alarm();
     public abstract void engineBoom();
     public abstract void run(){
         this.start();
         this.engineBoom();
         this.alarm();
         this.stop();   
     }
}
</code></pre>
<h5 id="ä½¿ç”¨åœºæ™¯-2">ä½¿ç”¨åœºæ™¯</h5>
<ul>
<li>å¤šä¸ªå­ç±»æœ‰å…±æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”é€»è¾‘è¿‡ç¨‹åŸºæœ¬ç›¸åŒ</li>
<li>é‡æ„ï¼Œå§ç›¸åŒçš„ä»£ç æŠ½å–åˆ°çˆ¶ç±»ä¸­ï¼Œé€šè¿‡<code>é’©å­å‡½æ•°çº¦æŸè¡Œä¸º</code>(å®ç°ç±»çº¦æŸæ¨¡æ¿ç±»è¡Œä¸º)</li>
</ul>
<pre><code>public abstract class HummerModel {
     public abstract void start();
     public abstract void stop();       
     public abstract void alarm();
     public abstract void engineBoom();
     final public void run() {          
             this.start();              
             this.engineBoom();         
             if(this.isAlarm()){
                      this.alarm();
             }
             this.stop();
     } 
//åœ¨æŠ½è±¡ç±»ä¸­ï¼ŒisAlarmæ˜¯ä¸€ä¸ªå®ç°æ–¹æ³•ï¼Œ
//å…¶ä½œç”¨æ˜¯æ¨¡æ¿æ–¹æ³•æ ¹æ®å…¶è¿”å›å€¼å†³å®šæ˜¯å¦è¦é¸£å–‡å­ï¼Œ
//å­ç±»å¯ä»¥è¦†å†™è¯¥è¿”å›å€¼æ§åˆ¶å…¶è¡Œä¸º.
     protected  boolean isAlarm(){
             return true;
     }
}
</code></pre>
<h3 id="å»ºé€ è€…æ¨¡å¼">å»ºé€ è€…æ¨¡å¼</h3>
<pre><code>/** * æ€»ç»“ï¼š  
* 1.é™æ€å†…éƒ¨ç±»å¯ä»¥æœ‰é™æ€æˆå‘˜(æ–¹æ³•ï¼Œå±æ€§)ï¼Œè€Œéé™æ€å†…éƒ¨ç±»åˆ™ä¸èƒ½æœ‰é™æ€æˆå‘˜(æ–¹æ³•ï¼Œå±æ€§)ã€‚ 
* 2.é™æ€å†…éƒ¨ç±»åªèƒ½å¤Ÿè®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜,è€Œéé™æ€å†…éƒ¨ç±»åˆ™å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜(æ–¹æ³•ï¼Œå±æ€§)ã€‚ 
* 3.å®ä¾‹åŒ–ä¸€ä¸ªéé™æ€çš„å†…éƒ¨ç±»çš„æ–¹æ³•ï¼š 
*  a.å…ˆç”Ÿæˆä¸€ä¸ªå¤–éƒ¨ç±»å¯¹è±¡å®ä¾‹ 
*  OutClassTest oc1 = new OutClassTest(); 
*  b.é€šè¿‡å¤–éƒ¨ç±»çš„å¯¹è±¡å®ä¾‹ç”Ÿæˆå†…éƒ¨ç±»å¯¹è±¡ 
*  OutClassTest.InnerClass no_static_inner = oc1.new InnerClass(); 
*  4.å®ä¾‹åŒ–ä¸€ä¸ªé™æ€å†…éƒ¨ç±»çš„æ–¹æ³•ï¼š 
*  a.ä¸ä¾èµ–äºå¤–éƒ¨ç±»çš„å®ä¾‹,ç›´æ¥å®ä¾‹åŒ–å†…éƒ¨ç±»å¯¹è±¡ 
*  OutClassTest.InnerStaticClass inner = new OutClassTest.InnerStaticClass(); 
*  b.è°ƒç”¨å†…éƒ¨é™æ€ç±»çš„æ–¹æ³•æˆ–é™æ€å˜é‡,é€šè¿‡ç±»åç›´æ¥è°ƒç”¨ 
*  OutClassTest.InnerStaticClass.static_value 
*  OutClassTest.InnerStaticClass.getMessage() 
*/
public class Person {
    private final int id;//èº«ä»½è¯å·
    private final String name;//å§“å
    private int age;//å¹´é¾„
    private boolean sex;//æ€§åˆ«
    private String desc;//ä¸ªäººæè¿°
    private Person(Builder builder){
        this.id=builder.id;
        this.name=builder.name;
        this.age=builder.age;
        this.sex=builder.sex;
        this.desc=builder.desc;
    }
    public static class Builder{
        private final int id;
        private final String name;
        private int age;
        private boolean sex;
        private String desc;
        public Builder(int id, String name) {
            this.id = id;
            this.name = name;
        }
        public Builder age(int age){
            //å¹´é¾„åˆæ³•æ€§æ£€æŸ¥
            if(age&lt;0)throw new IllegalArgumentException();
            else this.age=age;
            return this;
        }
        public Builder sex(boolean sex){
            this.sex=sex;
            return this;
        }
        public Builder desc(String desc){
            this.desc=desc;
            return this;
        }
        public Person build(){
            return new Person(this);
        }
    }
}
</code></pre>
<h3 id="ä»£ç†æ¨¡å¼">ä»£ç†æ¨¡å¼</h3>
<p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®</p>
<h5 id="ç®€å•é™æ€ä»£ç†">ç®€å•é™æ€ä»£ç†</h5>
<pre><code>public class GamePlayerProxy implements IGamePlayer {
     private IGamePlayer gamePlayer = null;     
     public GamePlayerProxy(IGamePlayer _gamePlayer){
             this.gamePlayer = _gamePlayer;
     }
     @Override
     public void killBoss() {
             this.gamePlayer.killBoss();
     }
     @Override
     public void login(String user, String password) {
             this.gamePlayer.login(user, password);
     }
     @Override
     public void upgrade() {
             this.gamePlayer.upgrade();
     }
}
</code></pre>
<h5 id="åŠ¨æ€ä»£ç†">åŠ¨æ€ä»£ç†</h5>
<pre><code>//IGamePlayer.java
public interface IGamePlayer {
    void login(String username,String password);
    void killBoss();
    void upgrade();
}
// GamePlayer.java
public class GamePlayer implements IGamePlayer{
    private String username;
    private String password;
    public GamePlayer(String username) {
        this.username = username;
    }
    @Override
    public void login(String username, String password) {
        this.username = username;
        this.password = password;
        System.out.println(username+&quot; login!&quot;);
    }
    @Override
    public void killBoss() {
        System.out.println(username+&quot; kill boss!&quot;);
    }
    @Override
    public void upgrade() {
        System.out.println(username+&quot; kill upgrade!&quot;);
    }
}
// GamePlayIH.java
public class GamePlayIH implements InvocationHandler {
    private Object obj;
    public GamePlayIH(Object _obj){
        this.obj = _obj;
    }
    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        Object result = method.invoke(this.obj,args);
        if(method.getName().equalsIgnoreCase(&quot;login&quot;))
            System.out.println(&quot;some one login in with my account!&quot;);
        return result;
    }
}
// Usage
IGamePlayer player = new GamePlayer(&quot;zhangsan&quot;);
InvocationHandler handler = new GamePlayIH(player);
ClassLoader loader = player.getClass().getClassLoader();
IGamePlayer proxy = (IGamePlayer) Proxy.newProxyInstance(loader,new Class[]{IGamePlayer.class},handler);
proxy.login(&quot;zhangsan&quot;,&quot;root&quot;);
proxy.killBoss();
proxy.upgrade();
</code></pre>
<h5 id="ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°å‰ç½®åç½®é€šçŸ¥">ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°å‰ç½®åç½®é€šçŸ¥</h5>
<pre><code>// IAdvice.java
public interface IAdvice {
    void exec();
}
//BeforeAdvice.java
public class BeforeAdvice implements IAdvice{
    @Override
    public void exec() {
        System.out.println(&quot;this is a before advice!&quot;);
    }
}
// AfterAdvice.java
public class AfterAdvice implements IAdvice{
    @Override
    public void exec() {
        System.out.println(&quot;this is a after advice!&quot;);
    }
}
//MyInvocationHandler.java
public class MyInvocationHandler implements InvocationHandler {
    private Object obj;
    public MyInvocationHandler(Object obj) {
        this.obj = obj;
    }
    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        return method.invoke(obj,args);
    }
}
//Subject.java
public interface Subject {
    void doSomething(String args);
}
//RealSubject.java
public class RealSubject implements Subject{
    @Override
    public void doSomething(String args) {
        System.out.println(&quot;do something!---&gt;&quot;+args);
    }
}
// DynamicProxy.java
public class DynamicProxy {
    public static void newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler handler){
        if(true){
            new BeforeAdvice().exec();
        }
        Subject subject = (Subject) Proxy.newProxyInstance(loader,interfaces,handler);
        subject.doSomething(&quot;execute!&quot;);
        if(true){
            new AfterAdvice().exec();
        }
    }
}
</code></pre>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</h3>
<p>å®šä¹‰å¯¹è±¡é—´ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ä½¿å¾—æ¯å½“å¯¹è±¡çŠ¶æ€æ”¹å˜ï¼Œåˆ™æ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°</p>
<pre><code>// Observer.java
public interface Observer {
    void update();
}
// ConcreteObserver.java
public class ConcreteObserver implements Observer{
    @Override
    public void update() {
        System.out.println(&quot;æ¥å—æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†ï¼&quot;);
    }
}
// Subject.java
public abstract class Subject {
    private Vector&lt;Observer&gt; observers = new Vector&lt;&gt;();
    public void addObserver(Observer o){
        observers.add(o);
    }
    public void deleteObserver(Observer o){
        observers.remove(o);
    }
    public void notifyObserver(){
        for (Observer o:observers) {
            o.update();
        }
    }
}
// ConcreteSubject.java
public class ConcreteSubject extends Subject{
    public void doSomething(){
        System.out.println(&quot;logic processing!&quot;);
        super.notifyObserver();
    }
}
// Usage
ConcreteSubject subject = new ConcreteSubject();
        Observer observer = new ConcreteObserver();
        subject.addObserver(observer);
        subject.doSomething();
</code></pre>
<h3 id="é—¨é¢æ¨¡å¼">é—¨é¢æ¨¡å¼</h3>
<p>è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸å…¶å†…éƒ¨é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡è¿›è¡Œï¼Œé—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚</p>
<pre><code>// LoginClassFlutter.java
public class ClassA {
     public void doSomethingA(){
             //ä¸šåŠ¡é€»è¾‘
     }
}
public class ClassB {
     public void doSomethingB(){
             //ä¸šåŠ¡é€»è¾‘
     }
}
public class ClassC {
     public void doSomethingC(){
             //ä¸šåŠ¡é€»è¾‘
     }
}
// Facade.java
public class Facade {
     //è¢«å§”æ‰˜çš„å¯¹è±¡
     private ClassA a = new ClassA();
     private ClassB b = new ClassB();
     private ClassC c = new ClassC();
     //æä¾›ç»™å¤–éƒ¨è®¿é—®çš„æ–¹æ³•
     public void methodA(){
             this.a.doSomethingA();
     }
     public void methodB(){
             this.b.doSomethingB();
     }
     public void methodC(){
             this.c.doSomethingC();
     }
}
</code></pre>
<h3 id="è£…é¥°è€…æ¨¡å¼">è£…é¥°è€…æ¨¡å¼</h3>
<p>åŠ¨æ€çš„ç»™ä»¥ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°ç€æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´åŠ çµæ´»</p>
<pre><code>//Component.java
public abstract class Component {
    public abstract void operate();
}
//ConcreteComponent.java
public class ConcreteComponent extends Component{
    @Override
    public void operate() {
        System.out.println(&quot;do something operate!&quot;);
    }
}
//Decorator.java (extent `Component`)
public abstract class Decorator extends Component{
    private Component component = null;
    public Decorator(Component component) {
        this.component = component;
    }
    @Override
    public void operate() {
        this.component.operate();
    }
}
//ConcreteDecorator1.java
public class ConcreteDecorator1 extends Decorator{
    public ConcreteDecorator1(Component component) {
        super(component);
    }
    private void method1(){
        System.out.println(&quot;method1 operate!&quot;);
    }
    @Override
    public void operate() {
        this.method1();
        super.operate();
    }
}
// Usage
Component component = new ConcreteComponent();
component = new ConcreteDecorator1(component);
component = new ConcreteDecorator2(component);
component.operate();
</code></pre>
<h5 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h5>
<ul>
<li>éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½</li>
<li>éœ€è¦åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œä¹Ÿå¯åŠ¨æ€æ’¤é”€</li>
<li>éœ€è¦ä¸ºä¸€æ‰¹å…„å¼Ÿç±»æ€è¡Œæ”¹è£…æˆ–åŠ è£…åŠŸèƒ½</li>
</ul>
<h3 id="è´£ä»»é“¾æ¨¡å¼">è´£ä»»é“¾æ¨¡å¼</h3>
<p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†è¯¥è¯·æ±‚ä¸ºæ­¢ã€‚</p>
<pre><code>class Level{}
class Request{
    public Level getRequestLevel(){
        return null;
    }
}
class Response{}
// Handler.java(abstract interface)
public abstract class Handler {
    private Handler nextHandler;
    public final Response handleMessage(Request request){
        Response response = null;
        if(this.getHandlerLevel().equals(request.getRequestLevel())){
            response = this.echo(request);
        }else {
            if(this.nextHandler != null){
                response = this.nextHandler.handleMessage(request);
            }else {
                System.out.println(&quot; no handler exception&quot;);
                return null;
            }
        }
        return response;
    }
    public void setNext(Handler _handler){
        this.nextHandler = _handler;
    }
    protected abstract Level getHandlerLevel();
    protected abstract Response echo(Request request);
}
// ConcreteHandler1.java
//ConcreteHandler2.java åŒ
//ConcreteHandler3.java åŒ
public class ConcreteHandler1 extends Handler{
    @Override
    protected Level getHandlerLevel() {
        //è®¾ç½®è‡ªå·±çš„å¤„ç†çº§åˆ«
        return null;
    }
    @Override
    protected Response echo(Request request) {
        //å®Œæˆå¤„ç†é€»è¾‘
        return null;
    }
}
// Usage
Handler handler1 = new ConcreteHandler1();
Handler handler2 = new ConcreteHandler2();
Handler handler3 = new ConcreteHandler3();
handler1.setNext(handler2);
handler2.setNext(handler3);
Response response = handler1.handleMessage(new Request());
</code></pre>
<h3 id="è®¿é—®è€…æ¨¡å¼">è®¿é—®è€…æ¨¡å¼</h3>
<p>å°è£…ä¸€äº›ä½œç”¨ä¸æŸç§æ•°æ®ç»“æ„çš„ä¸­çš„å„ç§å…ƒç´ æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°æ“ä½œ</p>
<pre><code>// Element.java
public abstract class Element {
    public abstract void doSomething();
    public abstract void accept(IVisitor visitor);
}
// ConcreteElement1.java
// ConcreteElement2.java åŒ
public class ConcreteElement1 extends Element{
    @Override
    public void doSomething() {
        System.out.println(&quot;processing... 1&quot;);
    }
    @Override
    public void accept(IVisitor visitor) {
        visitor.visit(this);
    }
}
// IVisitor.java
public interface IVisitor {
    public void visit(ConcreteElement1 element1);
    public void visit(ConcreteElement2 element2);
}
//Visitor.java
public class Visitor implements IVisitor{
    @Override
    public void visit(ConcreteElement1 element1) {
        element1.doSomething();
    }
    @Override
    public void visit(ConcreteElement2 element2) {
        element2.doSomething();
    }
}
// Usage
Element element = createElement();
element.accept(new Visitor());
</code></pre>
<h3 id="å‘½ä»¤æ¨¡å¼">å‘½ä»¤æ¨¡å¼</h3>
<p>å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œè®©ä½ ä½¿ç”¨ä¸åŒçš„è¯·æ±‚æŠŠå®¢æˆ·ç«¯å‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œå¯ä»¥æä¾›å‘½ä»¤çš„æ’¤é”€å’Œæ¢å¤åŠŸèƒ½</p>
<pre><code>// Receiver.java
public abstract class Receiver {
    public abstract void doSomething();
}
// ConcreteReceiver1.java
// ConcreteReceiver2.java åŒ
public class ConcreteReceiver1 extends Receiver {
    @Override
    public void doSomething() {
        System.out.println(&quot;receiver 1&quot;);
    }
}
//Command.java
public abstract class Command {
    public abstract void execute();
}
// ConcreteCommand1.java
// ConcreteCommand2.java
public class ConcreteCommand1 extends Command {
    private Receiver receiver;
    public ConcreteCommand1(Receiver receiver) {
        this.receiver = receiver;
    }
    @Override
    public void execute() {
        this.receiver.doSomething();
    }
}
//Invoke.java
public class Invoke {
    private Command command;
    public void setCommand(Command command) {
        this.command = command;
    }
    public void action(){
        this.command.execute();
    }
}
//Usage
Invoke invoke = new Invoke();
Receiver receiver = new ConcreteReceiver1();
Command command = new ConcreteCommand1(receiver);
invoke.setCommand(command);
invoke.action();
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[about]]></title>
        <id>https://sunxiaohang.github.io/post/about/</id>
        <link href="https://sunxiaohang.github.io/post/about/">
        </link>
        <updated>2017-06-07T12:47:48.000Z</updated>
        <content type="html"><![CDATA[<h4 id="å­™èˆª">å­™èˆª</h4>
<p>132 0880 3520 | cssunhang@outlook.com | sunxiaohang.github.io</p>
<h4 id="ä¸ªäººç»å†">ä¸ªäººç»å†</h4>
<h5 id="20199è‡³ä»Š">2019/9â€”è‡³ä»Š</h5>
<p>è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸ | æ¸¸æˆå¼€å‘</p>
<p>å·¥ä½œæè¿°ï¼šè´Ÿè´£æ¸¸æˆé¡¹ç›®çš„å¼€å‘å’Œç»´æŠ¤å·¥ä½œ</p>
<h5 id="20171220189">2017/12â€”2018/9</h5>
<p>åŒ—äº¬åäº¿åˆ›æ–°ä¿¡æ¯ç§‘æŠ€ | å‰ç«¯ /QTåµŒå…¥å¼</p>
<p>å·¥ä½œæè¿°ï¼šå…¨é¢è´Ÿè´£å¼€å‘è·³æ°´æ¯”èµ›åå°ç®¡ç†ç³»ç»Ÿ/çƒç±»è®¡æ—¶è®°åˆ†æ§åˆ¶ç³»ç»Ÿ</p>
<h5 id="2016620177">2016/6â€”2017/7</h5>
<p>äº‘å—é’æ‰ä¿¡æ¯ç§‘æŠ€ | Android å¼€å‘</p>
<p>å·¥ä½œæè¿°ï¼šè´Ÿè´£å¹³å®‰ç¤¾åŒºäº§å“ç›‘æ§è§†é¢‘æµé‡‡é›†åŠè§£ç </p>
<h5 id="20189è‡³ä»Š">2018/9â€”è‡³ä»Š</h5>
<p>è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦ | è½¯ä»¶å·¥ç¨‹ | ç¡•å£«</p>
<h5 id="2013920176">2013/9â€”2017/6</h5>
<p>è¥¿å—æ—ä¸šå¤§å­¦ | ç”µå­ä¿¡æ¯å·¥ç¨‹ | æœ¬ç§‘</p>
<h3 id="åœ¨æ ¡ç»å†">åœ¨æ ¡ç»å†</h3>
<blockquote>
<p>è®¡ç®—æœºè®¾è®¡å¤§èµ› | çœçº§ | ä¸€ç­‰å¥–</p>
<p>è®¡ç®—æœºè®¾è®¡å¤§èµ› | å›½å®¶çº§ | äºŒç­‰å¥–</p>
<p>è¥¿ç”µè…¾è®¯ä¿±ä¹éƒ¨|å­¦ä¸šå¥–å­¦é‡‘|åˆ›æ–°åˆ›ä¸šå¥–</p>
</blockquote>
<h4 id="ä¸“ä¸šæŠ€èƒ½">ä¸“ä¸šæŠ€èƒ½</h4>
<h5 id="java">Java</h5>
<ul>
<li>Java åŸºç¡€ <strong>|</strong> Javaå¤šçº¿ç¨‹ <strong>|</strong> Javaå¹¶å‘ <strong>|</strong> Javaé”</li>
<li>Javaè®¾è®¡æ¨¡å¼ <strong>|</strong> Javaè™šæ‹Ÿæœº</li>
<li>Spring <strong>|</strong> Spring MVC</li>
<li>Spring boot <strong>|</strong> thymeleaf <strong>|</strong> dubbo RPC</li>
</ul>
<h5 id="android">Android</h5>
<ul>
<li>Android åº”ç”¨æ¡†æ¶ <strong>|</strong> Androidè®¾è®¡æ¨¡å¼</li>
<li>Viewç»˜åˆ¶ <strong>|</strong> è‡ªå®šä¹‰ViewGroup</li>
<li>Android ç½‘ç»œç¼–ç¨‹</li>
<li>Android IPC</li>
</ul>
<h5 id="unity3d">Unity3D</h5>
<ul>
<li>UGUI <strong>|</strong> FairyGUI</li>
<li>Unity3DåŸºç¡€ <strong>|</strong> åŠ¨ç”»ç³»ç»Ÿ <strong>|</strong> å¯¹è¯å£å‹</li>
<li>Shader</li>
</ul>
<h4 id="åšå®¢ä¸»è¦åˆ†äº«">åšå®¢ä¸»è¦åˆ†äº«</h4>
<ul>
<li>Java <strong>|</strong> Android <strong>|</strong> Unity3D</li>
<li>æ•°æ®ç»“æ„ <strong>|</strong> ç®—æ³• <strong>|</strong> è®¾è®¡æ¨¡å¼</li>
</ul>
<h4 id="é¡¹ç›®ç»éªŒ">é¡¹ç›®ç»éªŒ</h4>
<h5 id="20199è‡³ä»Š-è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸-æ¸¸æˆå¼€å‘">2019/9â€”è‡³ä»Š | è…¾è®¯è®¡ç®—æœºç³»ç»Ÿæœ‰é™å…¬å¸ |æ¸¸æˆå¼€å‘</h5>
<blockquote>
<p>é¡¹ç›®ç®€ä»‹ï¼šMMOæ¸¸æˆé¡¹ç›®çš„å¼€å‘ä¸ç»´æŠ¤</p>
<p>åŠŸèƒ½ï¼šMMOæ¸¸æˆUI|äº‹ä»¶ç³»ç»Ÿ|Unity3Då¼•æ“|åŠ¨ç”»è¡¨ç°ç»„</p>
<p>èŒè´£ï¼šé¡¹ç›®å¼€å‘ | ä»£ç ç»´æŠ¤ | æ–‡æ¡£çš„æ’°å†™</p>
</blockquote>
<h5 id="2019420195-ä¸ªäººé¡¹ç›®-ctimes">2019/4â€”2019/5 | ä¸ªäººé¡¹ç›® | CTimes</h5>
<blockquote>
<p>é¡¹ç›®ç®€:æ–°é—»å½±éŸ³å›¾ä¹¦å®¢æˆ·ç«¯</p>
<p>åŠŸèƒ½:  æœ€æ–°æ–°é—»|è±†ç“£å›¾ä¹¦|è±†ç“£ç”µå½±|éŸ³è§†é¢‘</p>
<p>èŒè´£:  é¡¹ç›®UIè®¾è®¡ | æ¶æ„è®¾è®¡ | ä»£ç å®ç° | æ•°æ®è°ƒè¯•|æ–‡æ¡£æ’°å†™</p>
</blockquote>
<h5 id="2019120192-ä¸ªäººé¡¹ç›®-åœè½¦åœºä»¿çœŸç³»ç»Ÿ">2019/1â€”2019/2 | ä¸ªäººé¡¹ç›® | åœè½¦åœºä»¿çœŸç³»ç»Ÿ</h5>
<blockquote>
<p>é¡¹ç›®ç®€ä»‹:åœè½¦åœºç®¡ç†ä»¿çœŸç³»ç»Ÿ</p>
<p>åŠŸèƒ½:  åœè½¦åœºæ¨¡æ‹Ÿ|ç”¨æˆ·ç®¡ç†|æ•°æ®æŒä¹…åŒ–</p>
<p>èŒè´£:  é¡¹ç›®UIè®¾è®¡ | æ¶æ„è®¾è®¡ | ä»£ç å®ç° | æ•°æ®åº“è°ƒè¯• | æ–‡æ¡£æ’°å†™</p>
</blockquote>
<h5 id="20171220189-åŒ—äº¬åäº¿åˆ›æ–°-è·³æ°´æ¯”èµ›åå°ç®¡ç†ç³»ç»Ÿ">2017/12â€”2018/9 | åŒ—äº¬åäº¿åˆ›æ–° | è·³æ°´æ¯”èµ›åå°ç®¡ç†ç³»ç»Ÿ</h5>
<blockquote>
<p>é¡¹ç›®ç®€ä»‹ï¼šç®¡ç†è·³æ°´æ¯”èµ›é¡¹ç›®çš„äººå‘˜ç¼–æ’ï¼Œèµ›ç¨‹å®‰æ’ï¼Œæ‰“åˆ†ç³»ç»Ÿç­‰</p>
<p>èŒè´£ï¼šç³»ç»Ÿçš„è®¾è®¡ä¸å®ç° | ä»£ç ç¼–å†™ã€è°ƒè¯• | å¸®åŠ©æ–‡æ¡£çš„æ’°å†™</p>
</blockquote>
<h5 id="2018320184-åŒ—äº¬åäº¿åˆ›æ–°-çƒç±»è®¡æ—¶è®°åˆ†ç³»ç»Ÿ">2018/3â€”2018/4 | åŒ—äº¬åäº¿åˆ›æ–° | çƒç±»è®¡æ—¶è®°åˆ†ç³»ç»Ÿ</h5>
<blockquote>
<p>é¡¹ç›®ç®€ä»‹ï¼šçƒç±»è®¡æ—¶ã€è®°åˆ†ï¼Œçƒæƒæ§åˆ¶ï¼Œç¦»åœºï¼ŒçŠ¯è§„ç­‰</p>
<p>èŒè´£ï¼šç³»ç»Ÿè®¾è®¡ä¸å®ç° | ä»£ç çš„ç¼–å†™ã€è°ƒè¯• | æ–‡æ¡£çš„æ’°å†™</p>
</blockquote>
<h5 id="20161020175-äº‘å—é’æ‰ä¿¡æ¯-å¹³å®‰ç¤¾åŒº">2016/10â€”2017/5 | äº‘å—é’æ‰ä¿¡æ¯ | å¹³å®‰ç¤¾åŒº</h5>
<blockquote>
<p>é¡¹ç›®ç®€ä»‹ï¼šç¤¾åŒºç»´æŠ¤ï¼Œç®¡ç†ï¼ŒæŠ¥å¤‡ç³»ç»Ÿ</p>
<p>èŒè´£ï¼šæ²Ÿé€šå¯¹æ¥ | è§†é¢‘æµè§£ç </p>
</blockquote>
<h5 id="20168201610-æ¯”èµ›é¡¹ç›®-intelligent-car">2016/8â€”2016/10 | æ¯”èµ›é¡¹ç›® | Intelligent Car</h5>
<blockquote>
<p>é¡¹ç›®ç®€ä»‹:  è¯­éŸ³æ§åˆ¶çš„æ™ºèƒ½å°è½¦</p>
<p>åŠŸèƒ½:  è¯­éŸ³è¯†åˆ« | äººè„¸è¯†åˆ« | è§†é¢‘æµä¼ è¾“ | è¯­éŸ³åŠ©æ‰‹</p>
<p>èŒè´£:  é¡¹ç›®UIè®¾è®¡ | æœºæ¢°æ§åˆ¶ç¨‹åºç¼–å†™ | Androidæ§åˆ¶ç¨‹åºç¼–å†™ | é€šä¿¡æœåŠ¡å™¨å®ç° | æ–‡æ¡£æ’°å†™</p>
</blockquote>
]]></content>
    </entry>
</feed>